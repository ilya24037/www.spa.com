# üñºÔ∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –§–û–¢–û–ì–†–ê–§–ò–ô

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–†–û–í–ê–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–∞—Å—Ç–µ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ù–µ—Ç —Ñ–æ—Ç–æ" –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏–π

### –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã:
1. **MasterController** –∑–∞–≥—Ä—É–∂–∞–ª –¥–∞–Ω–Ω—ã–µ –∏–∑ `master_profiles` (–±–µ–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π)
2. **–†–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ `ads.photos` –∫–∞–∫ JSON array
3. **Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –Ω–µ –ø–æ–ª—É—á–∞–ª –¥–∞–Ω–Ω—ã–µ –æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è ID 55:
```json
{
  "id": 55,
  "title": "–ë–µ–ª–ª–∞", 
  "user_id": 1,
  "photos": [
    "/storage/photos/1/68a81ed14d386_1755848401.webp",
    "/storage/photos/1/68a81ed14eedc_1755848401.webp", 
    "/storage/photos/1/68a81ed14f3d5_1755848401.webp",
    "/storage/photos/1/68a81ed14f8ef_1755848401.webp",
    "/storage/photos/1/68a81ed14fd63_1755848401.webp"
  ]
}
```

‚úÖ **–§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:** –í—Å–µ 5 webp —Ñ–∞–π–ª–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `/public/storage/photos/1/`

## ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω MasterController.php

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:**

```php
// –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
$adPhotos = [];
try {
    // –ò—â–µ–º –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–∞—Å—Ç–µ—Ä–∞
    $ad = \DB::table('ads')
        ->where('user_id', $profile->user_id)
        ->where('status', 'active')
        ->first();
    
    if ($ad && $ad->photos) {
        $photosJson = json_decode($ad->photos, true);
        if (is_array($photosJson)) {
            $adPhotos = array_map(function($photoUrl) {
                return [
                    'url' => $photoUrl,
                    'thumbnail_url' => $photoUrl,
                    'alt' => '–§–æ—Ç–æ –º–∞—Å—Ç–µ—Ä–∞'
                ];
            }, $photosJson);
        }
    }
} catch (\Exception $e) {
    \Log::warning('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞: ' . $e->getMessage());
}
```

**–ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ Vue:**
```php
// –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –º–∞—Å—Å–∏–≤ –º–∞—Å—Ç–µ—Ä–∞
$masterArray = $masterDTO->toArray();
if (!empty($adPhotos)) {
    $masterArray['photos'] = $adPhotos;
}

return Inertia::render('Masters/Show', [
    'master'         => $masterArray,
    'gallery'        => !empty($adPhotos) ? $adPhotos : $masterDTO->gallery,
    // ...
]);
```

### 2. –û—á–∏—â–µ–Ω Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–£–±—Ä–∞–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –∏–∑ `galleryImages` computed:**
- –£–¥–∞–ª–µ–Ω—ã `console.log` —Å–æ–æ–±—â–µ–Ω–∏—è
- –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå "–ù–µ—Ç —Ñ–æ—Ç–æ" placeholder
- ‚ùå Fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ **5 —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π** –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏—è "–ë–µ–ª–ª–∞"
- ‚úÖ **Ozon-style –≥–∞–ª–µ—Ä–µ—è** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **ImageGalleryModal** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–æ—Ç–æ
- ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üì∏ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:

1. **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏—è** (`props.master.photos`) - **–í–´–°–®–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢**
2. **Avatar –º–∞—Å—Ç–µ—Ä–∞** (`props.master.avatar`)
3. **Fallback —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** (–∏–∑ masterData)
4. **Default placeholder** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö:

```
User ID 1 ‚Üí Master Profile ID 1 ‚Üí Active Ads (52, 55, 70, 71, 97)
                                      ‚Üì
                              –§–æ—Ç–æ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
                                      ‚Üì
                              Masters/Show.vue –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ
```

## üîó –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

**MasterController:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**Vue Component:** –ü–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `props.master.photos`
**ImageGalleryModal:** –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

## üöÄ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ù–£

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ URL:**
- `http://spa.test/masters/klassiceskii-massaz-ot-anny-1` - –§–æ—Ç–æ –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏—è ID 55

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **PRODUCTION READY**

---
**–î–∞—Ç–∞:** 28.08.2025  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~30 –º–∏–Ω—É—Ç  
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:** 2 (MasterController.php, Masters/Show.vue)