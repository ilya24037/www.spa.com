<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Yandex Maps API 3.0</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #map {
            width: 100%;
            height: 400px;
            border: 2px solid #ccc;
            background: #f0f0f0;
        }
        .info {
            margin: 20px 0;
            padding: 10px;
            background: #e8f4f8;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç Yandex Maps API 3.0</h1>
    
    <div class="info">
        <p><strong>–¶–µ–ª—å:</strong> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É Yandex Maps API 3.0</p>
        <p><strong>API Key:</strong> 23ff8acc-835f-4e99-8b19-d33c5d346e18</p>
        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</span></p>
    </div>
    
    <div id="map"></div>
    
    <div class="info">
        <p><strong>–õ–æ–≥–∏:</strong></p>
        <div id="logs" style="background: #f9f9f9; padding: 10px; border-radius: 3px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;"></div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message) {
            const logs = document.getElementById('logs');
            const time = new Date().toLocaleTimeString();
            logs.innerHTML += `[${time}] ${message}<br>`;
            logs.scrollTop = logs.scrollHeight;
            console.log(message);
        }
        
        let myMap = null;
        
        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã —Å API 3.0
        async function initMap() {
            log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞—Ä—Ç—ã —Å API 3.0...');
            
            try {
                const { YMap, YMapDefaultSchemeLayer, YMapDefaultFeaturesLayer, YMapMarker } = ymaps3;
                
                // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º API 3.0
                myMap = new YMap(document.getElementById('map'), {
                    location: {
                        center: [37.617698, 55.755864], // –ú–æ—Å–∫–≤–∞
                        zoom: 12
                    }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ–∏
                myMap.addChild(new YMapDefaultSchemeLayer({}));
                myMap.addChild(new YMapDefaultFeaturesLayer({}));
                
                log('‚úÖ –ö–∞—Ä—Ç–∞ 3.0 —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
                
                // –°–æ–∑–¥–∞–µ–º –º–∞—Ä–∫–µ—Ä —Å DOM —ç–ª–µ–º–µ–Ω—Ç–æ–º
                const markerElement = document.createElement('div');
                markerElement.innerHTML = `
                    <svg width="32" height="40" viewBox="0 0 32 40" fill="none">
                        <path d="M16 0C7.164 0 0 7.164 0 16C0 24.836 16 40 16 40S32 24.836 32 16C32 7.164 24.836 0 16 0Z" fill="#EA4335"/>
                        <circle cx="16" cy="16" r="6" fill="white"/>
                    </svg>
                `;
                markerElement.style.cursor = 'pointer';
                markerElement.style.transform = 'translate(-16px, -40px)';
                
                const marker = new YMapMarker({
                    coordinates: [37.617698, 55.755864],
                    draggable: false
                }, markerElement);
                
                myMap.addChild(marker);
                log('‚úÖ –ú–∞—Ä–∫–µ—Ä 3.0 –¥–æ–±–∞–≤–ª–µ–Ω');
                
                document.getElementById('status').textContent = '–ö–∞—Ä—Ç–∞ 3.0 –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ';
                document.getElementById('status').style.color = 'green';
                
            } catch (error) {
                log('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã 3.0: ' + error.message);
                document.getElementById('status').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                document.getElementById('status').style.color = 'red';
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º Yandex Maps API 3.0
        function loadYandexMaps() {
            log('üì° –ó–∞–≥—Ä—É–∂–∞–µ–º Yandex Maps API 3.0...');
            
            const script = document.createElement('script');
            script.src = 'https://api-maps.yandex.ru/3.0/?apikey=23ff8acc-835f-4e99-8b19-d33c5d346e18&lang=ru_RU';
            script.onload = function() {
                log('‚úÖ Yandex Maps API 3.0 –∑–∞–≥—Ä—É–∂–µ–Ω');
                ymaps3.ready.then(initMap);
            };
            script.onerror = function() {
                log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Yandex Maps API 3.0');
                document.getElementById('status').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API 3.0';
                document.getElementById('status').style.color = 'red';
            };
            
            document.head.appendChild(script);
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        loadYandexMaps();
    </script>
</body>
</html>
