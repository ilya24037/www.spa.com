<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div id="app">
        <h1 class="text-3xl font-bold mb-8">üéØ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</h1>
        
        <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
        <div class="max-w-4xl mx-auto">
            <verification-section
                :ad-id="testAdId"
                :verification-photo="verificationPhoto"
                :verification-video="verificationVideo"
                :verification-status="verificationStatus"
                :verification-comment="verificationComment"
                :verification-expires-at="verificationExpiresAt"
                @update:verification-photo="handlePhotoUpdate"
                @update:verification-video="handleVideoUpdate"
                @update:verification-status="handleStatusUpdate"
            />
        </div>

        <!-- Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="mt-8 p-4 bg-white rounded-lg shadow">
            <h2 class="text-xl font-bold mb-4">Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="space-y-2 text-sm">
                <div><strong>Ad ID:</strong> {{ testAdId }}</div>
                <div><strong>Photo:</strong> {{ verificationPhoto || '–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ' }}</div>
                <div><strong>Video:</strong> {{ verificationVideo || '–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ' }}</div>
                <div><strong>Status:</strong> {{ verificationStatus }}</div>
                <div><strong>Comment:</strong> {{ verificationComment || '–Ω–µ—Ç' }}</div>
                <div><strong>Expires At:</strong> {{ verificationExpiresAt || '–Ω–µ—Ç' }}</div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        // –ú–æ–∫-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç VerificationBadge
        const VerificationBadge = {
            props: {
                badge: {
                    type: Object,
                    required: true
                }
            },
            template: `
                <div class="verification-badge">
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        ‚úÖ {{ badge.text }}
                    </span>
                </div>
            `
        };

        // –ú–æ–∫-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç VerificationPhotoUpload
        const VerificationPhotoUpload = {
            props: {
                adId: Number,
                currentPhoto: String,
                status: String
            },
            emits: ['uploaded', 'deleted'],
            template: `
                <div class="verification-photo-upload bg-white p-6 rounded-lg border">
                    <h3 class="text-lg font-semibold mb-4">üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–≥–æ —Ñ–æ—Ç–æ</h3>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <p class="text-sm text-blue-700">
                            –ù–∞ –ª–∏—Å—Ç–∫–µ –±—É–º–∞–≥–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –æ—Ç —Ä—É–∫–∏ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ "–¥–ª—è FEIPITER", 
                            –∑–∞—Ç–µ–º —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ—Å—å —Å —ç—Ç–∏–º –ª–∏—Å—Ç–∫–æ–º.
                        </p>
                    </div>

                    <div v-if="!currentPhoto" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                        <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        <p class="text-gray-500">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ</p>
                        <input type="file" accept="image/*" @change="handleUpload" class="hidden">
                        <button @click="$event.target.parentElement.querySelector('input').click()" 
                                class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                            –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ
                        </button>
                    </div>

                    <div v-else class="text-center">
                        <div class="mb-4">
                            <div class="w-32 h-32 mx-auto bg-gray-200 rounded-lg flex items-center justify-center">
                                <span class="text-gray-500">üì∏</span>
                            </div>
                        </div>
                        <p class="text-green-600 mb-2">‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</p>
                        <p class="text-sm text-gray-500 mb-4">{{ currentPhoto }}</p>
                        <button @click="$emit('deleted')" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </div>
            `,
            methods: {
                handleUpload(event) {
                    const file = event.target.files[0];
                    if (file) {
                        // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
                        setTimeout(() => {
                            this.$emit('uploaded', '/storage/verification/photos/' + file.name);
                        }, 1000);
                    }
                }
            }
        };

        // –ú–æ–∫-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç VerificationVideoUpload
        const VerificationVideoUpload = {
            props: {
                adId: Number,
                currentVideo: String,
                status: String
            },
            emits: ['uploaded', 'deleted'],
            template: `
                <div class="verification-video-upload bg-white p-6 rounded-lg border">
                    <h3 class="text-lg font-semibold mb-4">üé• –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ</h3>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <p class="text-sm text-blue-700">
                            –ó–∞–ø–∏—à–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ –≥–¥–µ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç–µ –≤—Å–ª—É—Ö —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞ "FEIPITER".
                        </p>
                    </div>

                    <div v-if="!currentVideo" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                        <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        <p class="text-gray-500">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ</p>
                        <input type="file" accept="video/*" @change="handleUpload" class="hidden">
                        <button @click="$event.target.parentElement.querySelector('input').click()" 
                                class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                            –í—ã–±—Ä–∞—Ç—å –≤–∏–¥–µ–æ
                        </button>
                    </div>

                    <div v-else class="text-center">
                        <div class="mb-4">
                            <div class="w-48 h-32 mx-auto bg-gray-200 rounded-lg flex items-center justify-center">
                                <span class="text-gray-500">üé•</span>
                            </div>
                        </div>
                        <p class="text-green-600 mb-2">‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</p>
                        <p class="text-sm text-gray-500 mb-4">{{ currentVideo }}</p>
                        <button @click="$emit('deleted')" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </div>
            `,
            methods: {
                handleUpload(event) {
                    const file = event.target.files[0];
                    if (file) {
                        // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
                        setTimeout(() => {
                            this.$emit('uploaded', '/storage/verification/videos/' + file.name);
                        }, 1500);
                    }
                }
            }
        };

        // –ú–æ–∫-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç VerificationStatus
        const VerificationStatus = {
            props: {
                status: String,
                comment: String,
                expiresAt: String,
                verifiedAt: String
            },
            template: `
                <div class="verification-status mt-4">
                    <div v-if="status === 'pending'" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div class="flex items-center">
                            <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-yellow-600 mr-3"></div>
                            <div>
                                <h3 class="font-semibold text-yellow-800">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h3>
                                <p class="text-sm text-yellow-700">–í–∞—à–∏ —Ñ–∞–π–ª—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</p>
                            </div>
                        </div>
                    </div>

                    <div v-else-if="status === 'verified'" class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <div>
                                <h3 class="font-semibold text-green-800">–§–æ—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</h3>
                                <p class="text-sm text-green-700">–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–∞</p>
                                <p v-if="expiresAt" class="text-xs text-green-600 mt-1">–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: {{ expiresAt }}</p>
                            </div>
                        </div>
                    </div>

                    <div v-else-if="status === 'rejected'" class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 text-red-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                            </svg>
                            <div>
                                <h3 class="font-semibold text-red-800">–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞</h3>
                                <p v-if="comment" class="text-sm text-red-700 mt-1">{{ comment }}</p>
                                <p class="text-sm text-red-600 mt-2">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º</p>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        // –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç VerificationSection
        const VerificationSection = {
            props: {
                adId: Number,
                verificationPhoto: String,
                verificationVideo: String,
                verificationStatus: String,
                verificationComment: String,
                verificationExpiresAt: String
            },
            emits: [
                'update:verificationPhoto',
                'update:verificationVideo', 
                'update:verificationStatus'
            ],
            components: {
                VerificationBadge,
                VerificationPhotoUpload,
                VerificationVideoUpload,
                VerificationStatus
            },
            data() {
                return {
                    isOpen: true,
                    activeTab: 'photo'
                }
            },
            computed: {
                verificationData() {
                    return {
                        status: this.verificationStatus,
                        badge: this.verificationStatus === 'verified' ? {
                            status: 'verified',
                            text: '–§–æ—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ'
                        } : null
                    }
                }
            },
            template: `
                <div class="verification-section bg-white rounded-lg border border-gray-200 p-4 mb-4">
                    <div class="section-header cursor-pointer select-none" @click="isOpen = !isOpen">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <svg class="w-5 h-5 transition-transform duration-200" :class="{ 'rotate-90': isOpen }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                                <h2 class="text-lg font-semibold">
                                    –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
                                    <span class="text-sm font-normal text-gray-500 ml-2">(—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º)</span>
                                </h2>
                            </div>
                            <verification-badge v-if="verificationData.badge" :badge="verificationData.badge" />
                        </div>
                    </div>
                    
                    <div v-show="isOpen" class="section-content mt-4">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                            <p class="text-sm text-blue-800">
                                –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
                                –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á—Ç–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–∫–∞ "–§–æ—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ"!
                            </p>
                        </div>
                        
                        <div class="tabs mb-6">
                            <div class="tab-list flex gap-2 border-b">
                                <button @click="activeTab = 'photo'" 
                                        :class="['px-4 py-2 font-medium transition-colors', activeTab === 'photo' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-600 hover:text-gray-800']">
                                    üì∏ –§–æ—Ç–æ —Å –ª–∏—Å—Ç–∫–æ–º
                                </button>
                                <button @click="activeTab = 'video'" 
                                        :class="['px-4 py-2 font-medium transition-colors', activeTab === 'video' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-600 hover:text-gray-800']">
                                    üé• –í–∏–¥–µ–æ —Å –¥–∞—Ç–æ–π
                                </button>
                            </div>
                            
                            <div class="tab-content mt-4">
                                <verification-photo-upload v-show="activeTab === 'photo'"
                                    :ad-id="adId"
                                    :current-photo="verificationPhoto"
                                    :status="verificationStatus"
                                    @uploaded="$emit('update:verificationPhoto', $event)"
                                    @deleted="$emit('update:verificationPhoto', null)"
                                />
                                
                                <verification-video-upload v-show="activeTab === 'video'"
                                    :ad-id="adId"
                                    :current-video="verificationVideo"
                                    :status="verificationStatus"
                                    @uploaded="$emit('update:verificationVideo', $event)"
                                    @deleted="$emit('update:verificationVideo', null)"
                                />
                            </div>
                        </div>
                        
                        <verification-status v-if="verificationStatus && verificationStatus !== 'none'"
                            :status="verificationStatus"
                            :comment="verificationComment"
                            :expires-at="verificationExpiresAt"
                        />
                    </div>
                </div>
            `
        };

        // –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        createApp({
            components: {
                VerificationSection
            },
            data() {
                return {
                    testAdId: 123,
                    verificationPhoto: null,
                    verificationVideo: null,  
                    verificationStatus: 'none',
                    verificationComment: null,
                    verificationExpiresAt: null
                }
            },
            methods: {
                handlePhotoUpdate(path) {
                    this.verificationPhoto = path;
                    this.verificationStatus = 'pending';
                    console.log('Photo updated:', path);
                },
                handleVideoUpdate(path) {
                    this.verificationVideo = path;
                    this.verificationStatus = 'pending';
                    console.log('Video updated:', path);
                },
                handleStatusUpdate(status) {
                    this.verificationStatus = status;
                    console.log('Status updated:', status);
                }
            }
        }).mount('#app');
    </script>
</body>
</html>