<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è (/additem) -->
<template>
    <Head title="–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ" />
    
    <!-- –û–±–µ—Ä—Ç–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ –∫–∞–∫ –≤ Dashboard -->
    <div class="py-6 lg:py-8">
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –≥—ç–ø–æ–º –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏ -->
        <div class="flex gap-6">
            
            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ SidebarWrapper -->
            <SidebarWrapper 
                v-model="showMobileSidebar"
                content-class="p-0"
                :show-desktop-header="false"
                :always-visible-desktop="true"
            >
                <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="p-6 border-b">
                    <div class="flex items-center gap-4">
                        <div 
                            class="w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl font-bold"
                            :style="{ backgroundColor: avatarColor }"
                        >
                            {{ userInitial }}
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">{{ userName }}</h3>
                            <div class="flex items-center gap-2 text-sm text-gray-600">
                                <span class="font-medium">{{ userStats?.rating || '‚Äî' }}</span>
                                <div class="flex">
                                    <svg 
                                        v-for="i in 5" 
                                        :key="i"
                                        class="w-4 h-4"
                                        :class="i <= Math.floor(userStats?.rating || 0) ? 'text-yellow-400' : 'text-gray-300'"
                                        fill="currentColor"
                                        viewBox="0 0 20 20"
                                    >
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                    </svg>
                                </div>
                                <span class="text-xs">{{ userStats?.reviewsCount || 0 }} –æ—Ç–∑—ã–≤–æ–≤</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
                <nav class="py-2">
                    <div class="px-3 py-2">
                        <ul class="space-y-1">
                            <li>
                                <Link 
                                    href="/profile"
                                    :class="menuItemClass(isCurrentRoute('profile'))"
                                >
                                    –ú–æ–∏ –∞–Ω–∫–µ—Ç—ã
                                    <span v-if="counts?.profiles > 0" class="ml-auto text-xs bg-gray-100 px-2 py-0.5 rounded">
                                        {{ counts.profiles }}
                                    </span>
                                </Link>
                            </li>
                            <li>
                                <Link 
                                    href="/bookings"
                                    :class="menuItemClass(isCurrentRoute('bookings'))"
                                >
                                    –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                                    <span v-if="counts?.bookings > 0" class="ml-auto text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded">
                                        {{ counts.bookings }}
                                    </span>
                                </Link>
                            </li>
                            <li>
                                <Link 
                                    href="/favorites"
                                    :class="menuItemClass(isCurrentRoute('favorites'))"
                                >
                                    –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
                                    <span v-if="counts?.favorites > 0" class="ml-auto text-xs bg-gray-100 px-2 py-0.5 rounded">
                                        {{ counts.favorites }}
                                    </span>
                                </Link>
                            </li>
                            <li>
                                <Link 
                                    href="/additem"
                                    :class="menuItemClass(isCurrentRoute('additem'))"
                                >
                                    –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                                </Link>
                            </li>
                            <li>
                                <Link 
                                    href="/profile/edit"
                                    :class="menuItemClass(isCurrentRoute('profile/edit'))"
                                >
                                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
                                </Link>
                            </li>
                        </ul>
                    </div>
                </nav>
            </SidebarWrapper>
            
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <main class="flex-1">
                <ContentCard>
                    <template #header>
                        <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
                        <nav class="flex mb-4" aria-label="Breadcrumb">
                            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                                <li v-for="(breadcrumb, index) in breadcrumbs" :key="index" class="inline-flex items-center">
                                    <Link 
                                        v-if="breadcrumb.url" 
                                        :href="breadcrumb.url"
                                        class="text-gray-500 hover:text-gray-700 transition-colors"
                                    >
                                        {{ breadcrumb.name }}
                                    </Link>
                                    <span v-else class="text-gray-900 font-medium">{{ breadcrumb.name }}</span>
                                    
                                    <svg 
                                        v-if="index < breadcrumbs.length - 1"
                                        class="w-4 h-4 text-gray-400 mx-2" 
                                        fill="currentColor" 
                                        viewBox="0 0 20 20"
                                    >
                                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </li>
                            </ol>
                        </nav>
                    </template>

                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold text-gray-900 mb-4">
                            –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                        </h1>
                        <p class="text-lg text-gray-600">
                            –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —É—Å–ª—É–≥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –í–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É–≤–∏–¥—è—Ç —Ç—ã—Å—è—á–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤.
                        </p>
                    </div>

                    <!-- –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div
                            v-for="category in categories"
                            :key="category.id"
                            class="relative group"
                        >
                            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                            <Link 
                                :href="`/additem/${category.id}`"
                                class="block bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition-all duration-300 transform hover:-translate-y-1 border-2 border-transparent hover:border-blue-200"
                            >
                                <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ª–µ–π–±–ª -->
                                <div v-if="category.popular" class="absolute top-4 right-4 z-10">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        ‚≠ê –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ
                                    </span>
                                </div>

                                <!-- 18+ –ª–µ–π–±–ª -->
                                <div v-if="category.adult" class="absolute top-4 left-4 z-10">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        üîû 18+
                                    </span>
                                </div>

                                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                                <div class="text-center">
                                    <!-- –ò–∫–æ–Ω–∫–∞ -->
                                    <div class="flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-white rounded-full shadow-sm">
                                        <span class="text-3xl">{{ category.icon }}</span>
                                    </div>

                                    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                                    <h3 class="text-xl font-bold text-gray-900 mb-2">
                                        {{ category.name }}
                                    </h3>

                                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                                    <p class="text-gray-600 text-sm mb-4">
                                        {{ category.description }}
                                    </p>

                                    <!-- –ö–Ω–æ–ø–∫–∞ -->
                                    <div class="flex justify-center">
                                        <span class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg text-sm group-hover:bg-blue-700 transition-colors">
                                            –í—ã–±—Ä–∞—Ç—å
                                            <svg class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                            </Link>
                        </div>
                    </div>

                    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="bg-blue-50 rounded-xl p-6">
                        <h2 class="text-xl font-bold text-gray-900 mb-4 text-center">
                            –ü–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É –Ω–∞—Å?
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-gray-900 mb-2">–í—ã—Å–æ–∫–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å</h3>
                                <p class="text-gray-600 text-sm">–í–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É–≤–∏–¥—è—Ç —Ç—ã—Å—è—á–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                            </div>
                            <div class="text-center">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-gray-900 mb-2">–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã</h3>
                                <p class="text-gray-600 text-sm">–†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ç 300‚ÇΩ –≤ –º–µ—Å—è—Ü</p>
                            </div>
                            <div class="text-center">
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-gray-900 mb-2">–ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è</h3>
                                <p class="text-gray-600 text-sm">–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ 2-4 —á–∞—Å–æ–≤</p>
                            </div>
                        </div>
                    </div>
                </ContentCard>
            </main>
        </div>
    </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { Head, Link, usePage } from '@inertiajs/vue3'
import AppLayout from '@/Layouts/AppLayout.vue'
import SidebarWrapper from '@/Components/Layout/SidebarWrapper.vue'
import ContentCard from '@/Components/Layout/ContentCard.vue'

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
defineProps({
  categories: {
    type: Array,
    required: true
  },
  breadcrumbs: {
    type: Array,
    required: true
  },
  counts: {
    type: Object,
    default: () => ({})
  },
  userStats: {
    type: Object,
    default: () => ({})
  }
})

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
const showMobileSidebar = ref(false)

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–∫–æ–ø–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É –∏–∑ Dashboard)
const page = usePage()
const user = computed(() => page.props.auth?.user || {})
const userName = computed(() => user.value.name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')
const userInitial = computed(() => userName.value.charAt(0).toUpperCase())

// –¶–≤–µ—Ç –∞–≤–∞—Ç–∞—Ä–∞
const colors = ['#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#00bcd4', '#009688', '#4caf50', '#ff9800', '#ff5722']
const avatarColor = computed(() => {
    const charCode = userName.value.charCodeAt(0) || 85
    return colors[charCode % colors.length]
})

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–æ—É—Ç–∞
const isCurrentRoute = (routeName) => {
    return page.url.includes(routeName)
}

// –ö–ª–∞—Å—Å –¥–ª—è –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
const menuItemClass = (isActive) => [
    'flex items-center justify-between px-3 py-2 text-sm rounded-lg transition',
    isActive 
        ? 'bg-blue-50 text-blue-600 font-medium' 
        : 'text-gray-700 hover:bg-gray-50'
]
</script>