# üêõ BUG-002: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ JSON.parse

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **ID:** BUG-002
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** AdForm.vue
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Error Handling / Runtime Safety
- **–°—Ç–∞—Ç—É—Å:** –û—Ç–∫—Ä—ã—Ç
- **–î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2025-09-17

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ JSON —Å—Ç—Ä–æ–∫–∏ –∏–∑ –ø–æ–ª—è `form.geo` –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫—Ä–∞—Ö—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.

## üìç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```typescript
// resources/js/src/features/ad-creation/ui/AdForm.vue (—Å—Ç—Ä–æ–∫–∏ 805-806)
const geoData = typeof form.geo === 'string'
  ? JSON.parse(form.geo || '{}')  // ‚ùå –ù–µ—Ç try/catch
  : form.geo
isEmpty = !geoData?.address
```

## üîÑ –®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
1. –í –ë–î –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `geo` –Ω–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON (–Ω–∞–ø—Ä–∏–º–µ—Ä: `"{broken json"`)
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π `Unexpected token`

## ‚ùó –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

## ‚ö° –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç —Å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–æ–π JSON.parse.

## üéØ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å
- **UX:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω
- **Data Recovery:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
const safeParseGeoData = (data: any): GeoData => {
  if (typeof data === 'object') return data

  try {
    return typeof data === 'string'
      ? JSON.parse(data || '{}')
      : {}
  } catch (error) {
    console.error('Failed to parse geo data:', error)
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    return {}
  }
}

const geoData = safeParseGeoData(form.geo)
isEmpty = !geoData?.address
```

## üß™ –¢–µ—Å—Ç-–∫–µ–π—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. **–í–∞–ª–∏–¥–Ω—ã–π JSON:** `{"address": "–ú–æ—Å–∫–≤–∞"}` - –¥–æ–ª–∂–µ–Ω –ø–∞—Ä—Å–∏—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON:** `"{broken"` - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
3. **–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞:** `""` - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
4. **null/undefined:** –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
5. **–û–±—ä–µ–∫—Ç:** `{address: "test"}` - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫–∞–∫ –µ—Å—Ç—å

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ JSON.parse –≤ –ª–æ–≥–∞—Ö
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ä–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è