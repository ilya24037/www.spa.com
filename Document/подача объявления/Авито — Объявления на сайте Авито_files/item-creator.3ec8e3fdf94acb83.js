/*! For license information please see item-creator.3ec8e3fdf94acb83.js.LICENSE.txt */
"use strict";(self["webpackChunkavito_desktop_site"]=self["webpackChunkavito_desktop_site"]||[]).push([[118],{80994:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{b:function(){return s}});var i,o,a,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"AutoImvInterpretationDesktop",get:function(){return function(t){return t(e.NAME).get("AutoImvInterpretationDesktop")}}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();a="imv-interpretation-mfe",(o="NAME")in(i=s)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a},37841:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{M:function(){return s}});var i,o,a,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"ItemCreator",get:function(){return function(t){return t(e.NAME).get("ItemCreator")}}},{key:"DesktopItemsActivation",get:function(){return function(t){return t(e.NAME).get("DesktopItemsActivation")}}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();a="item-publish",(o="NAME")in(i=s)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a},82692:function(e,t,n){n.d(t,{ZP:function(){return T},Hi:function(){return _}});var r=n(84481),i=n.n(r),o=n(97170),a=n(80129),s=n(98790),c=n(43296),l=n(12664),d=n(6897),u=n(16677),p=n(49921),f=n(4375);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={stories:null},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.sentryClient=(0,d.eI)({packageName:"bx-stories"}),this.fetchStory()}},{key:"render",value:function(){var e=this.props.render;return i().createElement(u.f,null,e(this.state.stories),i().createElement(p.m,{place:"bottom"}))}},{key:"fetchStory",value:function(){var e=this,t=this.props,n=t.ids,r=t.locationId,i=t.baseUrl,o=void 0===i?"":i,a=t.onError,s={locationId:r,selectedId:n[0],ids:n,platform:"desktop"};(0,l.h)("".concat(o,"/web/1/stories"),"GET",{id:"/web/1/stories"})(s).then((function(t){var n=t.result,r=t.error;if(r||!n||n&&!n.length)return e.showError(r,s),void a();e.setState({stories:n})})).catch((function(t){e.showError(t,s),a()}))}},{key:"showError",value:function(e,t){f.F.show("Не удалось открыть историю",{variant:"error"}),this.sentryClient(e,{name:"opening story by link",data:t})}}])&&h(t.prototype,n),r&&h(t,r),a}(r.PureComponent);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k="openStory",C="-",S="story_player_body_updater",O=function(){var e=document.createElement("span");e.id=S,e.style.display="none",document.body.appendChild(e)},_=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fromPage;if(e&&0!==e.length){var n=new URL(window.location);n.searchParams.append(k,e.join(C)),t&&n.searchParams.append("fromPage",t),window.history.replaceState({},document.title,n.href),O()}},L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(d,e);var t,n,r,l=I(d);function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(x(e=l.call.apply(l,[this].concat(n))),"renderStoryViewer",(function(t){return t&&(0,o.createPortal)(i().createElement(s.D,null,i().createElement(c.Z,{stories:t,locationId:e.props.locationId,categoryId:e.props.categoryId,selectedId:e.state.openStoryIds[0],fromPage:e.state.fromPage,onClose:e.handleClose})),document.body)})),E(x(e),"handleClose",(function(){e.setState({openStoryIds:null,fromPage:null});var t,n=new URL(window.location);n.searchParams.delete(k),n.searchParams.delete("fromPage"),window.history.replaceState({},document.title,n.href),null==(t=document.getElementById(S))||t.remove()})),E(x(e),"handleLocationChange",(function(){var t=e.handleQuery(),n=t.openStoryIds,r=t.fromPage;n&&e.setState({openStoryIds:n,fromPage:r})})),E(x(e),"handleQuery",(function(){var e,t,n=a.parse(window.location.search.substring(1)),r=(null!==(e=n[k])&&void 0!==e?e:"").split(C).map((function(e){return parseInt(e,10)})).filter((function(e){return!Number.isNaN(e)}));return 0!==r.length&&(t=r),{openStoryIds:t,fromPage:n.fromPage}})),e.state={openStoryIds:null,fromPage:null,oldHref:null},e}return t=d,(n=[{key:"componentDidMount",value:function(){var e=this;this.setState({oldHref:window.location.href}),this.handleLocationChange(),new MutationObserver((function(){e.state.oldHref!==window.location.href&&(e.setState({oldHref:window.location.href}),e.handleLocationChange())})).observe(document,{childList:!0,subtree:!0})}},{key:"render",value:function(){var e=this.props,t=e.locationId,n=e.baseUrl,r=this.state.openStoryIds;return i().createElement(i().Fragment,null,r&&i().createElement(v,{ids:r,locationId:t,render:this.renderStoryViewer,baseUrl:n,onError:this.handleClose}))}}])&&b(t.prototype,n),r&&b(t,r),d}(r.PureComponent),T=L},43296:function(e,t,n){n.d(t,{Z:function(){return pe}});var r=n(84481),i=n.n(r),o=n(84921),a=n(93967),s=n.n(a),c="undefined"!=typeof window&&void 0!==window.document,l=function(e){return null!=e},d=function(e){return e*(100/h())},u=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgba(".concat(t>>16&255,", ").concat(t>>8&255,", ").concat(255&t,", ").concat(n,")")):""},p=function(e,t){return"".concat(e,".").concat(t)},f=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t,e.style["-ms-transform"]=t},h=function(e){return l(e)?e.clientWidth:document.documentElement.clientWidth},m=function(e,t){l(t)&&e.appendChild(t)},y=function(e,t){l(t)&&e.removeChild(t)},g=function(e,t){l(e)&&e.classList.add(t)},v=function(e,t){l(e)&&e.classList.remove(t)},b=function(e){if(!c)return null;var t=document.createElement("svg");return t.classList.add("icon"),t.classList.add(e),t},w=function(){};w.easeOutExpo=function(e){return 1===e?1:1-Math.pow(2,-10*e)},w.linear=function(e){return e},w.makeEaseOut=function(e){return function(t){return 1-e(1-t)}},w.back=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.pow(e,2)*((t+1)*e-t)},w.backEaseOut=w.makeEaseOut(w.back);var I=0,x=-1,P=1,E=function(e,t,n,r,i){this.state=I,this.startPoint=e,this.endPoint=t,this.duration=n,this.accel=r||w.linear,this.timeFraction=0,this.progress=0,this.animationFrames=[],this.coords=[],this.onEndCallback=i};E.prototype.play=function(){return!this.isPlaying()&&(this.startTime=performance.now(),this.isPaused()?(this.startTime-=this.duration*this.progress,this.setStatePlaying()):this.timeFraction=0,window.requestAnimationFrame(this.animate.bind(this)),this.setStatePlaying(),!0)},E.prototype.stop=function(){this.cancelAnimation(),this.progress=1,this.updateCoords(),function(e){for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0}(this.animationFrames),this.setStateStopped(),l(this.onEndCallback)&&this.onEndCallback()},E.prototype.pause=function(){this.isPlaying()&&(this.cancelAnimation(),this.setStatePaused())},E.prototype.animate=function(e){if(this.timeFraction=(e-this.startTime)/this.duration,this.timeFraction>1&&(this.timeFraction=1),this.progress=this.accel(this.timeFraction),this.updateCoords(),this.updateStyle(),this.timeFraction<1){var t=window.requestAnimationFrame(this.animate.bind(this));this.animationFrames.push(t)}else this.isPlaying()&&this.stop()},E.prototype.cancelAnimation=function(){var e=this.animationFrames[this.animationFrames.length-1];window.cancelAnimationFrame(e)},E.prototype.updateCoords=function(){this.coords[0]=(this.endPoint[0]-this.startPoint[0])*this.progress+this.startPoint[0],this.coords[1]=(this.endPoint[1]-this.startPoint[1])*this.progress+this.startPoint[1]},E.prototype.onEnd=function(){this.onEndCallback&&this.onEndCallback()},E.prototype.isPlaying=function(){return this.state===P},E.prototype.isPaused=function(){return this.state===x},E.prototype.setStatePlaying=function(){this.state=P},E.prototype.setStateStopped=function(){this.state=I},E.prototype.setStatePaused=function(){this.state=x};var k=function e(t){var n=[t.start,0],r=[t.end,0],i=t.time,o=t.accel,a=t.onEnd;e.base(this,"constructor",n,r,i,o,a),this.element=t.element,this.unitType=t.unitType||"px",this.collision=t.collisionOptions,this.collisionDetected=!1};!function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n){for(var r=new Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}}(k,E),k.prototype.updateStyle=function(){f(this.element,"translate3d(".concat(this.coords[0]).concat(this.unitType,", 0px, 0px)")),void 0!==this.collision&&!1===this.collisionDetected&&this.collision.check()&&(this.collisionDetected=!0,this.collision.onCollision())},k.prototype.animateToStartPoint=function(){this.onEndCallback=void 0,this.stop(),this.coords=this.startPoint,this.updateStyle()},k.prototype.animateToEndPoint=function(){this.onEndCallback=void 0,this.stop(),this.coords=this.endPoint,this.updateStyle()};var C=function(e){this.animation=void 0,this.time=e};C.prototype.pause=function(){l(this.animation)&&this.animation.pause()},C.prototype.play=function(){l(this.animation)&&this.animation.play()},C.prototype.clear=function(){this.animation&&(this.animation.pause(),this.animation=void 0)},C.prototype.stop=function(){this.animation&&this.animation.stop()},C.prototype.create=function(e,t){var n=t.time,r=t.callback;this.animation=new k({element:e,start:0,end:e.offsetWidth,time:null!=n?n:this.time,accel:w.linear,onEnd:r})},C.prototype.animateToEnd=function(){l(this.animation)&&this.animation.animateToEndPoint()},C.prototype.animateToStart=function(){l(this.animation)&&this.animation.animateToStartPoint()};var S=b("unmute"),O=b("mute"),_=b("play"),L='<svg xmlns="http://www.w3.org/2000/svg" class="icon loadingSvg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" d="M10 20a1.11 1.11 0 0 1 0-2.22A7.78 7.78 0 1 0 2.22 10 1.11 1.11 0 1 1 0 10a10 10 0 1 1 10 10Z"></path></svg>',T={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},A=500;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B={},M={muteButton:!0},D=function(){function e(t){var n=t.timeline,r=t.page,i=t.storyIndex,o=t.pageIndex,a=t.cid,s=t.storyId,c=t.fromPage,l=t.updateTimeline,d=t.playTimeline,u=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:M).muteButton,p=void 0===u||u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeline=n,this.page=r,this.storyIndex=i,this.pageIndex=o,this.cid=a,this.storyId=s,this.fromPage=c,this.updateTimeline=l,this.playTimeline=d,this.options=F(F({},M),{},{muteButton:p})}var t,n,r;return t=e,r=[{key:"clearLoadingTimeout",value:function(e){var t=e.pageIndex,n=e.storyIndex,r=document.querySelector(".page-video-loading-indicator[data-page-index='".concat(t,"'][data-story-index='").concat(n,"']"));if(r){r.classList.add("opacity-hidden");var i=p(n,t);B[i]&&(clearTimeout(B[i]),B[i]=void 0)}}},{key:"createVideoLoadingTimeout",value:function(e,t,n){var r=p(t,n);B[r]=setTimeout((function(){e.classList.remove("opacity-hidden")}),A)}},{key:"dispatchVideoError",value:function(e){var t,n=e.cid,r=e.storyId,i=e.pageIndex,o=e.error,a=e.fromPage;clickstream.sendEvent(13392,2,{from_page:a,cid:n,story_id:r,stories_number:i+1,error_video:(null==o?void 0:o.message)||T[null==o?void 0:o.code]||"code: ".concat(null!==(t=null==o?void 0:o.code)&&void 0!==t?t:0,". Default video play error")})}}],(n=[{key:"render",value:function(e){var t=this.createVideoContainer();return e.appendChild(t),e}},{key:"createVideoContainer",value:function(){var t=this,n=this.page,r=this.storyIndex,i=this.pageIndex,o=this.cid,a=this.storyId,s=document.createElement("div"),c=document.createElement("video"),l=document.createElement("div"),d=document.createElement("img"),u=document.createElement("button"),p=document.createElement("div");c.dataset.pageIndex=i,c.dataset.storyIndex=r,d.dataset.pageIndex=i,d.dataset.storyIndex=r,p.dataset.pageIndex=i,p.dataset.storyIndex=r,s.classList.add("page-video-container"),c.classList.add("page-video"),l.classList.add("page-video-thumbnail-container"),d.classList.add("page-video-thumbnail"),u.classList.add("page-video-try-to-play"),u.classList.add("opacity-hidden"),p.classList.add("page-video-loading-indicator"),p.classList.add("opacity-hidden"),d.src=n.imageUrl,c.src=n.videoUrl,c.poster=n.imageUrl,c.playsInline=!0,c.muted=!0,c.controls=!1,c.setAttribute("muted",!0),c.loop=!1,c.preload="metadata",u.type="button",u.tabIndex=-1;var f=function(){p.classList.add("opacity-hidden"),u.classList.add("opacity-hidden"),l.classList.add("opacity-hidden")};c.addEventListener("pause",(function(t){l.classList.remove("opacity-hidden"),e.clearLoadingTimeout({pageIndex:i,storyIndex:r}),t.target.error||u.classList.add("opacity-hidden")})),c.addEventListener("error",(function(){u.classList.remove("opacity-hidden"),l.classList.remove("opacity-hidden"),e.clearLoadingTimeout({pageIndex:i,storyIndex:r}),t.timeline.pause(),e.dispatchVideoError({fromPage:t.fromPage,cid:o,storyId:a,pageIndex:i,error:c.error})})),c.addEventListener("loadedmetadata",(function(){c.innerLoaded=!0,t.updateTimeline({storyIndex:r,pageIndex:i,time:c.duration})}));var h=!1;return c.addEventListener("timeupdate",(function n(o){h||(h=!0,e.clearLoadingTimeout({pageIndex:i,storyIndex:r}),o.target.error||f()),c.innerLoaded&&(t.playTimeline(),c.removeEventListener("timeupdate",n))})),u.addEventListener("click",(function(n){n.stopPropagation(),e.createVideoLoadingTimeout(p,r,i),c.play().then(f).catch((function(){e.dispatchVideoError({fromPage:t.fromPage,cid:o,storyId:a,pageIndex:i,error:c.error})})).finally((function(){e.clearLoadingTimeout({pageIndex:i,storyIndex:r})}))})),u.append(_),p.innerHTML=L,l.append(d),s.append(c),s.append(l),s.append(u),s.append(p),this.options.muteButton&&this.addMuteButton(c,s),s}},{key:"addMuteButton",value:function(e,t){var n=document.createElement("button");n.classList.add("page-video-mute"),n.type="button",n.tabIndex=-1,n.addEventListener("click",(function(t){t.stopPropagation(),e.muted=!e.muted,e.setAttribute("muted",e.muted),e.muted?n.replaceChildren(O):n.replaceChildren(S)})),n.append(O),t.append(n)}}])&&N(t.prototype,n),r&&N(t,r),e}();function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t){var n=t.page,r=t.storyIndex,i=t.pageIndex,o=t.storyId,a=t.cid,s=t.fromPage,c=t.timeline,l=t.updateTimeLine,d=t.playTimeline;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=n,this.storyIndex=r,this.pageIndex=i,this.storyId=o,this.cid=a,this.fromPage=s,this.timeline=c,this.updateTimeLine=l,this.playTimeline=d}var t,n,r;return t=e,(n=[{key:"render",value:function(e){var t=this.page,n=this.storyId,r=this.storyIndex,i=this.pageIndex,o=this.cid,a=this.fromPage,s=this.timeline,c=this.playTimeline,d=this.updateTimeLine;if(l(t.videoUrl))new D({page:t,storyIndex:r,pageIndex:i,storyId:n,cid:o,fromPage:a,timeline:s,updateTimeLine:d,playTimeline:c}).render(e);else{if(l(t.title)){var u=document.createElement("h1");u.classList.add("title"),l(t.color)&&(u.style.color=t.color),u.innerHTML=t.title,e.appendChild(u)}if(l(t.description)){var p=document.createElement("p");p.classList.add("description"),l(t.color)&&(p.style.color=t.color),p.innerHTML=t.description,e.appendChild(p)}}}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){var n=t.page,r=t.storyIndex,i=t.pageIndex,o=t.cid,a=t.storyId,s=t.timeline,c=t.fromPage,l=t.updateTimeline,d=t.playTimeline,u=t.onActionClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=n,this.storyIndex=r,this.pageIndex=i,this.cid=o,this.storyId=a,this.timeline=s,this.fromPage=c,this.updateTimeline=l,this.playTimeline=d,this.onActionClick=u}var t,n,r;return t=e,(n=[{key:"render",value:function(e){var t,n=this,r=this.page,i=this.storyIndex,o=this.pageIndex,a=this.cid,s=this.storyId,c=this.fromPage,d=this.timeline,u=this.updateTimeline,p=this.playTimeline;if(new V({page:r,storyIndex:i,pageIndex:o,cid:a,storyId:s,fromPage:c,timeline:d,updateTimeline:u,playTimeline:p}).render(e),l(r.action)){var f=document.createElement("a");f.classList.add("action"),f.innerHTML=r.action.title,f.href=r.action.url,f.target="_blank",l(r.action.color)&&(f.style.color=r.action.color),l(r.action.backgroundColor)&&(f.style.backgroundColor=r.action.backgroundColor),f.addEventListener("click",(function(){return n.onActionClick()})),e.appendChild(f)}if(null!==(t=r.footer)&&void 0!==t&&t.text){var h=document.createElement("div"),m=document.createElement("p");h.classList.add("footer-container"),m.classList.add("footer-content"),m.innerHTML=r.footer.text,l(r.footer.color)&&(m.style.color=r.footer.color),h.appendChild(m),e.appendChild(h)}}}])&&H(t.prototype,n),r&&H(t,r),e}();function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"render",value:function(e,t){var n=t.timeline,r=t.fromPage,i=t.page,o=t.storyIndex,a=t.pageIndex,s=t.cid,c=t.storyId,d=t.updateTimeline,u=t.playTimeline;if(l(i.videoUrl)){var p=document.createElement("div");p.classList.add("page-video-holder"),new D({page:i,storyIndex:o,pageIndex:a,storyId:c,cid:s,fromPage:r,timeline:n,updateTimeline:d,playTimeline:u},{muteButton:!1}).render(p),e.appendChild(p)}var f=l(i.title),h=l(i.description);if(f||!h){var m=document.createElement("div");if(m.classList.add("page-info"),f){var y=document.createElement("h1");y.classList.add("title"),l(i.color)&&(y.style.color=i.color),y.innerHTML=i.title,m.appendChild(y)}if(h){var g=document.createElement("p");g.classList.add("description"),l(i.color)&&(g.style.color=i.color),g.innerHTML=i.description,m.appendChild(g)}e.appendChild(m)}}}],(n=null)&&W(t.prototype,n),r&&W(t,r),e}();function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t,n){var r=n.fromPage,i=n.playTimeline,o=n.updateTimeline;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeline=t,this.fromPage=r,this.playTimeline=i,this.updateTimeline=o}var t,n,r;return t=e,(n=[{key:"createStoryFragment",value:function(e,t,n){var r=document.createElement("div");r.classList.add("story"),r.style.backgroundColor=e.backgroundColor;var i=document.createElement("div");i.classList.add("js-timeline");for(var o=0;o<e.pages.length;o++){if("pageTextWithVideo"!==e.pages[o].type){var a=this.createPageImage(o,t);0===o&&(a.style.display="block"),r.appendChild(a)}var s=this.createTimelineItem(e);i.appendChild(s)}r.appendChild(i);var c=this.createPageFragment(e.pages[0],{storyIndex:t,storyId:e.id,index:0,cid:n});return r.appendChild(c),r}},{key:"createPageImage",value:function(e,t){var n=document.createElement("div");return n.classList.add("page-image"),n.style.display="none",n.dataset.pageIndex=e,n.dataset.storyIndex=t,n}},{key:"createTimelineItem",value:function(e){var t=document.createElement("div");t.classList.add("timeline-item"),t.style.backgroundColor=u(e.controlColor,.16);var n=document.createElement("div");return n.classList.add("timeline-item-fill"),n.style.backgroundColor=u(e.controlColor),t.appendChild(n),t}},{key:"createPageFragment",value:function(e,t){var n=t.storyIndex,r=t.storyId,i=t.index,o=t.cid,a=t.onActionClick,s=document.createElement("div");return s.classList.add("js-content"),l(e.theme)&&s.classList.add(e.theme),l(e.type)&&s.classList.add(e.type),"pageTextWithVideo"===e.type?U.render(s,{page:e,storyIndex:n,pageIndex:i,cid:o,storyId:r,fromPage:this.fromPage,timeline:this.timeline,updateTimeline:this.updateTimeline,playTimeline:this.playTimeline}):new q({page:e,storyIndex:n,pageIndex:i,cid:o,storyId:r,onActionClick:a,fromPage:this.fromPage,timeline:this.timeline,updateTimeline:this.updateTimeline,playTimeline:this.playTimeline}).render(s),s}},{key:"updatePage",value:function(e,t){var n=t.cid,r=t.pages,i=t.storyId,o=t.storyIndex,a=t.index,s=t.onActionClick;e.removeChild(e.querySelector(".js-content")),e.appendChild(this.createPageFragment(r[a],{storyIndex:o,storyId:i,index:a,cid:n,onActionClick:s}));for(var c=e.querySelectorAll(".page-image"),l=c[a],d=0;d<c.length;d++)c[d].style.display="none";l&&(c[a].style.display="block"),this.playVideoOnCurrentSlideIfExists(e,{cid:n,storyId:i,storyIndex:o,pageIndex:a,doNotDispatchError:!0}),this.pauseVideoOnOtherSlidesIfExists({storyIndex:o,pageIndex:a})}},{key:"updateImage",value:function(e,t){var n=t.sIndex,r=t.pIndex,i=t.src,o=e.querySelector('.page-image[data-story-index="'.concat(n,"\"][data-page-index='").concat(r,"']"));o&&(o.style.backgroundImage="url(".concat(i,")"))}},{key:"getFillBar",value:function(e,t){return e.querySelector(".js-timeline").children[t].children[0]}},{key:"clearLastFillBar",value:function(e){var t=e.querySelector(".js-timeline"),n=t.children.length-1;t.children[n].children[0].style.removeProperty("transform")}},{key:"updateLayout",value:function(e,t,n,r){var i=e.querySelector(".js-story-outer-prev"),o=e.querySelector(".js-story-outer-current"),a=e.querySelector(".js-story-outer-next");v(i,"js-story-outer-prev"),v(o,"js-story-outer-current"),v(a,"js-story-outer-next"),y(e,i),y(e,o),y(e,a),m(e,t),m(e,n),m(e,r),g(t,"js-story-outer-prev"),g(n,"js-story-outer-current"),g(r,"js-story-outer-next")}},{key:"playVideoOnCurrentSlideIfExists",value:function(e,t){var n=this,r=t.cid,i=t.storyId,o=t.storyIndex,a=t.pageIndex,s=t.doNotDispatchError,c=e.querySelector(".page-video[data-page-index='".concat(a,"'][data-story-index='").concat(o,"']"));if(null!=c&&c.paused){var l=c.parentElement,d=l.querySelector(".page-video-loading-indicator"),u=l.querySelector(".page-video-thumbnail"),p=l.querySelector(".page-video-try-to-play");c.play().then((function(){u&&u.classList.add("opacity-hidden"),p&&p.classList.add("opacity-hidden")})).catch((function(){s||D.dispatchVideoError({fromPage:n.fromPage,cid:r,storyId:i,pageIndex:a,storyIndex:o,error:c.error})})).finally((function(){D.clearLoadingTimeout({pageIndex:a,storyIndex:o})})),d&&D.createVideoLoadingTimeout(d,o,a)}}},{key:"pauseVideoOnCurrentSlideIfExists",value:function(e,t){var n=t.storyIndex,r=t.pageIndex,i=e.querySelector(".page-video[data-page-index='".concat(r,"'][data-story-index='").concat(n,"']"));i&&!i.paused&&i.pause()}},{key:"pauseVideoOnOtherSlidesIfExists",value:function(e){var t=e.storyIndex,n=e.pageIndex,r=document.querySelectorAll(".page-video:not([data-story-index='".concat(t,"'][data-page-index='").concat(n,"'])"));r.length&&r.forEach((function(e){e.paused||e.pause()}))}}])&&G(t.prototype,n),r&&G(t,r),e}(),K=function(e,t){var n=t.config,r=t.selectedId,i=t.withStatistics,o=t.categoryId,a=t.locationId,s=t.fromPage;this.content=e,this.config=n,this.state=this._createState(n),this.index=this._getIndexBySelectedId(r),this.pageIndex=0,this.preloadedImages={},this._withStatistics=i,this.categoryId=o,this.locationId=a,this.fromPage=s,this.onItemAddEditOrEditPage=["item_add","item_edit"].includes(s),this.__loaded=!1,this.imageLoadTimeout=1e4,this.onLoad=Function.prototype};K.prototype.preload=function(e){this.onLoad=e,this._preloadStory(this.index-1),this._preloadStory(this.index),this._preloadStory(this.index+1)},K.prototype.decrementStory=function(){this.index--,this.pageIndex=this.state[this.index].lastViewedPage,this._clearLastFillBar(),this.updatePage(),this._preloadStory(this.index-1)},K.prototype.incrementStory=function(){this.index++,this.pageIndex=this.state[this.index].lastViewedPage,this._clearLastFillBar(),this.updatePage(),this._preloadStory(this.index+1)},K.prototype.showPrevPage=function(){this.pageIndex--,this.updatePage(),this.state[this.index].lastViewedPage=this.pageIndex,this._preloadPage(this.index,this.pageIndex-1)},K.prototype.showNextPage=function(){this.pageIndex++,this.updatePage(),this.state[this.index].lastViewedPage=this.pageIndex,this._preloadPage(this.index,this.pageIndex+1)},K.prototype.updatePage=function(){var e=this,t=this.getCurrentStoryFragment(),n=this.config[this.index];this._withStatistics&&(this.onItemAddEditOrEditPage?o["default"].sendEvent(12223,2,{from_page:this.fromPage,cid:this.categoryId,story_id:n.id,stories_number:this.pageIndex+1}):o["default"].sendEvent(4298,3,{story_id:n.id,stories_number:this.pageIndex+1,cid:this.categoryId,lid:this.locationId}));this.content.updatePage(t,{pages:n.pages,index:this.pageIndex,storyIndex:this.index,storyId:this.getCurrentStoryId(),cid:this.categoryId,onActionClick:function(){e._withStatistics&&!e.onItemAddEditOrEditPage&&o["default"].sendEvent(4297,4,{story_id:n.id,stories_title:n.title,story_position:e.index+1,cid:e.categoryId,lid:e.locationId})}})},K.prototype.isLastPage=function(){var e=this.config[this.index];return this.pageIndex===e.pages.length-1},K.prototype.isFirstPage=function(){return 0===this.pageIndex},K.prototype.isLastPage=function(){var e=this.config[this.index];return this.pageIndex===e.pages.length-1},K.prototype.isLastStory=function(){return this.index===this.config.length-1},K.prototype.isFirstStory=function(){return 0===this.index},K.prototype.hasPrev=function(){return!this.isFirstStory()||this.isFirstStory()&&!this.isFirstPage()},K.prototype.hasNext=function(){return!this.isLastStory()||this.isLastStory()&&!this.isLastPage()},K.prototype.getPrevStoryFragment=function(){return this._getStoryFragment(this.index-1)},K.prototype.getCurrentStoryFragment=function(){return this._getStoryFragment(this.index)},K.prototype.getNextStoryFragment=function(){return this._getStoryFragment(this.index+1)},K.prototype.getCurrentFillBar=function(){var e=this.getCurrentStoryFragment();return this.content.getFillBar(e,this.pageIndex)},K.prototype.getCurrentStory=function(){return this.config[this.index]},K.prototype.getCurrentStoryId=function(){return this.getCurrentStory().id},K.prototype.getCurrentPage=function(){return this.getCurrentStory().pages[this.pageIndex]},K.prototype._preloadStory=function(e){var t=this.config[e];l(t)&&(this._preloadPage(e,0),this._preloadPage(e,1))},K.prototype._preloadPage=function(e,t){var n=this.config[e].pages[t];l(n)&&this._preloadAndSetImage(n.imageUrl,e,t)},K.prototype._preloadAndSetImage=function(e,t,n){if(!l(this.preloadedImages[e])){l(n)||(n=0);var r=new Image;r.onload=this._onImageLoaded.bind(this,e,t,n),r.onerror=this._onImageError.bind(this,t,n),r.src=e}},K.prototype._onImageError=function(e,t){var n=this;setTimeout((function(){n._onImageLoaded.call(n,"",e,t)}),this.imageLoadTimeout)},K.prototype._onImageLoaded=function(e,t,n){t===this.index&&n===this.pageIndex&&l(this.onLoad)&&(this.onLoad(),delete this.onLoad);var r=this._getStoryFragment(t);this.content.updateImage(r,{sIndex:t,pIndex:n,src:e})},K.prototype._getIndexBySelectedId=function(e){for(var t=0;t<this.config.length;t++)if(this.config[t].id===e)return t;return 0},K.prototype._getStoryFragment=function(e){if(void 0!==this.state[e])return this.state[e].fragment},K.prototype._createState=function(e){for(var t=[],n=0;n<e.length;n++)t.push({timerId:void 0,lastViewedPage:0,fragment:this.content.createStoryFragment(e[n],n,this.categoryId)});return t},K.prototype._clearLastFillBar=function(){var e=this.getCurrentStoryFragment();this.content.clearLastFillBar(e)},K.prototype.isLoaded=function(){return this.__loaded},K.prototype.setLoaded=function(){this.__loaded=!0};var X={},Q=function e(t,n,r,i,o,a,s){this.timeline=new C(e.PAGE_TIME),this.content=new z(this.timeline,{fromPage:s,playTimeline:this.playTimeline.bind(this),updateTimeline:this.updateTimeline.bind(this)}),this.state=new K(this.content,{config:t,selectedId:r,withStatistics:i,categoryId:o,locationId:a,fromPage:s}),this.container=n,this.animation=void 0,this.state.preload(this.onLoad.bind(this))};Q.PAGE_TIME=1e4,Q.TAP_AREA=.3,Q.prototype.onLoad=function(){this.render(),this.state.updatePage(),this.onViewReady(this.state.getCurrentStoryId()),this.startLineItemTimer(),this.state.setLoaded()},Q.prototype.startPrev=function(e){if(e&&this.timeline.animateToStart(),this.timeline.clear(),this.state.isFirstPage()){if(this.state.isFirstStory())return void this.onClose();this.onPrevStory()}else this.setPrevPage();this.startLineItemTimer()},Q.prototype.startNext=function(e){if(e&&this.timeline.animateToEnd(),this.timeline.clear(),this.state.isLastPage()){if(this.onStoryViewed&&this.onStoryViewed(this.state.getCurrentStoryId(),this.state.index),this.state.isLastStory())return void this.onClose();this.onNextStory()}else this.setNextPage();this.startLineItemTimer()},Q.prototype.swipePrev=function(){this.timeline.clear(),this.swipeToPrevStory()},Q.prototype.swipeNext=function(){this.timeline.clear(),this.swipeToNextStory()},Q.prototype.getSelectedIndex=function(){return this.state.index},Q.prototype.swipeToPrevStory=function(){var e=h(this.container),t=this.state.getCurrentStoryFragment();this.animate(t,0,e,this.onPrevStorySwipeEnd.bind(this)),this.state.decrementStory(),this.currentIndexChanged(),this.startLineItemTimer()},Q.prototype.onPrevStorySwipeEnd=function(){this.render(),this.disposeAnimation()},Q.prototype.swipeToNextStory=function(){var e=h(this.container),t=this.state.getNextStoryFragment();this.animate(t,e,0,this.onNextStorySwipeEnd.bind(this)),this.state.incrementStory(),this.currentIndexChanged(),this.startLineItemTimer()},Q.prototype.onNextStorySwipeEnd=function(){this.render(),this.disposeAnimation()},Q.prototype.setPrevPage=function(){this.state.showPrevPage(),this.currentIndexChanged()},Q.prototype.setNextPage=function(){this.state.showNextPage(),this.currentIndexChanged()},Q.prototype.render=function(){this.content.updateLayout(this.container,this.state.getPrevStoryFragment(),this.state.getCurrentStoryFragment(),this.state.getNextStoryFragment())},Q.prototype.startLineItemTimer=function(){this.animateLineItemTimer(this.startNext.bind(this))},Q.prototype.animateLineItemTimer=function(e){this.timeline.stop();var t=this.state.getCurrentPage(),n=p(this.state.index,this.state.pageIndex),r=X[n];if(!l(t.videoUrl)||r){var i=null!=r?r:Q.PAGE_TIME;this.timeline.create(this.state.getCurrentFillBar(),{time:i,callback:e}),l(t.videoUrl)||this.timeline.play()}},Q.prototype.playTimeline=function(){this.timeline.play()},Q.prototype.hasPrev=function(){return this.state.hasPrev()},Q.prototype.hasNext=function(){return this.state.hasNext()},Q.prototype.animate=function(e,t,n,r){this.animation=new k({element:e,start:t,end:n,time:600,accel:w.easeOutExpo,onEnd:r}),this.animation.play()},Q.prototype.disposeAnimation=function(){l(this.animation)&&(this.animation.pause(),delete this.animation,this.animation=void 0)},Q.prototype.dispose=function(){this.disposeAnimation(),this.timeline.clear()},Q.prototype.pauseAnimation=function(){this.timeline.pause(),this.content.pauseVideoOnCurrentSlideIfExists(this.state.getCurrentStoryFragment(),{storyIndex:this.state.index,pageIndex:this.state.pageIndex})},Q.prototype.playAnimation=function(){this.timeline.play(),this.content.playVideoOnCurrentSlideIfExists(this.state.getCurrentStoryFragment(),{cid:this.state.categoryId,storyId:this.state.getCurrentStoryId(),pageIndex:this.state.pageIndex,storyIndex:this.state.index})},Q.prototype.updateTimeline=function(e){var t=e.time,n=e.pageIndex,r=e.storyIndex,i=p(r,n);X[i]||(X[i]=1e3*t,this.state.isLoaded()&&this.state.index===r&&this.state.pageIndex===n&&(this.timeline.clear(),this.startLineItemTimer()))},Q.prototype.onNextStory=Function.prototype,Q.prototype.onPrevStory=Function.prototype,Q.prototype.onClose=Function.prototype,Q.prototype.onViewReady=Function.prototype,Q.prototype.onStoryViewed=Function.prototype,Q.prototype.currentIndexChanged=Function.prototype;var J=n(93199),Y={overlay:"GuQ30",wrapper:"vMwPS",clickAreaLeftArrow:"bsnJ2",rightClickAreaWrapper:"vUP_A",clickAreaRightArrow:"F8BHy",coverButtonCentering:"kJWYK",coverButton:"C2lvZ",leftButton:"kHOGi",arrow:"wGRSF",clickAreaClose:"FFgCN",close:"YJCy4",previewContainer:"i98_B",preview:"IFmcU",title:"azz5S",image:"YgG9j",loaderContainer:"Bpfmx",loaderCover:"q44j5",loader:"qofhx",rotate:"H9P20",stories:"_lzTg",storiesContainer:"So1XG",swipeContainer:"QFqpK",imageContainer:"eogob",imageContainer_background:"D72vW",previewBlock:"JT1eS",spin:"Vn4Fv"};function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,n)}}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=w.backEaseOut,ae=450,se=25,ce=154,le=10,de=300,ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(l,e);var t,n,r,a=te(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ie(ne(t=a.call(this,e)),"handleStopAnimation",(function(){t.stopAnimation?(t.stopAnimation=!1,t.player.playAnimation()):(t.stopAnimation=!0,t.player.pauseAnimation())})),ie(ne(t),"handleClose",(function(e){e.stopPropagation(),t.props.onClose()})),ie(ne(t),"handleOverlayClick",(function(){t.props.onClose()})),ie(ne(t),"handleStoryClick",(function(e){e.stopPropagation()})),ie(ne(t),"handleRightClick",(function(e){e.stopPropagation(),t.isLocked||t.player.startNext(!0)})),ie(ne(t),"handleLeftClick",(function(e){e.stopPropagation(),t.isLocked||t.player.startPrev(!0)})),ie(ne(t),"handlePreviewClick",(function(e){if(e.stopPropagation(),!t.isLocked){var n=e.currentTarget,r=parseInt(n.dataset.index,10);r<t.selectedIndex?t.swipeRight():r>t.selectedIndex&&t.swipeLeft()}})),ie(ne(t),"handlePreviewMouseEnter",(function(e){if(!t.isLocked){var n,r,i=e.currentTarget,o=parseInt(i.dataset.index,10);o<t.selectedIndex?(n=-50,r=-50+d(le)):o>t.selectedIndex&&(n=50,r=50-d(le)),t.startAnimation({key:"hoverEnter",element:t.previewElements[o],start:n,end:r,time:de})}})),ie(ne(t),"handlePreviewMouseLeave",(function(e){if(!t.isLocked){var n,r,i=e.currentTarget,o=parseInt(i.dataset.index,10);o<t.selectedIndex?(n=t.animations.hoverEnter.coords[0],r=-50):o>t.selectedIndex&&(n=t.animations.hoverEnter.coords[0],r=50),t.startAnimation({key:"hoverLeave",element:t.previewElements[o],start:n,end:r,time:de})}})),ie(ne(t),"handleViewReady",(function(){t.setState({loading:!1}),t.props.withStatistics&&!t.isOnItemAddOrEditPage&&o["default"].sendEvent(4233,3,{story_id:t.props.stories[t.selectedIndex].id,cid:t.props.categoryId,lid:t.props.locationId})})),ie(ne(t),"handlePreviewRef",(function(e){if(e){var n=parseInt(e.dataset.index,10);t.previewElements[n]=e}else delete t.previewElements})),ie(ne(t),"handleCurrentIndexChanged",(function(){t.onSelectedIndexUpdate()})),ie(ne(t),"onSelectedIndexUpdate",(function(){t.selectedIndex=t.player.getSelectedIndex(),t.setState({showLeftArrow:t.player.hasPrev(),showRightArrow:t.player.hasNext()})})),ie(ne(t),"layOutCards",(function(e){e.forEach((function(e,n){n<t.selectedIndex-1?f(e,"translateX(calc(-50vw - ".concat(t.previewWidth,"px))")):n<t.selectedIndex?f(e,"translateX(-50vw)"):n>t.selectedIndex+1?f(e,"translateX(calc(50vw + ".concat(t.previewWidth,"px))")):n>t.selectedIndex&&f(e,"translateX(50vw)")}))})),ie(ne(t),"swipeLeft",(function(){t.isLocked=!0;var e=t.selectedIndex,n=t.previewElements[e+1];if(n){var r=t.previewElements[e],i=r.getBoundingClientRect().left+t.previewWidth+se;t.startAnimation({key:"centralAnimation",start:50,end:0,element:n,collisionOptions:{check:function(){return n.getBoundingClientRect().left<=i},onCollision:function(){t.player.swipeNext();var n=t.previewWidth/2+se;t.startAnimation({key:"previewAnimation",start:0,end:-50,element:r,collisionOptions:{check:function(){return r.getBoundingClientRect().left<=n},onCollision:function(){t.hideLeftCard(e),t.showAfterRightCard(e)}}})}}})}else t.props.onClose()})),ie(ne(t),"swipeRight",(function(){t.isLocked=!0;var e=t.selectedIndex,n=t.previewElements[e-1],r=t.previewElements[e],i=r.getBoundingClientRect().left-t.previewWidth-se;t.startAnimation({key:"centralAnimation",start:-50,end:0,element:n,collisionOptions:{check:function(){return n.getBoundingClientRect().left>=i},onCollision:function(){t.player.swipePrev();var n=h()-(t.previewWidth/2+se)-t.previewWidth;t.startAnimation({key:"previewAnimation",start:0,end:50,element:r,collisionOptions:{check:function(){return r.getBoundingClientRect().left>=n},onCollision:function(){t.hideRightCard(e),t.showAfterLeftCard(e)}}})}}})})),ie(ne(t),"showAfterLeftCard",(function(e){var n=t.previewElements[e-2];n?t.startAnimation({key:"afterLeftCard",element:n,start:-50-d(t.previewWidth),end:-50,onEnd:t.unlock}):t.unlock()})),ie(ne(t),"showAfterRightCard",(function(e){var n=t.previewElements[e+2];n?t.startAnimation({key:"afterRightCard",element:n,start:50+d(t.previewWidth),end:50,onEnd:t.unlock}):t.unlock()})),ie(ne(t),"hideLeftCard",(function(e){var n=t.previewElements[e-1];n?t.startAnimation({key:"leftCard",element:n,start:-50,end:-50-d(t.previewWidth),onEnd:t.unlock}):t.unlock()})),ie(ne(t),"hideRightCard",(function(e){var n=t.previewElements[e+1];n?t.startAnimation({key:"rightCard",element:n,start:50,end:50+d(t.previewWidth),onEnd:t.unlock}):t.unlock()})),ie(ne(t),"startAnimation",(function(e){var n=e.key,r=e.start,i=e.end,o=e.element,a=e.collisionOptions,s=e.time,c=void 0===s?ae:s,l=e.onEnd;return t.animations[n]=new k({start:r,end:i,unitType:"vw",time:c,accel:oe,element:o,collisionOptions:a,onEnd:l}),t.animations[n].play(),t.animations[n]})),ie(ne(t),"keyboardListener",(function(e){27!==e.keyCode?37!==e.keyCode?39===e.keyCode&&t.handleRightClick(e):t.handleLeftClick(e):t.props.onClose()})),ie(ne(t),"disposeAllAnimations",(function(){Object.keys(t.animations).forEach((function(e){var n=t.animations[e];void 0!==n&&(n.pause(),delete t.animations[e])}))})),ie(ne(t),"unlock",(function(){t.isLocked=!1})),t.playerContainer=i().createRef(),t.player=null,t.previewElements=[],t.selectedIndex=0,t.animations={},t.isLocked=!1,t.stopAnimation=!1,t.previewWidth=ce,t.isOnItemAddOrEditPage=["item_add","item_edit"].includes(t.props.fromPage),t.state={showLeftArrow:!0,showRightArrow:!0,loading:!0},t}return t=l,(n=[{key:"componentDidMount",value:function(){this.player={},c&&(this.player=new Q(this.props.stories,this.playerContainer.current,this.props.selectedId,this.props.withStatistics,this.props.categoryId,this.props.locationId,this.props.fromPage),this.player.onNextStory=this.swipeLeft,this.player.onPrevStory=this.swipeRight,this.player.onViewReady=this.handleViewReady,this.player.currentIndexChanged=this.handleCurrentIndexChanged,this.player.onClose=this.props.onClose,this.player.onStoryViewed=this.props.onStoryViewed),this.onSelectedIndexUpdate(),this.layOutCards(this.previewElements,this.selectedIndex),document.addEventListener("keydown",this.keyboardListener,!1),document.addEventListener("visibilitychange",this.handleStopAnimation,!1),document.body.classList.add("no-scroll")}},{key:"componentWillUnmount",value:function(){this.player.dispose(),delete this.player,this.disposeAllAnimations(),document.removeEventListener("keydown",this.keyboardListener,!1),document.removeEventListener("visibilitychange",this.handleStopAnimation,!1),document.body.classList.remove("no-scroll")}},{key:"render",value:function(){var e=this,t=this.props.stories;return i().createElement("div",{"data-marker":"stories-viewer",className:Y.overlay,onClick:this.handleOverlayClick},i().createElement("div",{"data-marker":"stories-viewer/viewport",className:Y.stories},i().createElement("div",{className:Y.wrapper},this.state.showLeftArrow&&i().createElement("div",{className:s()(Y.clickAreaLeftArrow),"data-marker":"button-left",onClick:this.handleLeftClick},i().createElement("div",{className:Y.coverButtonCentering},i().createElement("div",{className:s()(Y.coverButton,Y.leftButton)},i().createElement("button",{className:Y.arrow,type:"button"})))),i().createElement("div",{className:Y.storiesContainer,onClick:this.handleStoryClick},this.state.loading&&i().createElement("div",{"data-marker":"loader",className:Y.loaderContainer},i().createElement("div",{className:Y.loaderCover},i().createElement("div",{className:Y.loader}))),i().createElement("div",{ref:this.playerContainer,className:Y.swipeContainer})),i().createElement("div",{className:Y.rightClickAreaWrapper},this.state.showRightArrow&&i().createElement("div",{className:s()(Y.clickAreaRightArrow),"data-marker":"button-right",onClick:this.handleRightClick},i().createElement("div",{className:Y.coverButtonCentering},i().createElement("div",{className:s()(Y.coverButton,Y.rightButton)},i().createElement("button",{className:Y.arrow,type:"button"})))),i().createElement("div",{className:Y.clickAreaClose,"data-marker":"button-close",onClick:this.handleClose},i().createElement("button",{autoFocus:!0,className:Y.close,type:"button",title:"Закрыть"},"Закрыть"))))),i().createElement("div",{"data-marker":"stories-viewer/block-preview",className:Y.previewContainer},t.map((function(t,n){var r=t.id,o=t.title,a=t.image;return i().createElement("div",{key:r,ref:e.handlePreviewRef,"data-id":r,"data-index":n,className:Y.preview,onMouseEnter:e.handlePreviewMouseEnter,onMouseLeave:e.handlePreviewMouseLeave,onClick:e.handlePreviewClick},i().createElement("div",{className:Y.previewBlock},i().createElement("div",{className:Y.imageContainer},i().createElement("img",{srcSet:(0,J.Qb)(a),src:(0,J.Q4)(a),className:Y.image,alt:"preview"}),i().createElement("div",{className:Y.imageContainer_background})),i().createElement("div",{dangerouslySetInnerHTML:{__html:o},className:Y.title})))}))))}}])&&$(t.prototype,n),r&&$(t,r),l}(r.PureComponent);ie(ue,"defaultProps",{withStatistics:!0});var pe=ue},93199:function(e,t,n){n.d(t,{Q4:function(){return l},Qb:function(){return c},vl:function(){return d}});var r=n(20238);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a="172x172",s="344x344";function c(e){return(0,r.Z)(e)?"".concat(e[s]," 2x,").concat(e[a]):null}function l(e){return(0,r.Z)(e)?e[a]:null}function d(e,t){return e.map((function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return n.viewed=Boolean(t[e.id])||e.viewed,n}))}},12664:function(e,t,n){n.d(t,{h:function(){return C}});var r=n(98565),i=n(9162),o=n(80129),a=n(34841);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y={},g={},v={},b=!1,w=null,I={},x=!1;var P=function(e,t,n){if(t){var r=n?f(e.entries()):Object.entries(e);return[].concat(f(r),f(Object.entries(t))).reduce((function(e,t){var n=p(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}return e},E=function(e){return Number(null==e?void 0:e.split("_")[1])},k=new i.Z({prefix:"".concat(!1||"apps.services.avito-desktop-site",".env.").concat(void 0)}),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.wrapper,s=void 0===i?"":i,l=n.cacheTime,d=void 0===l?3e4:l,p=n.noCache,f=void 0===p?!a.Z:p,h=n.abortable,m=void 0===h||h,C=n.errorSafe,S=void 0===C||C,O=n.handlingRace,_=void 0!==O&&O,L=n.baseUrl,T=void 0===L?"":L,A=n.id,j=void 0===A?T:A;x||a.Z&&window.Headers&&(b=!0,v={Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-Source":"client-browser"},x=!0);var F=null;return u(regeneratorRuntime.mark((function n(){var i,l,p,h,x,C,O,L,A,R,N,B=arguments;return regeneratorRuntime.wrap((function(n){for(;1;)switch(n.prev=n.next){case 0:if(i=B.length>0&&void 0!==B[0]?B[0]:{},T=(l=B.length>1&&void 0!==B[1]?B[1]:{}).baseUrl||T,p=P(v,l.headers,b),h=new r.e(T,p,{onResult:function(e,t){var n=t.status,r=t.time;e&&(null==k||k.timing("match_routes.single-page.api.".concat(e,".request-time.").concat(n),r))}}),x=e,C=e,a.Z&&(m&&F&&(F.abort(),delete y[F.cacheKey],_&&delete I[null===(R=F)||void 0===R?void 0:R.raceKey],F=null),m&&window.AbortController&&(F=h.createAbortController())),"GET"===t&&(N="?".concat("object"==typeof i?(0,o.stringify)(i):i),x+=N,C+=N),"POST"===t&&(O=JSON.stringify(i),C+=O),y[C]&&!f||(A=u(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;1;)switch(n.prev=n.next){case 0:if("GET"!==t||!g[x]){n.next=5;break}r=g[x],delete g[x],n.next=20;break;case 5:n.t0=t,n.next="GET"===n.t0?8:"POST"===n.t0?10:"PATCH"===n.t0?12:"PUT"===n.t0?14:"DELETE"===n.t0?16:18;break;case 8:return r=h.get(x,{id:j}),n.abrupt("break",19);case 10:return r=h.post(x,O,{id:j}),n.abrupt("break",19);case 12:return r=h.patch(x,O,{id:j}),n.abrupt("break",19);case 14:return r=h.put(x,O,{id:j}),n.abrupt("break",19);case 16:return r=h.delete(x,O,{id:j}),n.abrupt("break",19);case 18:return n.abrupt("break",19);case 19:_&&(L="".concat(e,"_").concat(Date.now()),w=L,I[L]=r);case 20:return n.next=22,r;case 22:if(i=n.sent,F=null,!_){n.next=31;break}if(Object.keys(I).forEach((function(e){E(e)<E(L)&&delete I[e]})),void 0!==I[L]){n.next=28;break}return n.abrupt("return",Promise.resolve({skip:!0}));case 28:if(delete I[L],L===w||void 0!==I[w]){n.next=31;break}return n.abrupt("return",Promise.resolve({skip:!0}));case 31:if(200===i.status||S){n.next=33;break}return n.abrupt("return",Promise.resolve({errors:c(c({},i),{},{message:"status: ".concat(i.status,", statusText: ").concat(i.statusText,", url: ").concat(i.url)})}));case 33:if(!s){n.next=35;break}return n.abrupt("return",{[s]:i.data});case 35:return n.abrupt("return",i.data);case 36:case"end":return n.stop()}}),n)})))(),f||(y[C]=A,(F||{}).cacheKey=C),_&&((F||{}).raceKey=L),a.Z&&window.setTimeout((function(){delete y[C]}),d)),!f){n.next=13;break}return n.abrupt("return",A);case 13:return n.prev=13,n.next=16,y[C];case 16:A=n.sent,n.next=26;break;case 19:if(n.prev=19,n.t0=n["catch"](13),console.error(n.t0),delete y[C],S){n.next=25;break}return n.abrupt("return",Promise.reject(n.t0));case 25:return n.abrupt("return",Promise.resolve({errors:n.t0||{message:"unknown error"}}));case 26:return n.abrupt("return",A);case 27:case"end":return n.stop()}}),n,null,[[13,19]])})))}},34841:function(e,t){t.Z="undefined"!=typeof window&&void 0!==window.document},6897:function(e,t,n){n.d(t,{eI:function(){return s},gB:function(){return c}});var r=n(30253),i=n(34841),o="https://3d92850ec0f84fbc862c77efe4a521c2@sntr.avito.ru/2996",a={},s=function(e){var t,n=e.dsn,a=void 0===n?o:n,s=e.packageName,c=e.environment,l=e.release,d=e.isDebug;if(i.Z){var u=new r.BrowserClient({dsn:a,release:l,environment:c||"production"||0,transport:r.makeFetchTransport,stackParser:r.defaultStackParser,integrations:r.defaultIntegrations});t=new r.Hub(u)}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(d&&console.error(e,n),t.withScope((function(r){return r.setTag("package",s),Object.getOwnPropertyNames(n).forEach((function(e){r.setExtra(e,n[e])})),r.setExtra("package",s),t.captureException(e)})))}},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a[e]&&a[e](t,n)};t.ZP=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.packageName,i=t.dsn,o=n.initial||{},c=o.environment,l=o.release;a[r]=s({dsn:i,packageName:r,environment:c,release:l});try{return e(n)}catch(d){throw a[r](d),d}}}},7578:function(e,t,n){n.d(t,{x:function(){return s}});n(84481);var r=n(63694),i=n(48729),o=n(38607),a=n(70917),s=(0,i.M)("Close",o.H)((function(e,t){var n=t.theme,i=t.marker,o=e.onClose,s=(0,r.E)(e,n).Close;return o?(0,a.tZ)(s.component,Object.assign({},s,e,{onClick:o,marker:i()})):null}))},38607:function(e,t,n){n.d(t,{H:function(){return o}});var r=n(70583),i=n(72565),o=r.LW.theme().slot("Close",(function(e){return[{component:i.a,cursor:"pointer",bgHover:"black8",bgActive:"black16",size:"s",p:8,m:-8,rounded:"circle",transition:"150ms cubic-bezier(0.4, 0, 0.2, 1)"},e.if("inverse",{bgHover:"gray76",bgActive:"gray72"})]})).build()},76386:function(e,t,n){n.d(t,{K:function(){return p}});n(84481);var r=n(95637),i=n(7940),o=n(48729),a=n(70917),s=["as","children"];function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=(0,i.J)({display:"flex",mapPropsToStyle:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({valign:e.column?void 0:"top"},e)},cssRewrite:function(e,t,n){var r=t.column,i=t.scroll,o=t.spacing,a=t.spacingCross,s=t.debug,c=n.space;return"\n    ".concat(i?"overflow-".concat(r?"y":"x",": auto;"):"",";\n\n    ").concat(o?"\n      & > *:not(:last-child) { margin-".concat(r?"bottom":"right",": ").concat(c[o]||o,"px; }\n    "):"","\n\n    ").concat(a?"\n      && > * { margin-".concat(r?"right":"bottom",": ").concat(c[a]||a,"px; }\n    "):"","\n\n    ").concat(s?"\n      outline: 1px solid red;\n      & > * {\n        background-color: #A1DFFF;\n      }\n\n      & > :nth-child(2n) {\n        background-color: #ffd173;\n      }\n    ":"","\n\n    ").concat(e,"\n  ")}}),p=(0,o.M)("Stack",{},{memo:!1})((function(e,t){var n=e.as,i=e.children,o=c(e,s),l=t.testId,d=t.tokens,p=u(o,d),f=n||"div";return(0,a.tZ)(f,Object.assign({css:p},(0,r.L)(o),l()),i)}))},49921:function(e,t,n){n.d(t,{m:function(){return a}});n(84481);var r=n(49477),i=n(95111),o=n(70917),a=function(e){var t=e.top,n=e.bottom,a={top:"string"==typeof t?parseInt(t):t,bottom:"string"==typeof n?parseInt(n):n};return(0,o.tZ)(r.f,null,(0,o.tZ)(i.m,a))}},96768:function(e,t,n){n.d(t,{x:function(){return p}});n(84481);var r=n(95637),i=n(7940),o=n(63694),a=n(48729),s=n(84837),c=n(70917),l=["children"];function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=(0,i.J)({display:function(e){return e.width||e.height?"inline-block":"inline"},mapPropsToStyle:!0,cssRewrite:function(e,t,n){var r=t.strike,i=t.underline,o=n.palette,a=n.font;return"\n    margin: 0;\n    font-weight: normal;\n\n    li& {\n      list-style: none;\n    }\n\n    a& {\n      text-decoration: none;\n    }\n\n    &>span {\n      ".concat(r?"\n        position: relative;\n        white-space: nowrap;\n\n        &::after {\n          content: '';\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          border-top: 0.075em solid ".concat("string"==typeof r?o[r]:"currentcolor",";\n          height: calc(50% - 1px);\n          transform: rotateZ(-2deg);\n        }\n      "):"","\n      ").concat(i?"\n        cursor: pointer;\n\n        padding-bottom: ".concat(a.underline.offset,"px;\n        border-bottom: ").concat(a.underline.height,"px ").concat("string"==typeof i?i:"solid"," currentColor;\n      "):"","\n    }\n\n    ").concat(e,"\n  ")}}),p=(0,a.M)("Text",s._)((function(e,t){var n=e.children,i=d(e,l),a=t.theme,s=t.tokens,p=t.testId,f=(0,o.E)(i,a).Text,h=u(i,s,f),m=i.as||"span",y=i.strike||i.underline;return(0,c.tZ)(m,Object.assign({css:h},(0,r.L)(i),p()),y?(0,c.tZ)("span",null,n):n)}))},84837:function(e,t,n){n.d(t,{_:function(){return r}});var r=n(70583).LW.theme().slot("Text",(function(e){return[{lineHeight:"normal",fontSize:function(e){return e.size},color:e.mapped("variant",{primary:"blue500",secondary:"gray52",error:"red500",success:"green500",warning:"yellow500"})},e.if("dense",{lineHeight:"dense"})]})).build()},23234:function(e,t,n){n.d(t,{G:function(){return r}});var r=n(70583).LW.theme().defaultProps({size:"s",variant:"secondary",closeOnClick:!0,spacing:12}).slot("Toast",{bg:function(e){return"error"===e.variant?"red500":"gray84"},color:"white",mx:"auto",width:1,maxWidth:1,rounded:12,spacing:12,valign:"stretch",cursor:"pointer"}).slot("Before",{mt:2,mb:4,borderRadius:4,overflow:"hidden"}).slot("Content",{grow:!0,column:!0,valign:"middle"}).slot("Title",{size:"m",bold:!0,mb:function(e){return e.children?4:0}}).slot("Actions",{maxHeight:60,valign:"middle",spacing:function(e){return e.spacing}}).slot("ActionButton",{size:"s",preset:function(e){return"error"===e.variant?"default":"defaultInverse"}}).slot("Close",{size:16,ml:0,inverse:function(e){return"error"!==e.variant}}).build()},46832:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(84481),i=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;for(var n in e)if(t[n]!==e[n])return!1;for(var r in t)if(!(r in e))return!1;return!0};function o(e,t){var n=(0,r.useRef)(),o=(0,r.useRef)();return i(n.current,t)||(o.current=e()),n.current=t,o.current}},10741:function(e,t,n){n.d(t,{CE:function(){return i},as:function(){return a},ei:function(){return o}});var r=function(e,t){var n={};for(var r in e)t(r)&&(n[r]=e[r]);return n},i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r(e,"object"==typeof n[0]?function(e){return!n[0][e]}:function(e){return!n.includes(e)})},o=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r(e,"object"==typeof n[0]?function(e){return n[0][e]}:function(e){return n.includes(e)})};function a(e){var t={};return e.forEach((function(e){return t[e]=!0})),t}},20238:function(e,t,n){function r(e){return e&&"object"==typeof e&&e.constructor===Object}n.d(t,{Z:function(){return r}})},4375:function(e,t,n){n.d(t,{F:function(){return I}});var r=n(84481),i=n.n(r),o=n(48729),a=n(26157),s=n(96923),c=n(46832),l=n(63694),d=n(55329),u=n(10741),p=n(7578),f=n(76386),h=n(9),m=n(62040),y=n(96768),g=n(23234),v=n(70917),b=(0,o.M)("Toast",g.G)((function(e,t){var n=t.theme,r=t.marker,i=e.children,o=e.actions,m=e.before,g=e.title,b=e.close,w=e.closeOnClick,I=e.onClick,x=e.onClose,P=void 0===x?a.Z:x,E=(0,l.E)(e,n),k=E.Toast,C=E.Before,S=E.Content,O=E.Title,_=E.Actions,L=E.ActionButton,T=E.Close,A=(0,c.r)((function(){return{Button:{defaultProps:L}}}),L);return(0,v.tZ)(f.K,Object.assign({role:"status"},k,(0,u.CE)(e,"title"),{onClick:w?(0,s.V)(P,I):I}),m&&(0,v.tZ)(h.x,C,m),(0,v.tZ)(f.K,S,g&&(0,v.tZ)(y.x,O,g),i),(o||b)&&(0,v.tZ)(f.K,_,o&&(0,v.tZ)(d.N,{theme:A},o),b&&(0,v.tZ)(p.x,Object.assign({},T,{onClose:P,marker:r("close")}))))})).static({show(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().Fragment;return m.O.show((function(r){var i=r.hide;return(0,v.tZ)(n,null,(0,v.tZ)(b,Object.assign({},t,{onClose:i}),e))}),t)}}),w=n(16677),I=(0,o.M)("Toast")((function(e){return(0,v.tZ)(b,e)})).static({show:function(e,t){return b.show(e,t,w.f)}})},77389:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(84481),i=n.n(r),o=n(52007),a=n(12222),s=n(82692),c=n(51831),l=n(45207),d=n(84921),u=n(86478),p=n(14780),f=n(99615),h=n(20894),m=n(37841),y=n(75135),g=n(80994);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(){var e=v((0,r.useState)(null),2),t=e[0],n=e[1],o=(0,r.useCallback)((function(){return n(null)}),[]);(0,h.Z)("item-creator.au-imv-interpretation.show",(function(e){n(e.detail.imvId)}));var s=(0,a.C)(g.b.AutoImvInterpretationDesktop);return i().createElement(y.G,{open:Boolean(t),usePortal:!0,closeOnOverlayClick:!0,size:"l",scrollPosition:"outside",onClose:o},t&&i().createElement(s,{imvId:t,type:"add"}))};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=["newVacancyFields","disablePreview","vasConfigurator","job_item_add_title_and_description_on_separate_screens","secondStepSnippetRedesign"],E=function(e,t){t?window.location.assign("/profile/pro/items"):e.detail.redirect&&window.location.assign(e.detail.redirect)},k=function(e){e.detail.redirect&&window.location.assign(e.detail.redirect)},C=621540,S=function(){var e=(0,o.useLocation)(),t=(0,o.useNavigate)(),n=(0,o.useParams)().itemId,y=Number(n),g=((0,c.$Y)().accountHierarchy||{}).isEmployeeMode,v=void 0!==g&&g,b=I((0,r.useState)(!1),2),x=b[0],S=b[1];(0,h.Z)("item-creator.initial.success",(function(e){S(Boolean(e.detail.showFooter))})),(0,h.Z)("item-creator.load.success",E),(0,h.Z)("item-creator.load.failure",k),(0,h.Z)("item-creator.submit.success",(function(e){return E(e,v)})),(0,h.Z)("item-creator.submit.failure",k);var O,_=new URLSearchParams(e.search),L=_.get("draftId")||_.get("dI")||void 0,T=_.get("fromItemId"),A=_.get("isCopy");_.get("dH")&&(O=_.get("dH"),_.delete("dH"),_.delete("dI"),L&&_.set("draftId",L),t("".concat(e.pathname,"?").concat(_.toString()),{replace:!0}));var j=y?"edit":"add",F="/item-".concat(j,"/load/v2"),R="/item-".concat(j,"/submit/v2"),N=_.toString(),B=(0,r.useMemo)((function(){return v?{load:{requestId:"item_".concat(j,"_load_v2"),url:"/pro/item-".concat(j,"/load/v2"),credentials:"include",requestParams:{itemId:A?void 0:y,fromItemId:A?y||Number(T):void 0}},submit:{requestId:"item_".concat(j,"_submit_v2"),url:"/pro/item-".concat(j,"/submit/v2"),credentials:"include",requestParams:"add"===j?{publishAfterCreation:1}:void 0}}:{load:{requestId:"item_".concat(j,"_load_v2"),url:"".concat(F,"?").concat(N),requestParams:{itemId:y||void 0,draftHash:O,fromItemId:Number(T)}},submit:{requestId:"item_".concat(j,"_submit_v2"),url:"".concat(R).concat(e.search)}}}),[j,F,N,y,O,T,R,A,v,e.search]),M=function(e,t){return t.reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),{})}((0,p.x6)(),P),D=(0,f.b)(["avito_ny_logo_enabled","cnc","courier","dbs","dbsOwnCourier","disable_video_uploading","enable_realty_mandatory_verification","is_native_video_delivery_condition_enabled","item_creator_suggest_enabled","postamat","pvz","realty_cpa_ddu_file_required","realty_cpa_landing_entry_points_enabled","returnPolicy","enable_realty_verification_ltr","enable_realty_verification_cre","skip_activation_presence_package_percent","skip_activation_presence_package_users","enable_legal_owner_verification"]),Z=(0,a.C)(m.M.ItemCreator);return i().createElement(i().Fragment,null,i().createElement(s.ZP,{locationId:C}),i().createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1,margin:"0 auto",padding:"0 85px",width:"964px"}},i().createElement("div",{style:{padding:"18px 0 12px"}},i().createElement(l.T,{newYear:Boolean(D.avito_ny_logo_enabled),href:"/",title:"Авито — сайт объявлений",marker:"header/logo",onClick:function(){d["default"].sendEvent(2844,0,{pagetype:"item_edit_spa"})}})),i().createElement(Z,{draftId:L,experiments:M,routes:B,toggles:D,isEmployeeMode:v,noHeader:!0})),i().createElement("div",{style:{opacity:x?"1":"0",transition:"opacity 200ms ease-out"}},i().createElement(u.Z,{minified:!0})),i().createElement(w,null))}}}]);