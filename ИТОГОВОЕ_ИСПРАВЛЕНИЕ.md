# üîß –ò—Ç–æ–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏:

1. **CORS –æ—à–∏–±–∫–∏** - –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã
2. **404 –æ—à–∏–±–∫–∏ API** - API –º–∞—Ä—à—Ä—É—Ç—ã –Ω–µ –±—ã–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
3. **CSRF —Ç–æ–∫–µ–Ω** - —Ç—Ä–µ–±–æ–≤–∞–ª—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL** - –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω—ã API –º–∞—Ä—à—Ä—É—Ç—ã
**–§–∞–π–ª:** `bootstrap/app.php`
```php
->withRouting(
    web: __DIR__.'/../routes/web.php',
    api: __DIR__.'/../routes/api.php',  // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
    commands: __DIR__.'/../routes/console.php',
    health: '/up',
)
```

### 2. –°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS
**–§–∞–π–ª:** `config/cors.php`
- –†–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

### 3. –ò—Å–∫–ª—é—á–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –∏–∑ CSRF
**–§–∞–π–ª:** `app/Http/Middleware/VerifyCsrfToken.php`
```php
protected $except = [
    'masters/*/upload/photos/test',
    'api/*',
];
```

### 4. –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç
**–§–∞–π–ª:** `routes/web.php`
```php
POST /masters/{master}/upload/photos/test
```

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
**–§–∞–π–ª:** `routes/web.php`
```php
'photos' => collect($photos)->map(function ($photo) {
    // ...
})
```

### 6. –û–±–Ω–æ–≤–ª–µ–Ω HTML —Ñ–∞–π–ª
**–§–∞–π–ª:** `upload_master_photos.html`
- –£–±—Ä–∞–Ω CSRF —Ç–æ–∫–µ–Ω
- –ü–æ–ª–Ω—ã–µ URL –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üöÄ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```
http://127.0.0.1:8000/upload_master_photos.html
```

### –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç:
```
http://127.0.0.1:8000/test_upload.html
```

### API endpoints:
- `GET /api/masters/{id}/photos` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö
- `POST /masters/{id}/upload/photos/test` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   php artisan serve
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:**
   ```
   http://127.0.0.1:8000/test_upload.html
   ```

3. **–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏**

4. **–ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏"**

5. **–ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

## üìä –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```json
{
  "success": true,
  "message": "–ó–∞–≥—Ä—É–∂–µ–Ω–æ 2 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π",
  "photos": [
    {
      "id": 25,
      "filename": "photo_1752575623.jpg",
      "original_url": "http://127.0.0.1:8000/masters/anna-1/photo/photo_1752575623.jpg",
      "medium_url": "http://127.0.0.1:8000/masters/anna-1/photo/medium_photo_1752575623.jpg",
      "thumb_url": "http://127.0.0.1:8000/masters/anna-1/photo/thumb_photo_1752575623.jpg",
      "is_main": false,
      "sort_order": 1
    }
  ]
}
```

## üéØ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:

1. **API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö:**
   ```
   http://127.0.0.1:8000/api/masters/3/photos
   ```

2. **–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
   ```
   http://127.0.0.1:8000/test_upload.html
   ```

3. **–û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   ```
   http://127.0.0.1:8000/upload_master_photos.html
   ```

## ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ API –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ CORS –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ CSRF
- ‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –°–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ 