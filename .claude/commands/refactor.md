Refactor the code in $ARGUMENTS following:

- SOLID principles
- Project patterns (FSD/DDD)
- Add TypeScript types
- Improve performance
- Keep backward compatibility