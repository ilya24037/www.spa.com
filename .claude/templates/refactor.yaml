name: smart-refactor
description: Рефакторинг компонентов Vue/Laravel с сохранением функциональности
prompt: |
  Выполни рефакторинг кода следуя принципам:
  
  1. АНАЛИЗ (сначала прочитай и пойми):
     - Определи текущую структуру и зависимости
     - Найди все места использования
     - Определи критический функционал
  
  2. ПОДГОТОВКА:
     - Создай тесты для текущего функционала (если их нет)
     - Создай TypeScript интерфейсы для всех данных
     - Определи что можно вынести в composables
  
  3. РЕФАКТОРИНГ ПО ШАГАМ:
     ✅ Извлечь методы длиннее 10 строк
     ✅ Применить SOLID принципы
     ✅ Улучшить именование переменных и методов
     ✅ Добавить error boundaries и try/catch
     ✅ Оптимизировать производительность (memo, lazy loading)
     ✅ Добавить JSDoc/PHPDoc комментарии
  
  4. ПРОВЕРКИ:
     - Все тесты проходят
     - TypeScript ошибок нет
     - Обратная совместимость сохранена
     - Производительность не ухудшилась
  
  КРИТИЧЕСКИ ВАЖНО:
  - Сохранить 100% обратную совместимость
  - Не ломать существующие API
  - Все изменения должны быть обратимы
  
  Специфика проекта SPA Platform:
  - Frontend: Vue 3 Composition API, TypeScript, FSD
  - Backend: Laravel DDD, сервисный слой
  - Обязательны skeleton loaders и error states