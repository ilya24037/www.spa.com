"use strict";(self.webpackChunkDetached_search=self.webpackChunkDetached_search||[]).push([["search-desktop-tap-tags"],{56035:(t,e,r)=>{r.a(t,async(t,n)=>{try{var c=r("79a44"),o=r("ce27b"),h=r.n(o),l=r("0e79c"),m=r("0af63"),v=r("9ef22"),d=r("abb9e"),f=r.n(d),y=r("e1b25"),T=r("a917b"),w=r("4668f"),x=t([l]);l=(x.then?(await x)():x)[0];var k={SPACING:8,HEIGHT:32};e.Z=f().extend({name:"SearchTapTags",components:{AtomDSTagButton:l.AtomDsTagButton},mixins:[T.Dg,m.DefaultAtomActionsMixin,T.VD,T.sU],data:()=>({items:null,payload:{query:"",link:""}}),mounted(){this.createSearchBarSubscribe(),this.addIntersectionObserver(this.$refs.container,t=>{t?this.createSearchBarSubscribe():this.closeConnection()})},computed:{containerStyles(){var{maxRows:t=3}=this.widgetState||{};return{"max-height":`${t*k.HEIGHT+(t-1)*k.SPACING}px`,gap:`${k.SPACING}px`}}},methods:{createSearchBarSubscribe(){this.searchSubscriptions&&this.searchSubscriptions.length||this.createPayloadSubscribe()},createPayloadSubscribe(){this.onSearchCrossEvent(T.Td.SearchContext,({context:t})=>{if(t&&void 0!==t.query){var{link,query:e}=t;this.payload.link===link&&this.payload.query===e||(this.payload={link,query:e},this.getSearchTapTags())}})},async getSearchTapTags(){this.promise&&this.promise.cancel();try{this.promise=c.registry.use(v.F).getSearchTapTags(Object.assign(Object.assign({},this.payload),{},{widgetVersion:2}));var t=await this.promise;this.items=t&&t.items||[]}catch(t){this.items=[],this.$logger.warning({message:"Unable to get searchTapTags",exception:t,zone:"search"})}this.promise=null},handleClick(t,e){if(!this.promise){var r=h()(t,"common.action")||{},n=h()(t,"common.trackingInfo")||{};if(r.behavior===m.AtomActionBehaviour.Custom){var{params:c={}}=r,{text="",overrideText:o}=c,l="true"!==o?(0,y.r1)(this.payload.query,text):text;this.SearchRxStore.dispatch(T.Td.TapTagsText,{text:l}),n.click&&this.trackerSend(n.click)}else this.onAtomAction(r,n,e)}},onInViewport(t){var e=h()(t,"common.trackingInfo.view");e&&this.trackerSend(e)},getDataAttributes(t){return Object.assign(Object.assign({},this.focus.attributes),{},{[w.KO.OVERRIDE]:`${"true"===h()(t,"common.action.params.overrideText")}`,[w.KO.TEXT]:(h()(t,"common.action.params.text")||"").trimRight()})}}}),n()}catch(t){n(t)}})},f1c1a:(t,e,r)=>{r.a(t,async(t,n)=>{try{r.r(e);var c=r("736f6"),o=r("4c7ae"),h=r("36cad"),l=r("695d8"),m=r.n(l),v=t([o]);function d(t){this.$style=h.Z.locals||h.Z}o=(v.then?(await v)():v)[0];var component=m()(o.Z,c.s,c.x,!1,d,null,null);e.default=component.exports,n()}catch(f){n(f)}})},"36cad":(t,e,r)=>{r.d(e,{Z:()=>n});var n={container:"su1_31",tag:"s1u_31"}},"4c7ae":(t,e,r)=>{r.a(t,async(t,n)=>{try{var c=r("56035"),o=t([c]);c=(o.then?(await o)():o)[0],e.Z=c.Z,n()}catch(t){n(t)}})},"736f6":(t,e,r)=>{r.d(e,{s:()=>n,x:()=>c});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"searchTapTags",expression:"'searchTapTags'",arg:"id"}],ref:"container"},[t.items&&t.items.length?r("div",{class:t.$style.container,style:t.containerStyles},t._l(t.items,function(e,i){return r("div",t._b({directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:{callback:function(){return t.onInViewport(e)},subscriptionRenewal:!0},expression:"{ callback: () => onInViewport(item), subscriptionRenewal: true }"}],key:i,class:t.$style.tag,on:{mouseenter:t.focus.set,mouseleave:t.focus.remove}},"div",t.getDataAttributes(e),!1),[r("AtomDSTagButton",t._b({on:{click:function(r){return t.handleClick(e,r)}}},"AtomDSTagButton",e,!1))],1)}),0):t._e()])},c=[]}}]);