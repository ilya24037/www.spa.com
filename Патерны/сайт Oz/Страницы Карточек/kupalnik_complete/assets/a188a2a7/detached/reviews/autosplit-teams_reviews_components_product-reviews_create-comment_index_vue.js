"use strict";(self.webpackChunkDetached_reviews=self.webpackChunkDetached_reviews||[]).push([["autosplit-teams_reviews_components_product-reviews_create-comment_index_vue"],{"04752":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("d86db"),c=r.n(o),m=r("b1649"),d=r.n(m),l=r("69aed"),h=r("7ab6c"),v=r("7cd3b"),y=r("3ea25"),f=r("d3072"),w=r("d3b92"),x=r("39f57"),T=r("84194"),z=r("8d3bc"),k=r("68103"),_=r("f3278"),C=t([h,v,y,x,z]);[h,v,y,x,z]=C.then?(await C)():C;var E=r.n(z),A={review:{entityReview:"отзыв",entityComment:"комментарий",entityQuestion:"вопрос",entityAnswer:"ответ"},createComment:{successMessage:"Спасибо! Комментарий отправлен на проверку и скоро будет опубликован",errorMessage:"Произошла ошибка при создании комментария, попробуйте снова.",startText:"Ответ на",commentTextArea:"Текст комментария",rulesText:"Перед отправкой комментария, пожалуйста, ознакомьтесь с",rulesLinkText:"правилами публикации"}};e.Z={name:"ReviewCreateComment",components:{ComposerLink:E(),DsButton:v.DsButton,OzTextarea:h.OzTextarea,Avatar:x.Z,Notification:y.Z},mixins:[_.Z],inject:{getLocalization:{default:()=>{}}},props:{entityType:c().oneOf([f.e.REVIEW,f.e.COMMENT]).def(f.e.REVIEW),answerAuthorName:c().string.isRequired,rootParentUuid:c().string.def(""),parentUuid:c().string.def(""),author:T.Pm,isCreating:c().bool.def(!1),hasError:c().bool.def(!1),hasCreated:c().bool.def(!1),isPageTypePdp:c().bool.def(!1),itemId:c().oneOfType([c().integer,c().string])},data(){return{comment:"",TEXTAREA_MAX_LENGTH:w.kX,RULES_LINK:"https://docs.ozon.ru/common/pravila-prodayoi-i-rekvizity/pravila-publikatsii-otzyvov",authorInfo:(0,k.Au)({author:this.author,isUserEntity:!1}),closeButtonText:this.$i18n.t("system@cancel"),submitButtonText:this.$i18n.t("system@send")}},computed:{localization(){return this.getLocalization()||A},entityTypeText(){var{startText:t}=this.localization.createComment;return this.entityType===f.e.COMMENT?`${t} ${this.localization.review.entityComment}`:`${t} ${this.localization.review.entityReview}`},notificationError(){return{type:"error",text:this.localization.createComment.errorMessage}},notificationSuccess(){return{type:"success",text:this.localization.createComment.successMessage}}},watch:{hasCreated(t){t&&(this.comment="")}},mounted(){var t=this.isMobile||!this.isPageTypePdp?.3*window.innerHeight:.35*window.innerHeight+80;(0,l.scrollTo)(this.$el,0,{offsetTop:t}),this.$refs.commentTextarea&&this.$refs.commentTextarea.$refs.inputEl.focus()},methods:{onSubmit(){this.isCreating||d()(this.comment)&&this.$emit("create",{comment:this.comment,rootParentUuid:this.rootParentUuid,parentUUID:this.parentUuid,itemId:this.itemId})},handleEnter(t){(t.metaKey||t.ctrlKey)&&this.onSubmit()}}},n()}catch(t){n(t)}})},e27ef:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("7ecbc"),c=r("3b98d"),m=r("c1a87"),d=r("695d8"),l=r.n(d),h=t([c]);function v(t){this.$style=m.Z.locals||m.Z}c=(h.then?(await h)():h)[0];var component=l()(c.Z,o.s,o.x,!1,v,null,null);e.Z=component.exports,n()}catch(y){n(y)}})},"3b98d":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("04752"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},"7ecbc":(t,e,r)=>{r.d(e,{s:()=>n,x:()=>o});var n=function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return n("div",{class:[e.$style.createComment,(t={},t[e.$style.mobile]=e.isMobile,t)]},[e.hasCreated?e._e():[n("div",{class:e.$style.infoWrapper},[n("Avatar",{class:e.$style.avatar,attrs:{character:e.authorInfo.name[0],url:e.authorInfo.imageUrl,size:e.isMobile?"s":"m"}}),e._v(" "),n("div",{class:e.$style.info},[n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"review-comment-type-text",expression:"'review-comment-type-text'",arg:"id"}],class:e.$style.answer},[e._v("\n          "+e._s(e.entityTypeText)+"\n        ")]),e._v(" "),n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"review-answer-author-name",expression:"'review-answer-author-name'",arg:"id"}],class:e.$style.author},[e._v("\n          "+e._s(e.answerAuthorName)+"\n        ")])])],1),e._v(" "),n("form",{directives:[{name:"qa",rawName:"v-qa:id",value:"create-comment-form",expression:"'create-comment-form'",arg:"id"}],class:e.$style.form,attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("OzTextarea",{ref:"commentTextarea",class:e.$style.textarea,attrs:{"max-height":"100px",placeholder:e.localization.createComment.commentTextArea,"auto-height-by-rows":"","max-length":e.TEXTAREA_MAX_LENGTH,"has-error":e.hasError},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter.apply(null,arguments)}},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),e._v(" "),n("div",{class:e.$style.rules},[n("span",[e._v(e._s(e.localization.createComment.rulesText)+" ")]),e._v(" "),n("ComposerLink",{attrs:{href:e.RULES_LINK,target:"_blank"}},[e._v(e._s(e.localization.createComment.rulesLinkText))])],1),e._v(" "),n("div",{class:e.$style.buttons},[n("DsButton",{class:e.$style.button,attrs:{title:e.closeButtonText,theme:"actionSecondary",size:"400","test-info":{automatizationId:"close-comment-review"}},on:{click:function(t){return e.$emit("close")}}}),e._v(" "),n("DsButton",{class:e.$style.button,attrs:{title:e.submitButtonText,size:"400",loading:e.isCreating,"test-info":{automatizationId:"send-comment-review"}}})],1)],1)],e._v(" "),e.hasError||e.hasCreated?n("Notification",{class:e.$style.notification,attrs:{notification:e.hasError?e.notificationError:e.notificationSuccess,"test-info":{automatizationId:e.hasError?"create-comment-error":"create-comment-success"}}}):e._e()],2)},o=[]}}]);