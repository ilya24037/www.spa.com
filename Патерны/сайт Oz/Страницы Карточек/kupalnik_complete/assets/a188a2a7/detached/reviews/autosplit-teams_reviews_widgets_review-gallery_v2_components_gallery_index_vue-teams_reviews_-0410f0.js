"use strict";(self.webpackChunkDetached_reviews=self.webpackChunkDetached_reviews||[]).push([["autosplit-teams_reviews_widgets_review-gallery_v2_components_gallery_index_vue-teams_reviews_-0410f0"],{d2d11:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d86db"),l=r.n(n),c=r("227f1"),d=e([c]);c=(d.then?(await d)():d)[0];t.Z={name:"BackgroundCover",components:{DsImage:c.DsImage},props:{urlCover:l().string.def(""),isVideo:l().bool.def(!1),isMobile:l().bool.def(!1)},getStyles:(e,{isVideo:t,isMobile:r})=>[e.backgroundWrapper,{[e.themeVideo]:t,[e.desktop]:!r}]},o()}catch(e){o(e)}})},c6879:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d86db"),l=r.n(n),c=r("2fe37"),d=e([c]);c=(d.then?(await d)():d)[0];var h={reviewGallery:{badgeRatingTitle:"Отзыв"}};t.Z={name:"BadgeRating",components:{DsRatingShowing:c.DsRatingShowing},inject:{getLocalization:{default:()=>{}}},props:{rating:l().number.def(0),isSimple:l().bool.def(!1),isMobile:l().bool.def(!1)},getLocalizationText:(e,t)=>(t.getLocalization()||h).reviewGallery[e]},o()}catch(e){o(e)}})},b3053:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d86db"),l=r.n(n),c=r("41f20"),d=r.n(c),h=r("11d1a"),v=r("8581f"),m=r("09896"),w=r("14217"),y=e([h,v]);[h,v]=y.then?(await y)():y;var{ArrowIcon:f}=((D={}).ArrowIcon={functional:!0,name:"icMDisclosureUp",meta:{width:24,height:24,viewBox:"0 0 24 24"},render:(e,a)=>e("svg",Object.assign(Object.assign({},a.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},a.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M4.293 15.707a1 1 0 0 0 1.414 0L12 9.414l6.293 6.293a1 1 0 0 0 1.414-1.414l-7-7a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 0 1.414"/>'}}))},D),M={reviewGallery:{firstTitle:"Фото и видео пользователей",secondTitle:"Другие фото и видео пользователей",subTitle:"фото и видео"}};t.Z={name:"Gallery",components:{MediaGallery:h.Z,DsLoader:v.DsLoader,ArrowIcon:f},inject:{getLocalization:{default:()=>{}}},props:{listMedia:l().arrayOf(l().shape(Object.assign({},h.Z.props)).loose).def([]),total:l().number.def(0),loading:l().bool.def(!1),paramSeoMode:l().bool.def(!1),isMobile:l().bool.def(!1),widgetName:l().string.def("")},data:()=>({arrowDownUuid:"",currentMedia:null}),computed:{listMediaPart(){return d()(this.listMedia,350)},localization(){return this.getLocalization()||M}},methods:{getDetectViewportSettings(e){var t=this.listMedia.length-6;return{once:!0,track:(t>-1?this.listMedia[t].uuid:0)===e,callback:this.onEndGallery}},onEndGallery(){this.$emit("loadMore")},changeActiveIndex(e){var t=this.listMedia.findIndex(t=>t.uuid===e);this.arrowDownUuid=e,this.getActiveMedia(),this.$emit("changeActiveIndex",t),this.listMedia[t].type===w.w_.VIDEO&&this.$emit("changeVideoIndex")},scrollMedia(){this.arrowDownUuid&&this.currentMedia?(this.currentMedia.scrollIntoView({behavior:"smooth"}),this.arrowDownUuid=""):this.$emit("scrollToUp")},onMouseOver(e){this.arrowDownUuid&&this.currentMedia&&((e.target.offsetParent&&e.target.offsetParent.offsetTop)>=this.currentMedia.offsetTop&&(this.arrowDownUuid=""))},getActiveMedia(){var e=this.$refs.listWrapper;e&&(this.currentMedia=e.querySelector(`[data-media-uuid="${this.arrowDownUuid}"]`))},getStyles(e){return(0,m.Y)(e,this.listMedia,this.paramSeoMode&&this.isMobile)}}},o()}catch(e){o(e)}var D})},"53d27":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d86db"),l=r.n(n),c=r("4ad74"),d=r("227f1"),h=r("8581f"),v=r("b0fa2"),m=r("caacc"),w=r("5c2af"),y=r("14217"),f=e([c,d,h,v,m,w]);[c,d,h,v,m,w]=f.then?(await f)():f;var{EyeOpenIcon:M}=((D={}).EyeOpenIcon={functional:!0,name:"icSEyeOpen",meta:{width:16,height:16,viewBox:"0 0 16 16"},render:(e,t)=>e("svg",Object.assign(Object.assign({},t.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M8 9a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-3 1a3 3 0 1 1 6 0 3 3 0 0 1-6 0"/><path fill="currentColor" d="M5.155 6.723c-.806.504-1.57 1.344-2.26 2.724a1 1 0 0 1-1.79-.894c.81-1.62 1.796-2.78 2.99-3.526C5.292 4.279 6.613 4 8 4s2.708.279 3.905 1.027c1.194.746 2.18 1.906 2.99 3.526a1 1 0 1 1-1.79.894c-.69-1.38-1.454-2.22-2.26-2.724C10.042 6.221 9.113 6 8 6s-2.042.221-2.845.723"/>'}}))},D);t.Z={name:"DesktopMediaCarousel",components:{DsImage:d.DsImage,DsBadge:c.DsBadge,DsLoader:h.DsLoader,BadgeRating:m.Z,BackgroundCover:w.Z,SingleReviewDetails:v.Z,VideoFull:()=>Promise.all([r._e("video-player-component-video-player"),r.e("rp-all-gallery-video-player")]).then(r.bind(r,"bc1d0"))},inject:{isAccessibilityMode:{default:!1}},props:{previewUrl:l().string.def(""),rating:l().number.def(0),type:l().oneOf(Object.values(y.w_)).def(y.w_.IMG),url:l().string.def(""),viewCount:l().string.def(""),alt:l().string.def(""),isMobile:l().bool.def(!1),size:l().shape({width:l().number.def(0),height:l().number.def(0)}).loose.def({}),details:l().object,styleHeight:l().object,isMediaVertical:l().bool.def(!1),cellTrackingInfo:l().shape({videoRewind:l().object.def({}),videoView:l().object.def({}),videoViewFinish:l().object.def({}),view:l().object.def({})}).loose,widgetName:l().string.def(""),externalMeta:l().object.def({})},data:()=>({MEDIA_TYPES:y.w_,EyeOpenIcon:M,loadImg:!1,isVideoObjectFitCover:!1,showBottomBar:!1,showLoading:!1}),watch:{url(e){e&&this.type===y.w_.IMG&&(this.loadImg=!1,setTimeout(()=>{this.showLoading=!0},y.IJ))},isMediaVertical(){this.getVideoOrientation()}},mounted(){setTimeout(()=>{this.showLoading=!0},y.IJ),this.getVideoOrientation()},methods:{onLoadImg(){this.loadImg=!0,this.showLoading=!1},getVideoOrientation(){if(this.isMobile&&this.type===y.w_.VIDEO){var e=this.size.width/this.size.height;this.isVideoObjectFitCover=!!this.isMediaVertical&&e<.6625}},onVideoTap(){this.$emit("videoTap"),this.showBottomBar=!this.showBottomBar},onAction(e){this.$emit("onAction",{action:e})}}},o()}catch(e){o(e)}var D})},"32c3f":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d86db"),l=r.n(n),c=r("bcc5e"),d=r("4ad74"),h=r("7cd3b"),v=r("227f1"),m=r("c7b40"),w=r.n(m),y=r("caacc"),f=r("14217"),M=e([c,d,h,v,y]);[c,d,h,v,y]=M.then?(await M)():M;var D={reviewGallery:{fullScreenButton:"Открыть полностью"}};t.Z={name:"MediaGallery",components:{DsImage:v.DsImage,BadgeRating:y.Z,OzTransition:c.OzTransition,DsBadge:d.DsBadge,DsButton:h.DsButton,VideoLite:()=>Promise.all([r._e("video-player-component-video-player"),r.e("rp-all-gallery-video-player")]).then(r.bind(r,"bc1d0"))},inject:{getLocalization:{default:()=>{}}},props:{id:l().oneOfType([l().string,{validator:e=>void 0===e},{validator:e=>null===e}]).def(0),uuid:l().string.def(""),previewUrl:l().string.def(""),rating:l().number.def(0),type:l().oneOf(Object.values(f.w_)).def(f.w_.IMG),url:l().string.def(""),shortVideoPreview:l().string.def(""),alt:l().string.def(""),videoDuration:l().string.def(""),widgetName:l().string.def("")},data:()=>({isMediaHovered:!1,isEndCover:!1,MEDIA_TYPES:f.w_,mounted:!1,videoIdentifier:void 0}),computed:{externalMetaVideoLite(){return this.videoIdentifier?{mediaPlayerInit:{videoIdentifier:this.videoIdentifier}}:{}},localization(){return this.getLocalization()||D}},mounted(){var e=this.$refs.mediaGallery;e&&(this.observer=new IntersectionObserver(e=>{this.mounted=!!e[0].isIntersecting},{threshold:.1}),this.observer.observe(e))},beforeDestroy(){this.observer&&this.observer.disconnect()},methods:{onMouseOver(){this.type===f.w_.VIDEO&&(this.videoIdentifier=w()(),window.dispatchEvent(new CustomEvent("reviewsHoverTile",{detail:{videoIdentifier:this.videoIdentifier,timestamp:performance.now()}}))),this.isMediaHovered=!0},onMouseOut(){this.isMediaHovered=!1,this.isEndCover=!1},onEndVideo(){this.isEndCover=!0}}},o()}catch(e){o(e)}})},"5c2af":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("dbb9b"),l=r("0f6e3"),c=r("1a2a2"),d=r("695d8"),h=r.n(d),v=e([l]);function m(e){this.$style=c.Z.locals||c.Z}l=(v.then?(await v)():v)[0];var component=h()(l.Z,n.s,n.x,!0,m,null,null);t.Z=component.exports,o()}catch(w){o(w)}})},caacc:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("4c7d1"),l=r("835bf"),c=r("b66ed"),d=r("695d8"),h=r.n(d),v=e([l]);function m(e){this.$style=c.Z.locals||c.Z}l=(v.then?(await v)():v)[0];var component=h()(l.Z,n.s,n.x,!0,m,null,null);t.Z=component.exports,o()}catch(w){o(w)}})},"7e0fc":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("638d1"),l=r("b9d90"),c=r("46d21"),d=r("695d8"),h=r.n(d),v=e([l]);function m(e){this.$style=c.Z.locals||c.Z}l=(v.then?(await v)():v)[0];var component=h()(l.Z,n.s,n.x,!1,m,null,null);t.Z=component.exports,o()}catch(w){o(w)}})},e227b:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("49f9a"),l=r("ace8b"),c=r("b626e"),d=r("695d8"),h=r.n(d),v=e([l]);function m(e){this.$style=c.Z.locals||c.Z}l=(v.then?(await v)():v)[0];var component=h()(l.Z,n.s,n.x,!1,m,null,null);t.Z=component.exports,o()}catch(w){o(w)}})},"11d1a":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d0ef0"),l=r("0bd3f"),c=r("936ce"),d=r("695d8"),h=r.n(d),v=e([l]);function m(e){this.$style=c.Z.locals||c.Z}l=(v.then?(await v)():v)[0];var component=h()(l.Z,n.s,n.x,!1,m,null,null);t.Z=component.exports,o()}catch(w){o(w)}})},"0f6e3":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("d2d11"),l=e([n]);n=(l.then?(await l)():l)[0],t.Z=n.Z,o()}catch(e){o(e)}})},"835bf":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("c6879"),l=e([n]);n=(l.then?(await l)():l)[0],t.Z=n.Z,o()}catch(e){o(e)}})},b9d90:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("b3053"),l=e([n]);n=(l.then?(await l)():l)[0],t.Z=n.Z,o()}catch(e){o(e)}})},ace8b:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("53d27"),l=e([n]);n=(l.then?(await l)():l)[0],t.Z=n.Z,o()}catch(e){o(e)}})},"0bd3f":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("32c3f"),l=e([n]);n=(l.then?(await l)():l)[0],t.Z=n.Z,o()}catch(e){o(e)}})},dbb9b:(e,t,r)=>{r.d(t,{s:()=>o,x:()=>n});var o=function(e,t){var r=t._c;return r("div",{class:t.$options.getStyles(t.$style,t.props)},[r(t.$options.components.DsImage,{tag:"component",class:t.$style.backgroundImg,attrs:{"use-cdn":"",size:40,src:t.props.urlCover,lazy:!1}})],1)},n=[]},"4c7d1":(e,t,r)=>{r.d(t,{s:()=>o,x:()=>n});var o=function(e,t){var r,o=t._c;return o("div",{class:[t.$style.badgeRating,t.data.class,(r={},r[t.$style.mobile]=t.props.isMobile,r)]},[t.props.isSimple?t._e():o("span",{class:t.$style.title},[t._v(t._s(t.$options.getLocalizationText("badgeRatingTitle",t.injections)))]),t._v(" "),o(t.$options.components.DsRatingShowing,{tag:"component",attrs:{size:t.props.isMobile?"200":"300",value:t.props.rating}})],1)},n=[]},"638d1":(e,t,r)=>{r.d(t,{s:()=>o,x:()=>n});var o=function(){var e,t=this,r=t.$createElement,o=t._self._c||r;return o("div",{class:t.$style.listMedia},[o("h1",{class:t.$style.title},[t._v("\n    "+t._s(t.paramSeoMode?t.localization.reviewGallery.firstTitle:t.localization.reviewGallery.secondTitle)+"\n    "),o("span",{class:t.$style.subTitle},[t._v(t._s(t.total)+" "+t._s(t.paramSeoMode?"":t.localization.reviewGallery.subTitle))])]),t._v(" "),o("div",{ref:"listWrapper",on:{mouseover:t.onMouseOver}},[t._l(t.listMediaPart,function(e,i){var r;return[o("div",{key:i,class:[t.$style.listWrapper,(r={},r[t.$style.modeMobile]=t.paramSeoMode&&t.isMobile,r)]},t._l(e,function(e,r){return o("MediaGallery",t._b({directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:t.getDetectViewportSettings(e.uuid),expression:"getDetectViewportSettings(media.uuid)"}],key:r,style:t.getStyles(r),attrs:{"data-media-uuid":e.uuid,"widget-name":t.widgetName},nativeOn:{click:function(r){return t.changeActiveIndex(e.uuid)}}},"MediaGallery",e,!1))}),1)]}),t._v(" "),!t.paramSeoMode&&t.listMedia.length>5?o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"gallery-arrow-button",expression:"'gallery-arrow-button'",arg:"id"}],class:[t.$style.arrow,(e={},e[t.$style.down]=t.arrowDownUuid,e)],on:{click:function(e){return t.scrollMedia()}}},[o("ArrowIcon")],1):t._e()],2),t._v(" "),t.loading?o("DsLoader",{class:t.$style.loader,attrs:{size:500}}):t._e()],1)},n=[]},"49f9a":(e,t,r)=>{r.d(t,{s:()=>o,x:()=>n});var o=function(){var e,t,r,o=this,n=o.$createElement,l=o._self._c||n;return l("div",{class:[o.$style.mediaWrapper,(e={},e[o.$style.mobile]=o.isMobile,e)],style:o.styleHeight},[o.isMobile?o._e():l("div",{class:o.$style.badgeWrapper},[l("BadgeRating",{class:o.$style.badge,attrs:{rating:o.rating}}),o._v(" "),o.type===o.MEDIA_TYPES.VIDEO&&o.viewCount?l("DsBadge",{attrs:{label:o.viewCount,"left-graphic":o.EyeOpenIcon,"background-color":"clearDarkKey600","label-color":"textLightKey","left-graphic-color":"textLightKey",theme:"custom"}}):o._e()],1),o._v(" "),!o.isMobile&&o.details&&o.details.actions&&o.details.actions.length?l("SingleReviewDetails",o._b({class:[o.$style.details,(t={},t[o.$style.detailsWithVideo]=o.type===o.MEDIA_TYPES.VIDEO,t)],attrs:{type:"ICON_BUTTON"},on:{onAction:o.onAction}},"SingleReviewDetails",o.details,!1)):o._e(),o._v(" "),o.type===o.MEDIA_TYPES.IMG?[l("BackgroundCover",{attrs:{"url-cover":o.url,"is-mobile":o.isMobile}}),o._v(" "),l("DsImage",{class:[o.$style.media,(r={},r[o.$style.modAlly]=o.isAccessibilityMode,r)],attrs:{"use-cdn":"",size:o.isMobile?600:800,src:o.url,lazy:!1,alt:o.alt},on:{load:o.onLoadImg}}),o._v(" "),!o.loadImg&&o.showLoading?l("DsLoader",{class:o.$style.loader,attrs:{color:"white",size:500}}):o._e()]:o._e(),o._v(" "),o.type===o.MEDIA_TYPES.VIDEO?l("VideoFull",{attrs:{url:o.url,"preview-url":o.previewUrl,"is-mobile":o.isMobile,"is-video-object-fit-cover":o.isVideoObjectFitCover,"cell-tracking-info":o.cellTrackingInfo,"show-bottom-bar":!o.isMobile||o.showBottomBar,"widget-name":o.widgetName,"external-meta":o.externalMeta},on:{videoTap:o.onVideoTap,sendAnalytics:o.$listeners.sendAnalytics}}):o._e()],2)},n=[]},d0ef0:(e,t,r)=>{r.d(t,{s:()=>o,x:()=>n});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"mediaGallery",class:e.$style.mediaGallery},[r("OzTransition",{attrs:{speed:"slow"}},[e.mounted?r("div",{class:e.$style.mediaWrapper,on:{mouseover:e.onMouseOver,mouseout:e.onMouseOut}},[r("OzTransition",[e.isMediaHovered?r("BadgeRating",{class:e.$style.badge,attrs:{rating:e.rating,"is-simple":""}}):e._e()],1),e._v(" "),r("DsImage",{class:e.$style.img,attrs:{"use-cdn":"",lazy:"",size:300,src:e.type===e.MEDIA_TYPES.VIDEO?e.previewUrl:e.url,alt:e.alt}}),e._v(" "),e.type===e.MEDIA_TYPES.VIDEO&&e.isMediaHovered?r("VideoLite",{attrs:{url:e.shortVideoPreview,"show-bottom-bar":!1,"widget-name":e.widgetName,"external-meta":e.externalMetaVideoLite,"is-lite":""},on:{ended:e.onEndVideo}}):e._e(),e._v(" "),e.type===e.MEDIA_TYPES.VIDEO?[e.videoDuration?r("DsBadge",{class:e.$style.badgeDuration,attrs:{label:e.videoDuration,theme:"custom","background-color":"clearDarkKey600","label-color":"textLightKey"}}):e._e(),e._v(" "),e.isEndCover?r("div",{class:e.$style.coverVideo},[r("DsButton",{attrs:{title:e.localization.reviewGallery.fullScreenButton,theme:"actionSecondary"}})],1):e._e()]:e._e()],2):e._e()])],1)},n=[]}}]);