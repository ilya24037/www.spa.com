"use strict";(self.webpackChunkDetached_navi=self.webpackChunkDetached_navi||[]).push([["autosplit-teams_navi_components_favorite-tile-button-v2_index_vue"],{37949:(t,e,n)=>{n.a(t,async(t,o)=>{try{var r=n("eb583"),c=n("ac556"),l=n("0af63"),d=n("79a44"),h=n("5462a"),f=n("a8449"),v=n("69aed"),m=n("86e62"),y=n("0e79c"),C=n("d0725"),A=n.n(C),B=n("30ce1"),k=t([r,c,f,y,B]);[r,c,f,y,B]=k.then?(await k)():k;var{ServiceWorkerMixin:S}=(x={},I={methods:{cacheCartPageSW(){var t=this.$composerStore.state._get("experimentsConfig.enableSWCaching",!1),e=this.$composerStore.state._get("experimentsConfig.prerenderCartPageSW",!1),n=this.$composerStore.state._get("layoutTrackingInfo.pageType");"cart"!==n&&"checkout"!==n&&t&&e&&(0,v.sendMessageToSW)({action:"CACHE_CART_PAGE"})},cacheHomePageSW(){var t=this.$composerStore.state._get("experimentsConfig.enableSWCaching",!1),e=this.$composerStore.state._get("experimentsConfig.prerenderHomePageSW",!1);t&&e&&(0,v.sendMessageToSW)({action:"CACHE_HOME_PAGE"})}}},x.ServiceWorkerMixin=I,x),T=function(t){return t.addToFavorites="addToFavorites",t.removeFromFavorites="removeFromFavorites",t.addToFavoritesClassified="addToFavoritesClassified",t.removeFromFavoritesClassified="removeFromFavoritesClassified",t}(T||{}),_=function(t){return t.unfavorite="unfavorite",t.favorite="favorite",t}(_||{});e.Z={name:"FavoriteTileButtonV2",components:{AtomButton:c.AtomSmallButton,TileIconButton:B.Z,DsTooltip:r.DsTooltip,DsButtonAtom:y.AtomDsButton},mixins:[l.DefaultActionsMixin,A(),S],inject:{isMobile:{default:!1}},props:{id:{type:String,default:""},isFav:{type:Boolean,default:!1},favLink:{type:String,default:""},unfavLink:{type:String,default:""},size:{type:String,default:"m"},trackingInfo:{type:Object,default:()=>({})},testInfo:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},data:()=>({isInFavorites:!1,tooltipContent:{},timer:null,editableTrackingInfo:null}),computed:{action(){return{behavior:l.AtomActionBehaviour.ComposerAction,link:this.isInFavorites?this.getUnfavLink:this.getFavLink,id:this.isInFavorites?T.removeFromFavorites:T.addToFavorites,params:{sku:this.id}}},getFavLink(){return this.favLink.length?this.favLink:"favoriteBatchAddItems"},getUnfavLink(){return this.unfavLink.length?this.unfavLink:"favoriteBatchDeleteItems"},icon(){return this.isInFavorites?"ic_m_multicolor_heart_filled":"ic_m_multicolor_heart"},automatizationId(){var t=this.isInFavorites?"unFavoriteButton":"favoriteButton",e=this.testInfo[t];return e&&e.automatizationId||""}},created(){this.isInFavorites=this.isFav,this.editableTrackingInfo=this.trackingInfo,this.favEventsSubscription=d.registry.use(f.FavoritesEvents).$favEventsById(this.id).subscribe({next:t=>{this.isInFavorites="add"===t.payload.type}})},beforeDestroy(){this.favEventsSubscription&&this.favEventsSubscription.unsubscribe(),clearTimeout(this.timer)},methods:{onBeforeAtomAction(t){if([T.addToFavorites,T.removeFromFavorites,T.addToFavoritesClassified,T.removeFromFavoritesClassified].includes(t.id)){(0,v.sendMessageToSW)({action:"CLEAR_SW_CACHE",cacheNames:[m.ECacheNames.CART,m.ECacheNames.HOME_PAGE]});var e=t.params.sku||t.params.skus;return Object.assign(Object.assign({},t),{},{version:this.trackingInfo?"":2,params:{skus:e.split(",").map(parseInt)}})}},onAfterAtomAction({action:t,res:e}){var n=t.id===T.addToFavorites||t.id===T.addToFavoritesClassified,{notification:o,oldNotification:r}=e||{};if(o)if(o.notificationBar)this.$registry.use(h.NotificationsActions).createNewNotification(Object.assign({},o.notificationBar));else if(this.isMobile)d.registry.use(h.NotificationsActions).createNewNotificationAtomDeprecated(Object.assign({},o));else{var{favoriteAddTooltip:c}=o;c&&(this.tooltipContent=c,this.$refs.popover.show(),c.seconds&&this.closeOnTimer(c.seconds))}r&&(r.button&&r.button.link&&(r.button.action=()=>this.composerRouter.redirect(r.button.link)),d.registry.use(h.NotificationsActions).createNewNotificationDeprecated(Object.assign({},r))),[T.addToFavorites,T.removeFromFavorites,T.addToFavoritesClassified,T.removeFromFavoritesClassified].includes(t.id)&&(d.registry.use(f.FavoritesActions).dispatchHandleFavoriteLocal(this.id.toString(),n?"add":"remove",!0,!1),this.editableTrackingInfo&&this.editableTrackingInfo.click&&(this.editableTrackingInfo.click.actionType=n?_.unfavorite:_.favorite),this.$emit("update",n),this.cacheCartPageSW(),this.cacheHomePageSW())},closeTooltip(){this.$refs.popover.hide()},closeOnTimer(t){this.timer=setTimeout(()=>{this.closeTooltip()},1e3*t)}}},o()}catch(t){o(t)}var x,I})},31192:(t,e,n)=>{n.a(t,async(t,o)=>{try{var r=n("2b62e"),c=n.n(r),l=n("227f1"),d=n("ac556"),h=n("e2f5a"),f=n.n(h),v=t([l,d]);[l,d]=v.then?(await v)():v;e.Z={name:"TileIconButton",functional:!0,props:Object.assign(Object.assign({},d.ButtonAtomMixin.props),{},{icon:{type:String,default:""}}),render(t,e){var{props:n,$style:o,data}=e,{icon:r,testInfo:h,qaId:v}=n,m=f().methods.asyncIconComponent(r),y=h.automatizationId||v;return t("button",c()([{},{directives:[{name:"qa",value:{id:y}}]},{class:[data.class,o.iconButton]},{on:{click:t=>(0,d.onClick)(t,e)}}]),[m?t(m):t(l.DsImage,{attrs:{src:r,maxWidth:24,maxHeight:24,size:75,disableSrcSet:!0,isSquare:!0,useCdn:!0}})])}},o()}catch(t){o(t)}})},99155:(t,e,n)=>{n.a(t,async(t,o)=>{try{var r=n("f7172"),c=n("d0ebe"),l=n("9992f"),d=n("695d8"),h=n.n(d),f=t([c]);function v(t){this.$style=l.Z.locals||l.Z}c=(f.then?(await f)():f)[0];var component=h()(c.Z,r.s,r.x,!1,v,null,null);e.Z=component.exports,o()}catch(m){o(m)}})},"30ce1":(t,e,n)=>{n.a(t,async(t,o)=>{try{var r=n("5d3c1"),c=n("fa3f6"),l=n("695d8"),d=n.n(l),h=t([r]);function f(t){this.$style=c.Z.locals||c.Z}r=(h.then?(await h)():h)[0];var component=d()(r.Z,undefined,undefined,!1,f,null,null);e.Z=component.exports,o()}catch(v){o(v)}})},d0ebe:(t,e,n)=>{n.a(t,async(t,o)=>{try{var r=n("37949"),c=t([r]);r=(c.then?(await c)():c)[0],e.Z=r.Z,o()}catch(t){o(t)}})},"5d3c1":(t,e,n)=>{n.a(t,async(t,o)=>{try{var r=n("31192"),c=t([r]);r=(c.then?(await c)():c)[0],e.Z=r.Z,o()}catch(t){o(t)}})},f7172:(t,e,n)=>{n.d(e,{s:()=>o,x:()=>r});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DsTooltip",{directives:[{name:"qa",rawName:"v-qa:id",value:t.automatizationId,expression:"automatizationId",arg:"id"}],ref:"popover",attrs:{trigger:"manual","min-width":"196px","max-width":"196px"},on:{clickOutside:t.closeTooltip},scopedSlots:t._u([{key:"popover",fn:function(){return[n("div",{class:[t.$style.tooltip]},[t.tooltipContent.title?n("div",{class:["tsBodyControl400Small",t.$style.tooltipTitle]},[t._v("\n        "+t._s(t.tooltipContent.title)+"\n      ")]):t._e(),t._v(" "),t.tooltipContent.subTitle?n("div",{directives:[{name:"html-deprecated",rawName:"v-html-deprecated",value:t.tooltipContent.subTitle,expression:"tooltipContent.subTitle"}],class:["tsBody400Small",t.$style.tooltipSubtitle]}):t._e(),t._v(" "),n("div",{class:[t.$style.tooltipButtonWrapper]},[t.tooltipContent.button&&!t.tooltipContent.submitButton?n("AtomButton",t._b({attrs:{fill:!0,size:t.size},on:{click:t.onAtomAction}},"AtomButton",t.tooltipContent.button,!1)):t._e(),t._v(" "),t.tooltipContent.submitButton?n("DsButtonAtom",t._b({attrs:{fill:!0},on:{click:t.onAtomAction}},"DsButtonAtom",t.tooltipContent.submitButton,!1)):t._e()],1)])]},proxy:!0}])},[t._v(" "),n("TileIconButton",t._b({on:{click:function(e){return t.onAtomAction(t.action,t.editableTrackingInfo,e)}}},"TileIconButton",{action:t.action,trackingInfo:t.trackingInfo,icon:t.icon},!1))],1)},r=[]}}]);