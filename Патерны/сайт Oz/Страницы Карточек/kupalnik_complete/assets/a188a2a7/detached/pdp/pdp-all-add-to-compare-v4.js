"use strict";(self.webpackChunkDetached_pdp=self.webpackChunkDetached_pdp||[]).push([["pdp-all-add-to-compare-v4"],{81339:(t,e,n)=>{n.a(t,async(t,c)=>{try{var o=n("16477"),r=n("79a44"),d=n("5462a"),h=n("f8e15"),l=n("abb9e"),v=n.n(l),m=n("b359e"),y=n("d1e95"),w=n("5ac29"),f=n("66a7b"),x=t([h]);h=(x.then?(await x)():x)[0],e.Z=v().extend({name:"WidgetAddToCompare",mixins:[y.Z,m.Z],components:{PdpActionButton:h.Z},data(){return{loading:!1,visibilitySettings:{once:!0,callback:this.whenView}}},mounted(){this.compareSubscription=r.registry.use(f.d).listen("UPDATE_STATE",()=>{this.updateState()})},beforeDestroy(){this.compareSubscription&&this.compareSubscription.unsubscribe()},methods:{whenView(){this.sendAnalytics(o.EActionTypes.VIEW_ACTION)},async onClick(){if(this.sendAnalytics(o.EActionTypes.CLICK_ACTION,"button"),!this.loading&&!this.widgetState.isInCompare){this.loading=!0;try{await this.fetchAsyncState({action:this.widgetState.addAction,data:this.widgetState.actionData}),this.sendAnalytics(o.EActionTypes.COMPARE_ACTION),await r.registry.use(d.NotificationsActions).createNewNotificationDeprecated(this.widgetState.notification.response),r.registry.use(f.d).emit("UPDATE_STATE")}catch(t){this.$logger.error({message:w.C.ERROR_ADD_TO_COMPARE,exception:t}),await r.registry.use(d.NotificationsActions).createNewNotificationDeprecated(this.widgetState.notification.error)}finally{this.loading=!1}}},async updateState(){this.loading=!0;try{await this.fetchAsyncState()}catch(t){this.$logger.error({exception:t,message:w.C.ERROR_LOAD_STATE_ADD_TO_COMPARE})}this.loading=!1}}}),c()}catch(t){c(t)}})},"2988c":(t,e,n)=>{n.d(e,{A:()=>c});var c=function(t){return t.INLINE="inline",t.BUTTON="button",t}({})},"66a7b":(t,e,n)=>{n.d(e,{d:()=>o});var c=n("69aed");class o extends c.EventBus{}o.__serviceName="EventBus_CompareBus"},bd1b8:(t,e,n)=>{n.a(t,async(t,c)=>{try{n.r(e);var o=n("7eb6f"),r=n("934ce"),d=n("695d8"),h=n.n(d),l=t([r]);r=(l.then?(await l)():l)[0];var component=h()(r.Z,o.s,o.x,!1,null,null,null);e.default=component.exports,c()}catch(t){c(t)}})},d224e:(t,e,n)=>{n.d(e,{Z:()=>c});var c={actionButton:"xi5_27",inline:"x5i_27"}},"934ce":(t,e,n)=>{n.a(t,async(t,c)=>{try{var o=n("81339"),r=t([o]);o=(r.then?(await r)():r)[0],e.Z=o.Z,c()}catch(t){c(t)}})},"7eb6f":(t,e,n)=>{n.d(e,{s:()=>c,x:()=>o});var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showWidget?n("PdpActionButton",t._b({directives:[{name:"qa",rawName:"v-qa:id",value:"pdp-compare-button",expression:"'pdp-compare-button'",arg:"id"},{name:"detect-viewport",rawName:"v-detect-viewport",value:t.visibilitySettings,expression:"visibilitySettings"}],attrs:{loading:t.loading},on:{click:t.onClick}},"PdpActionButton",t.widgetState.button,!1)):t._e()},o=[]}}]);