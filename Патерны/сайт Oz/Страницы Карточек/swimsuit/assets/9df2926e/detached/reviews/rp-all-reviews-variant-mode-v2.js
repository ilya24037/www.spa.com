"use strict";(self.webpackChunkDetached_reviews=self.webpackChunkDetached_reviews||[]).push([["rp-all-reviews-variant-mode-v2"],{"79c71":(t,e,n)=>{n.a(t,async(t,r)=>{try{var c=n("ce27b"),l=n.n(c),o=n("227f1"),v=n("d86db"),h=n.n(v),d=n("f3278"),m=t([o]);o=(m.then?(await m)():m)[0];var{ArrowIcon:w}=((y={}).ArrowIcon={functional:!0,name:"icSChevronRight",meta:{width:16,height:16,viewBox:"0 0 16 16"},render:(t,e)=>t("svg",Object.assign(Object.assign({},e.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},e.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M6.293 3.293a1 1 0 0 0 0 1.414L9.586 8l-3.293 3.293a1 1 0 1 0 1.414 1.414l4-4a1 1 0 0 0 0-1.414l-4-4a1 1 0 0 0-1.414 0"/>'}}))},y);e.Z={name:"ReviewsCurrentVariant",components:{DsImage:o.DsImage,ArrowIcon:w},mixins:[d.Z],props:{variant:h().shape({coverImage:h().string.def(""),name:h().string.def(""),link:h().string.def(""),aspects:h().arrayOf(h().shape({name:h().string.def(""),value:h().string.def("")}).loose).def([])}),localization:h().object.def({})},computed:{aspectsValues(){return l()(this,"variant.aspects",[]).map(t=>`${t.name}: ${t.value}`).join("; ")}},methods:{onClick(){this.$composerRouter.push(this.variant.link,{contextOptions:{closeButtonPosition:this.isMobile?"inside":"outside",theme:this.isMobile?"bottom":"empty"}})}}},r()}catch(t){r(t)}var y})},c8c31:(t,e,n)=>{n.a(t,async(t,r)=>{try{var c=n("ce27b"),l=n.n(c),o=n("16477"),v=n("79a44"),h=n("28ebb"),d=n("8581f"),m=n("69aed"),w=n("abb9e"),y=n.n(w),f=n("7fce6"),A=n.n(f),C=n("afb1a"),x=n("225da"),_=t([h,d,C]);[h,d,C]=_.then?(await _)():_;var{ReviewsActions:I}=((t,e)=>{var n=((e=class extends m.AbstractActionsService{}).__serviceName="AbstractActionsService_ReviewsActions",e);return t.ReviewsActions=n,t})({});e.Z=y().extend({name:"reviewsVariantMode",components:{OzTabs:h.OzTabs,DsLoader:d.DsLoader,CurrentVariant:C.Z},data(){return{isLoading:!1,isFirstSendAnalytics:!0,visibilitySettings:{once:!0,callback:this.sendAnalytics}}},mixins:[A()],mounted(){this.reviewsSubscription=v.registry.use(I).listen(["CHANGE_SORTING_REVIEWS","CHANGE_REVIEW_VARIANT_MODE"],t=>{var e=l()(t.payload,"widgetListUpdate");if(!(!e||e.find(t=>t===this.componentName)))return!1;var n=l()(t.payload,"url",t.payload);this.fetchState(n)})},beforeDestroy(){this.reviewsSubscription&&this.reviewsSubscription.unsubscribe()},computed:{tabActive(){var t=this.widgetState.tabs.find(t=>t.active);return l()(t,"value")||null},localization(){return l()(this.widgetState,"constants",{currentVariant:{variantChangeButtonText:"Изменить вариант товара"}})}},methods:{async onChange(t){if(!this.isLoading&&t!==this.tabActive)try{this.isLoading=!0,await Promise.all([this.fetchState(t),v.registry.use(I).emit("CHANGE_REVIEW_VARIANT_TAB",{url:t,widgetListUpdate:this.widgetState.reloadOnChange})]),this.isFirstSendAnalytics&&(this.sendAnalytics(),this.isFirstSendAnalytics=!1),this.$composerRouter.push(t,{silent:!0})}finally{this.isLoading=!1}},async fetchState(t){await this.fetchAsyncState({},t)},sendAnalytics(){var t=l()(this.tabActive,"analyticCell")||null;this.sendTokenAnalytics(o.EActionTypes.VIEW_ACTION,t)},sendTokenAnalytics:x.A}}),r()}catch(t){r(t)}})},afb1a:(t,e,n)=>{n.a(t,async(t,r)=>{try{var c=n("ca90b"),l=n("ca5f9"),o=n("12062"),v=n("695d8"),h=n.n(v),d=t([l]);function m(t){this.$style=o.Z.locals||o.Z}l=(d.then?(await d)():d)[0];var component=h()(l.Z,c.s,c.x,!1,m,null,null);e.Z=component.exports,r()}catch(w){r(w)}})},a385d:(t,e,n)=>{n.a(t,async(t,r)=>{try{n.r(e);var c=n("5bf3e"),l=n("86608"),o=n("695d8"),v=n.n(o),h=t([l]);l=(h.then?(await h)():h)[0];var component=v()(l.Z,c.s,c.x,!1,null,null,null);e.default=component.exports,r()}catch(t){r(t)}})},12062:(t,e,n)=>{n.d(e,{Z:()=>r});var r={variantWrapper:"x1q_30",variantImgWrapper:"qx2_30",variantAspectsValues:"q2x_30",variantTitle:"xq2_30",variantChangeButton:"x2q_30",mobile:"qx3_30"}},ca5f9:(t,e,n)=>{n.a(t,async(t,r)=>{try{var c=n("79c71"),l=t([c]);c=(l.then?(await l)():l)[0],e.Z=c.Z,r()}catch(t){r(t)}})},86608:(t,e,n)=>{n.a(t,async(t,r)=>{try{var c=n("c8c31"),l=t([c]);c=(l.then?(await l)():l)[0],e.Z=c.Z,r()}catch(t){r(t)}})},ca90b:(t,e,n)=>{n.d(e,{s:()=>r,x:()=>c});var r=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:[e.$style.variantWrapper,(t={},t[e.$style.mobile]=e.isMobile,t)]},[r("div",{class:e.$style.variantImgWrapper},[e.variant.coverImage?r("DsImage",{attrs:{src:e.variant.coverImage,size:"120","use-cdn":""}}):e._e()],1),e._v(" "),r("div",[r("div",{class:[e.$style.variantTitle,e.isMobile?"tsCompact400Small":"tsHeadline500Medium"]},[e._v(e._s(e.variant.name))]),e._v(" "),r("div",{class:[e.$style.variantAspectsValues,e.isMobile?"tsCompact400Small":"tsCompact500Medium"]},[e._v(e._s(e.aspectsValues))]),e._v(" "),e.variant.link?r("div",{class:[e.$style.variantChangeButton,e.isMobile?"tsCompact400Small":"tsCompact500Medium"],on:{click:e.onClick}},[e._v(e._s(e.localization.currentVariant.variantChangeButtonText)+"\n      "),r("ArrowIcon")],1):e._e()])])},c=[]},"5bf3e":(t,e,n)=>{n.d(e,{s:()=>r,x:()=>c});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showWidget&&t.widgetState.tabs.length?n("div",{directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:t.visibilitySettings,expression:"visibilitySettings"}]},[n("OzTabs",{attrs:{theme:"accent",tabs:t.widgetState.tabs,value:t.tabActive,loading:t.isLoading,fill:t.isMobile,"background-color":"--bgSecondary"},on:{change:t.onChange}}),t._v(" "),t.widgetState.currentVariant?n("CurrentVariant",{attrs:{localization:t.localization,variant:t.widgetState.currentVariant}}):t._e()],1):t._e()},c=[]}}]);