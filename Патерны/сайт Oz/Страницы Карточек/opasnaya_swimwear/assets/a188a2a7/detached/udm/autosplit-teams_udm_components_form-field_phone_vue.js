"use strict";(self.webpackChunkDetached_udm=self.webpackChunkDetached_udm||[]).push([["autosplit-teams_udm_components_form-field_phone_vue"],{a4579:(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("8487a"),h=r.n(n),d=r("d23db"),c=r("823b9"),l=r("79a44"),m=r("69aed"),v=e([d,c]);[d,c]=v.then?(await v)():v;var{FormatPhoneNumberActions:y,DEFAULT_PHONE_VALUE:f,DEFAULT_PHONE_MASK:k}=((e,t,r)=>{var o=e=>e?(e.match(/\d+/g)||[]).join(""):"",n=((t=class extends m.AbstractApiService{constructor(...e){super(...e),this.serviceName="action",this.servicePath="composer-api.bx/_action"}formatPhoneNumber(e){return this.fetch({method:"post",path:"formatPhoneNumber"},e)}}).__serviceName="AbstractApiService_FormatPhoneNumberService",t),h=((r=class extends m.AbstractActionsService{constructor(...e){super(...e),this.requestsMap=new WeakMap}async fetch(e,t,r=!0){try{var h=this.container.resolve("SingletonRegistry").use(n).formatPhoneNumber(Object.assign({phone:o(t)},r?{}:{allowCityPhones:!0}));this.requestsMap.set(e,h);var{phone:d,mask,valid:c,errorMessage:l=""}=await h;return{phone:d,mask,valid:c,errorMessage:l}}catch(e){return this.container.resolve("Logger").error({exception:e}),{phone:t,mask:void 0,valid:!0,errorMessage:""}}finally{this.requestsMap.delete(e)}}checkRequest(e){var t=this.requestsMap.get(e);t&&t.cancel()}}).__serviceName="AbstractActionsService_FormatPhoneNumberActions",r);return e.FormatPhoneNumberActions=h,e.DEFAULT_PHONE_VALUE="+7",e.DEFAULT_PHONE_MASK="+# ### ### ## ##",e})({});t.Z={name:"FormFieldPhone",components:{OzInput:d.OzInput,OzField:c.OzField},props:{field:{type:Object,default:()=>({})},qaId:{type:String,default:""},disabled:{type:Boolean,default:!1},maxLength:{type:String,default:"20"},size:{type:String,default:"xl"},errorMessage:{type:String,default:""},testInfo:{type:Object,default:()=>({})},isRequired:{type:Boolean,default:!0}},data:()=>({isCtrlAction:!1,message:"",mask:k}),computed:{errorText(){if(!this.phoneRequest)return this.field&&this.field.errorText||this.errorMessage||this.message}},watch:{errorText:{handler(){this.$emit("sendHeight")}}},methods:{onFocus(e){this.message="",""===this.field.value&&this.$emit("phoneChanged",{value:f,id:this.field.id,valid:!0}),this.$emit("clearError"),this.$emit("focus",e)},onBlur(e){this.$emit("blur",e)},onKeydown(e){var{key:t}=e;return this.isCtrlAction&&["c","v","z","с","м","я"].some(e=>e===t)?(this.isCtrlAction=!1,void this.$emit("keydown",e)):(this.isCtrlAction=!1,["Meta","Control"].some(e=>e===t)?(this.isCtrlAction=!0,void this.$emit("keydown",e)):void(["Tab","Backspace","Enter","ArrowLeft","ArrowRight"].some(e=>e===t)||t>="0"&&t<="9"?this.$emit("keydown",e):(e.preventDefault(),e.stopPropagation())))},onKeyup(e){var{key:t}=e;this.isCtrlAction&&["Meta","Control"].some(e=>e===t)&&(this.isCtrlAction=!1,e.preventDefault(),e.stopPropagation()),this.$emit("keyup",e)},async fetchFormatPhoneNumber(e){var{phone:t,mask="",valid:r,errorMessage:o=""}=await l.registry.use(y).fetch(this,e),n=!this.isRequired||r;this.message=this.isRequired?o:"",this.$emit("phoneChanged",{value:t,valid:n,id:this.field.id,mask})},onInputDebounced:h()(function(e){this.fetchFormatPhoneNumber(e)},300),onInput(e){l.registry.use(y).checkRequest(this),this.$emit("phoneChanged",{value:e,id:this.field.id,valid:!0}),this.onInputDebounced(e)},onPaste(e){var t=e.clipboardData.getData("text");this.$emit("phoneChanged",{value:t,id:this.field.id,mask:"",valid:!0}),this.$emit("paste",e),this.fetchFormatPhoneNumber(t),e.preventDefault()}}},o()}catch(e){o(e)}})},"48d45":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("e0b3e"),h=r("0a0c2"),d=r("646ba"),c=r("695d8"),l=r.n(c),m=e([h]);function v(e){this.$style=d.Z.locals||d.Z}h=(m.then?(await m)():m)[0];var component=l()(h.Z,n.s,n.x,!1,v,null,null);t.Z=component.exports,o()}catch(y){o(y)}})},"0a0c2":(e,t,r)=>{r.a(e,async(e,o)=>{try{var n=r("a4579"),h=e([n]);n=(h.then?(await h)():h)[0],t.Z="detached/udm/csma"==r.j?n.Z:null,o()}catch(e){o(e)}})},e0b3e:(e,t,r)=>{r.d(t,{s:()=>o,x:()=>n});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("OzField",{class:e.$style.field,attrs:{errors:[e.errorText],"test-info":{automatizationErrorsId:"errorMessage"}}},[r("OzInput",{directives:[{name:"qa",rawName:"v-qa:id",value:e.testInfo.automatizationId||e.qaId,expression:"testInfo.automatizationId || qaId",arg:"id"}],attrs:{value:e.field.value,type:e.field.type,name:e.field.id||"phone",autofocus:!e.errorMessage&&e.field.autofocus,disabled:e.disabled,placeholder:e.field.placeholder,"has-error":Boolean(e.errorText),"max-length":e.maxLength,size:e.size,mask:e.field.mask?e.field.mask:e.mask},on:{blur:e.onBlur,focus:e.onFocus,input:e.onInput,keyup:e.onKeyup,keydown:e.onKeydown,paste:e.onPaste}})],1)},n="detached/udm/csma"==r.j?[]:null}}]);