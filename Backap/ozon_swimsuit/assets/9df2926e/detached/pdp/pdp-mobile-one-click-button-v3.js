"use strict";(self.webpackChunkDetached_pdp=self.webpackChunkDetached_pdp||[]).push([["pdp-mobile-one-click-button-v3"],{"9c7a2":(t,e,r)=>{r.a(t,async(t,o)=>{try{var c=r("7cd3b"),n=r("16477"),d=r("79a44"),h=r("46c81"),l=r("69aed"),m=r("0af63"),v=r("b359e"),w=r("abb9e"),y=r.n(w),k=r("42b36"),C=r("d0e6b"),x=r("7d50c"),S=t([c]);c=(S.then?(await S)():S)[0];var{CheckoutComposerService:f,addApplePayParams:O}=((t,e)=>{var r=6e4,o=((e=class extends l.AbstractApiService{constructor(...t){super(...t),this.serviceName="checkoutComposer",this.servicePath="composer-api.bx/_action"}autocompleteSuggests(t){return this.fetch({timeout:r,method:"get",path:t.link})}validateCourierAddress(t){return this.fetch({timeout:r,method:"get",path:"/v2/"+t.link},Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t.index&&{index:t.index}),t.searchString&&{searchString:t.searchString}),t.suggestValue&&{suggestValue:t.suggestValue}),t.status&&{status:t.status}),t.preferredGeoProviders&&{preferredGeoProviders:t.preferredGeoProviders}),t.geoSessionId&&{geoSessionId:t.geoSessionId}))}createOrder(){return this.fetch({timeout:r,method:"get",path:"/createOrder"})}updateComment(t){return this.fetch({timeout:r,method:"post",path:t.link},{comment:t.comment})}goCheckoutLite(t){return this.fetch({timeout:r,method:"post",path:"/goCheckoutLite"},t)}}).__serviceName="AbstractApiService_CheckoutComposerService",e);return t.CheckoutComposerService=o,t.addApplePayParams=async path=>{var t=path.startsWith("http"),e=new URL((t?"":window.location.origin)+path),r=new URLSearchParams(e.searchParams);r.set("snp",(await(async()=>{if(window.ApplePaySession){var t=!1;return await window.ApplePaySession.canMakePaymentsWithActiveCard("merchant.ru.ozon.yandex").then(e=>{t=!!e}),t}return!1})()).toString());var o=t?e.origin:"",c=e.pathname,n=r.toString();return n?`${o}${c}?${n}`:`${o}${c}`},t})({});e.Z=y().extend({name:"WidgetOneClickButton",mixins:[v.Z,k.Z,C.Z,m.DefaultAtomActionsMixin],computed:{btnText(){return(0,x.W)(this.stateParams.btnText,"")}},data(){return{loading:!1,visibilitySettings:{once:!0,callback:this.whenView}}},components:{DsButton:c.DsButton},methods:{whenView(){this.sendAnalytics(n.EActionTypes.VIEW_ACTION,"products.view")},async startUpCheckout(){this.loading=!0;var{redirectLink:t,payload:e,goCheckoutLitePayload:r}=this.widgetState;try{if(r){var o=await d.registry.use(f).goCheckoutLite(r);await this.onAtomAction(o.action)}else await d.registry.use(h.ComposerActions).getLayout({url:await O(t),method:"post",replaceUrl:!0,payload:e});this.sendAnalytics(n.EActionTypes.TO_CHECKOUT_ACTION,"products.to_checkout")}finally{this.loading=!1}}}}),o()}catch(t){o(t)}})},"7827b":(t,e,r)=>{r.a(t,async(t,o)=>{try{r.r(e);var c=r("4c90e"),n=r("3194b"),d=r("695d8"),h=r.n(d),l=t([n]);n=(l.then?(await l)():l)[0];var component=h()(n.Z,c.s,c.x,!1,null,null,null);e.default=component.exports,o()}catch(t){o(t)}})},"3194b":(t,e,r)=>{r.a(t,async(t,o)=>{try{var c=r("9c7a2"),n=t([c]);c=(n.then?(await n)():n)[0],e.Z=c.Z,o()}catch(t){o(t)}})},"4c90e":(t,e,r)=>{r.d(e,{s:()=>o,x:()=>c});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showWidget?r("DsButton",{directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:t.visibilitySettings,expression:"visibilitySettings"},{name:"qa",rawName:"v-qa:id",value:"one-click-button",expression:"'one-click-button'",arg:"id"}],attrs:{title:t.btnText,theme:t.widgetState.isPremiumCard?"custom":"actionSecondary","text-color":"textPrimary","background-color":"bgActiveSecondary",loading:t.loading,size:"600",fill:""},on:{click:t.startUpCheckout}}):t._e()},c=[]}}]);