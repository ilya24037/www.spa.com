"use strict";(self.webpackChunkDetached_reviews=self.webpackChunkDetached_reviews||[]).push([["autosplit-teams_reviews_components_product-reviews_review_comments-list_index_vue-teams_revie-6947ed"],{f6d46:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("8581f"),c=t([o]);o=(c.then?(await c)():c)[0];e.Z={components:{DsLoader:o.DsLoader}},n()}catch(t){n(t)}})},"7f3d1":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("d86db"),c=r.n(o),l=r("c7b40"),d=r.n(l),h=r("4ad74"),v=r("227f1"),m=r("828a6"),f=r("49246"),w=r("f12b5"),y=r("14217"),C=r("79a44"),A=r("69aed"),x=t([h,v]);[h,v]=x.then?(await x)():x;var{VideoIdentifiersInstance:M,IPlay:I,IAttached:O}=((t,e)=>{var r=((e=class extends A.AbstractStoreService{getInitialState(){return{mobReviewGallery:""}}setVideoIdentifier(t,e){this.pushState(r=>{r[t]=e})}}).__serviceName="AbstractStoreService_VideoIdentifiersInstance",e),n={functional:!0,name:"icLCirclePlay",meta:{width:32,height:32,viewBox:"0 0 32 32"},render:(t,e)=>t("svg",Object.assign(Object.assign({},e.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},e.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M14.286 11c.229 0 .458.06.661.178l6.429 3.75c.387.226.624.633.624 1.072s-.237.846-.624 1.072l-6.429 3.75a1.31 1.31 0 0 1-1.295.016A1.24 1.24 0 0 1 13 19.75v-7.5c0-.45.25-.866.652-1.088.197-.108.415-.162.634-.162"/><path fill="currentColor" d="M1 16C1 7.716 7.716 1 16 1s15 6.716 15 15-6.716 15-15 15S1 24.284 1 16M16 3C8.82 3 3 8.82 3 16s5.82 13 13 13 13-5.82 13-13S23.18 3 16 3"/>'}}))},o={functional:!0,name:"icMDocumentFilled",meta:{width:24,height:24,viewBox:"0 0 24 24"},render:(t,e)=>t("svg",Object.assign(Object.assign({},e.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},e.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M4 12.006c0-4.68 0-6.929 1.123-8.008C6.161 3 8.16 3 12.002 3c.5 0 1.499 0 1.998.1 1.014.203 1.5.4 3.5 2.4s2.203 2.514 2.4 3.5c.1.5.103 2.751.097 3.251-.05 4.522-.074 6.706-1.178 7.762C17.787 21 15.824 21 12 21c-3.815 0-5.845 0-6.879-.992C4 18.932 4 16.688 4 12.006M8 10a1 1 0 0 0 1 1h6a1 1 0 1 0 0-2H9a1 1 0 0 0-1 1m1 3a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2z"/>'}}))};return t.VideoIdentifiersInstance=r,t.IPlay=n,t.IAttached=o,t})({});e.Z={name:"MediaPreview",components:{DsImage:v.DsImage,DsBadge:h.DsBadge,IPlay:I,IAttached:O},inject:{isAccessibilityMode:{default:!1}},props:Object.assign(Object.assign({},w.E),{},{maxCount:c().integer.def(8),isMobile:c().bool.def(!1),isGallery:c().bool.def(!1)}),data:()=>({media:[],gridClass:"",mediaPreviewsMobileClass:"",MEDIA_TYPES:y.w_}),created(){if(this.photos&&this.photos.length||this.videos&&this.videos.length){var{media:t,gridClass:e}=(0,f.C)(this.videos,this.photos,this.isMobile,this.maxCount);this.media=t,this[this.isMobile?"mediaPreviewsMobileClass":"gridClass"]=e}},methods:{async openMedia({galleryParams:t,type:e}){if(t){e===y.w_.VIDEO&&this.sendInitiatorEvent();var r=this.media.findIndex(e=>e.galleryParams===t);this.$emit("clickPhotoPreview",r),await this.$composerRouter.replace((0,m.q)(this.$composerRouter.current,t,y.BZ),{silent:!0})}},openMediaInside(t){t.type===y.w_.VIDEO&&this.sendInitiatorEvent(),this.$emit("openMediaInside",t)},handleError(t){t&&t.type===y.w_.VIDEO&&(this.$set(t,"error",!0),this.$set(t,"duration",""))},sendInitiatorEvent(){var t=d()();C.registry.use(M).setVideoIdentifier("mobReviewGallery",t),window.dispatchEvent(new CustomEvent("reviewsClickOpenModal",{detail:{videoIdentifier:t,timestamp:performance.now()}}))}}},n()}catch(t){n(t)}})},de7f8:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("2b62e"),c=r.n(o),l=r("d86db"),d=r.n(l),h=r("ff0be"),v=r("c1623"),m=r("b3b0a"),f=r("84194"),w=r("d3072"),y=r("68103"),C=r("343d3"),A=t([h,v,m,C]);[h,v,m,C]=A.then?(await A)():A;var{getQaDirective:x}=((I={}).getQaDirective=function(t){return{name:"qa",arg:"id",value:t}},I),M={commentsList:{replyUser:"в ответ",defaultAuthorName:"Пользователь OZON"}};e.Z={name:"Comment",functional:!0,inject:{getLocalization:{default:()=>{}}},props:Object.assign(Object.assign({},f.nn),{},{replyUserName:d().string.def(""),deleteProcessing:d().bool.def(!1),deleteError:d().bool.def(!1),index:d().number.def(0),creatingAbuseReport:d().bool.def(!1),creatingAbuseReportError:d().bool.def(!1),mounted:d().bool.def(!1),isMobile:d().bool.def(!1),isGallery:d().bool.def(!1)}),render(t,{$style:e,highlightStyle:r,props:n,listeners:o,_v:l,data,injections:d,parent:f}){var A=d.getLocalization()||M,{id:I,createdAt:O,isAbuseReported:j,isReportable:k,isVotable:T,isCommentable:P,isDeletable:R,author:z,usefulness:D,isUserComment:B,rootParentUuid:L,parentUuid:E,isAnchor:U,isNew:S,comment:V,replyUserName:N,deleteProcessing:_,deleteError:$,index:F,creatingAbuseReport:G,creatingAbuseReportError:H,mounted:Y,isMobile:Q,isGallery:Z,sharing:K,uuid:W,itemId:J,publishedAtFormatted:X}=n,tt=Array.isArray(data.class)?data.class:[data.class||""],et=(0,y.Au)({author:z,isUserEntity:B,defaultAuthorName:A.commentsList.defaultAuthorName}),it=E||L,at=E?w.e.COMMENT:w.e.REVIEW,st=(0,C.k)(f.$i18n.getCurrentLanguage(),new Date(1e3*O)).format("D MMMM YYYY"),nt=N?[t("a",c()([{class:e.replyLink},{directives:[x("review-comment-answer")]},{on:{click:t=>{t.preventDefault(),t.stopPropagation(),o.scrollToParent({uuid:it,type:at})}}}]),[l(`${A.commentsList.replyUser} ${N}`)])]:[];return t("div",c()([{class:[e.comment,{[Q||Z?r.highlightMobile:r.highlight]:U&&Y,[e.mobile]:Q||Z},...tt]},{attrs:data.attrs,directives:data.directives}]),[_||G?[t(m.Z)]:[],t("div",{class:e.header},[t("div",{class:e.mainInfo},[t("div",{class:e.authorInfo},[t(v.Z,{attrs:{name:et.name,"avatar-url":et.imageUrl,"avatar-size":Q||Z?"s":"m",url:et.authorUrl,"partner-caption":z.clientOfficial&&z.clientOfficial.caption,"is-mobile":Q||Z}},[...nt])]),t("div",{class:[e.date,{[e.xs]:Z}]},[l(X||st)])])]),t("div",{class:e.wrapper},[t("div",c()([{class:e.wrapperText},{directives:[x("review-comment-text")]}]),[t("span",{class:e.text,domProps:{innerHTML:V}})]),t(h.Z,c()([{attrs:{id:I,uuid:W,"delete-error":$,"delete-processing":_,index:F,"is-abuse-reported":j,"is-commentable":P,"is-deletable":R,"is-reportable":k,"is-user-record":B,"is-votable":T,"entity-type":w.e.COMMENT,usefulness:D,"creating-abuse-report":G,"creating-abuse-report-error":H,"is-gallery":Z,sharing:K}},{on:{delete:()=>o.delete({uuid:W,rootParentUuid:L,itemId:J,isNew:S}),reported:t=>o.reported({uuid:W,rootParentUuid:L,report:t,itemId:J}),vote:t=>o.vote({value:t,uuid:W,rootParentUuid:L,itemId:J}),writeComment:()=>o.writeComment({uuid:W,rootParentUuid:L,parentUuid:W,answerAuthorName:et.name,entityType:w.e.COMMENT})}}]))])])}},n()}catch(t){n(t)}var I})},31307:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("d86db"),c=r.n(o),l=r("ce27b"),d=r.n(l),h=r("a82cd"),v=r("8581f"),m=r("86d2f"),f=r("84194"),w=r("68103"),y=r("f3278"),C=t([h,v,m]);[h,v,m]=C.then?(await C)():C;var{PlusIcon:A}=((M={}).PlusIcon={functional:!0,name:"icMPlus",meta:{width:24,height:24,viewBox:"0 0 24 24"},render:(t,a)=>t("svg",Object.assign(Object.assign({},a.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},a.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M12 4a1 1 0 0 0-1 1v6H5a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V5a1 1 0 0 0-1-1"/>'}}))},M),x={commentsList:{buttonMore:"Показать больше ответов"}};e.Z={name:"CommentsList",components:{Comment:m.Z,OzButton:h.OzButton,DsLoader:v.DsLoader,PlusIcon:A},mixins:[y.Z],inject:{getLocalization:{default:()=>{}}},props:{review:c().shape(Object.assign({},f.Cw)).loose,isCommentsLoading:c().bool.def(!1),hideFirstCommentView:c().bool.def(!1),commentsLoadingReview:c().string.def(""),currentCommentDeletingError:c().string.def(""),currentCommentDeletingUuid:c().string.def(""),creatingAbuseReport:c().oneOfType([c().number,c().bool]).def(""),creatingAbuseReportError:c().oneOfType([c().number,c().bool]).def(""),isGallery:c().bool.def(!1),hasToolbarFlag:c().oneOfType([c().bool.def(!1),{validator:t=>void 0===t}]).def(!1)},data:()=>({mounted:!1}),computed:{localization(){return this.getLocalization()||x},commonCommentsList(){return d()(this.review,"comments.list")||[]},total(){return d()(this.review,"comments.totalCount")||0},commentsList(){return this.commonCommentsList.filter(t=>!t.isNew)},newCreatedCommentsList(){return this.commonCommentsList.filter(t=>t.isNew)},getCommentListeners(){return{delete:t=>this.$emit("delete",t),writeComment:t=>this.$emit("writeComment",t),scrollToParent:t=>this.$emit("scrollToParent",t),reported:t=>this.$emit("reported",t),vote:t=>this.$emit("voteComment",t)}}},mounted(){this.mounted=!0},methods:{loadMoreComments(){this.$emit("loadMore",{review:this.review,currentComments:this.commentsList,itemId:this.review.itemId})},getReplyUserName(t,e){if(e.rootParentUuid&&!e.parentUuid&&e.author){var r=t.author;return(0,w.uM)(r.firstName,r.lastName,r.fio)}var n=this.commonCommentsList.find(t=>t.uuid===e.parentUuid);if(n&&n.author){var o=n.author;return(0,w.uM)(o.firstName,o.lastName,o.fio)}return""},getCommentsProps(t,e){return Object.assign(Object.assign({},e),{},{mounted:this.mounted,isMobile:this.isMobile,isGallery:this.isGallery,deleteError:this.currentCommentDeletingError===e.uuid,deleteProcessing:this.currentCommentDeletingUuid===e.uuid,creatingAbuseReport:this.creatingAbuseReport===e.uuid,creatingAbuseReportError:this.creatingAbuseReportError===e.uuid,replyUserName:this.getReplyUserName(t,e),"data-comment-uuid":e.uuid,"data-author-id":this.hasToolbarFlag&&e.author?e.author.id:null})},detectViewportSettings({uuid:t}){return{once:!0,callback:()=>this.$emit("viewComment",t)}}}},n()}catch(t){n(t)}var M})},ed411:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("2b62e"),c=r.n(o),l=r("d86db"),d=r.n(l),h=r("2fe37"),v=r("343d3"),m=t([h,v]);[h,v]=m.then?(await m)():m;var{getQaDirective:f}=((y={}).getQaDirective=function(t){return{name:"qa",arg:"id",value:t}},y),w={review:{editedText:"изменен"}};e.Z={name:"ContentInfo",functional:!0,inject:{getLocalization:{default:()=>{}}},props:{createdAt:d().oneOfType([d().string.def(""),d().number.def(0)]),rating:d().number.def(0),isAuthorType:d().bool.def(!1),isMobile:d().bool.def(!1),updatedAt:d().oneOfType([d().string.def(""),d().number.def(0)]),isGallery:d().bool.def(!1),isExternal:d().bool.def(!1)},render(t,{props:e,$style:r,_v:n,parent:o,injections:l}){var{createdAt:d,rating:m,isAuthorType:y,isMobile:C,updatedAt:A,isGallery:x,isExternal:M}=e,I=l.getLocalization()||w,O=M?new Date(1e3*(A||d)).getFullYear():(0,v.k)(o.$i18n.getCurrentLanguage(),new Date(1e3*(A||d))).format("D MMMM YYYY"),j=x?[]:[t("div",{class:r.rating},[t(h.DsRatingShowing,c()([{attrs:{size:"300",value:m}},{directives:[{name:"qa",arg:"id",value:"review-stars"}]}]))])];return t("div",c()([{class:[r.info,{[r.mobile]:C&&!x,[r.themeAuthor]:y}]},{directives:[f("contentInfoDate")]}]),[t("div",{class:[r.date,{[r.xs]:x}]},[n(`${A?I.review.editedText:""} ${O}`)]),...j])}},n()}catch(t){n(t)}var y})},"495e8":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("d86db"),c=r.n(o),l=r("ce27b"),d=r.n(l),h=r("bcc5e"),v=r("7cd3b"),m=r("57ed6"),f=r("d46c4"),w=r("056eb"),y=r("15e0b"),C=r("19d01"),A=r("9eea1"),x=r("3ea25"),M=r("511bf"),I=r("84194"),O=r("76a69"),j=r("60e6f"),k=r("d3072"),T=r("f3278"),P=r("0697e"),R=r("d3b92"),z=t([h,v,m,f,w,y,C,A,x,j,P]);[h,v,m,f,w,y,C,A,x,j,P]=z.then?(await z)():z;var{AuthorizationServiceMixin:D,editIcon:B,deleteIcon:L,reportIcon:E}=(t=>{var e,r;(r=e||(e={})).MODAL="modal",r.REDIRECT="redirect";var n={methods:{async redirectToAuth(t){await this.$composerRouter.redirect(t,"_self")},async showAuthForm(t){var{method:r,url:n}=await this._getAuthMethodData(t);r===e.REDIRECT?await this.redirectToAuth(n):this.$registry.useByName("ComposerActions").getModal({url:n,options:{notCentered:!0}})},async _getAuthMethodData(t){var e={name:"authorizationMethod"};t&&(e.query={redirect_uri:t});var{method:r,url:n}=await this.$registry.useByName("ComposerService").actionGet(e);return{method:r,url:n}}}},o={functional:!0,name:"icMEdit",meta:{width:24,height:24,viewBox:"0 0 24 24"},render:(t,e)=>t("svg",Object.assign(Object.assign({},e.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},e.data.attrs),domProps:{innerHTML:'<path fill="currentColor" fill-rule="evenodd" d="M18.424 5.58c-.756-.756-1.906-.813-2.658.068a1 1 0 0 1-1.522-1.299c1.624-1.9 4.142-1.635 5.595-.183 1.466 1.465 1.686 3.938-.169 5.581a1 1 0 0 1-1.327-1.497c.896-.794.826-1.925.081-2.67m-7.128 1.712a1 1 0 0 1 1.415 0l4.002 4a1 1 0 0 1 0 1.414L8.71 20.707a1 1 0 0 1-.708.293H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 .293-.708zm-6.295 9.122V19h2.587l7.003-7-2.587-2.587z" clip-rule="evenodd"/>'}}))},c={functional:!0,name:"icMTrashBin",meta:{width:24,height:24,viewBox:"0 0 24 24"},render:(a,t)=>a("svg",Object.assign(Object.assign({},t.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},t.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M8.995 4.002a1 1 0 0 0-1 1v1h5a1 1 0 1 1 0 2h-7v11a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-11h-1a1 1 0 0 1-1-1v-2a1 1 0 0 0-1-1zm11 4v11a3 3 0 0 1-3 3h-10a3 3 0 0 1-3-3v-11h-1a1 1 0 0 1 0-2h3v-1a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v1h3a1 1 0 1 1 0 2zm-10 3a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0v-4a1 1 0 0 1 1-1m4 0a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0v-4a1 1 0 0 1 1-1"/>'}}))},l={functional:!0,name:"icMDanger",meta:{width:24,height:24,viewBox:"0 0 24 24"},render:(a,t)=>a("svg",Object.assign(Object.assign({},t.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},t.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M13 21a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-1-10a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0v-5a1 1 0 0 1 1-1"/><path fill="currentColor" d="M12.874 4.505a1 1 0 0 0-1.736-.001L3.136 18.503A1 1 0 0 0 4.004 20h4.004a1 1 0 0 1 0 2H4.004C1.7 22 .257 19.51 1.4 17.51l8.002-14c1.152-2.015 4.057-2.014 5.208.002l7.99 13.999c1.143 2-.301 4.488-2.604 4.488h-3.99a1 1 0 0 1 0-2h3.99a1 1 0 0 0 .869-1.497z"/>'}}))};return t.AuthorizationServiceMixin=n,t.editIcon=o,t.deleteIcon=c,t.reportIcon=l,t})({});e.Z={name:"ReviewCommentFooter",directives:{"click-outside":j.clickOutsideDirective},components:{Usefulness:w.Z,OzTransition:h.OzTransition,DsButton:v.DsButton,DsLinkButton:m.DsLinkButton,DsIconButton:f.DsIconButton,AdditionalActionsButton:y.Z,Confirmation:C.Z,AbuseReport:A.Z,Notification:x.Z},mixins:[T.Z,P.Z,D],inject:{getLocalization:{default:()=>{}}},props:{index:c().integer.def(0),id:c().oneOfType([c().number,{validator:t=>void 0===t},{validator:t=>null===t}]).def(0),uuid:c().string.def(""),isAbuseReported:c().bool,entityType:c().oneOf([k.e.REVIEW,k.e.COMMENT]).def(k.e.REVIEW),isUserRecord:c().bool.def(!1),isReportable:c().bool,isVotable:c().bool,isCommentable:c().bool.def(!1),isDeletable:c().bool.def(!1),usefulness:w.Z.props.usefulness,deleteProcessing:c().bool.def(!1),deleteError:c().bool.def(!1),creatingAbuseReport:c().bool.def(!1),creatingAbuseReportError:c().bool.def(!1),isEditable:c().bool.def(!1),editUrl:c().string.def(""),isGallery:c().bool.def(!1),sharing:I.as,isExternal:c().bool.def(!1),hasMedia:c().bool.def(!1),commentsTotalCount:c().number.def(0),commentsCount:c().number.def(0),hideFirstCommentView:c().bool.def(!1)},data(){return{ENTITY_TYPES:k.e,editIcon:B,deleteIcon:L,reportIcon:E,reportAbuseVisible:!1,deleteReviewVisible:{},needShowError:!0,notificationError:{type:"error",text:this.$i18n.t("system@error_occured_retry_later")},confirmText:this.$i18n.t("system@remove"),cancelText:this.$i18n.t("system@cancellation"),additionalActionsDelete:O.Z$,additionalActionsReport:O.Ag}},computed:{localization(){return this.getLocalization()||O.$2},showCommentAddButton(){return this.isCommentable&&!this.isGallery||this.isCommentable&&this.isGallery&&this.entityType===k.e.COMMENT},showCommentsButtonText(){var t=this.commentsTotalCount,e="",r="";return t<1e3?(e="",r=this.$i18n.p(this.commentsTotalCount,[this.localization.review.commentsButtonText,this.localization.review.commentsMoreButtonText,this.localization.review.commentsManyButtonText])):t<1e6?(t=Math.ceil((t-99)/1e3*10)/10,e="K",r=this.localization.review.commentsManyButtonText):(t=Math.ceil((t-99999)/1e6*10)/10,e="M",r=this.localization.review.commentsManyButtonText),`${t}${e?" "+e:""} ${r}`},showUsefullnes(){return this.usefulness&&!this.isExternal},usefulnessActions(){return this.usefulness?[{isAvailable:this.isVotable,val:this.usefulness.useful,isSelected:this.usefulness.userSelection===R.QA,type:M.uC,action:R.QA},{isAvailable:this.isVotable,val:this.usefulness.unuseful,isSelected:this.usefulness.userSelection===R.vQ,type:M.nI,action:R.vQ}]:[]},additionalActions(){var t=[];return this.isDeletable&&t.push(Object.assign(Object.assign({},O.Z$),{},{text:this.localization.review.delete})),this.isReportable&&t.push(Object.assign(Object.assign({},O.Ag),{},{text:this.localization.review.report})),this.sharing&&this.sharing.url&&t.push(Object.assign(Object.assign({url:this.sharing.url},O.R3),{},{text:this.localization.review.copyUrl})),t},isOnlyCopyUrlAction(){return 1===this.additionalActions.length&&this.additionalActions[0].action===O.R3.action},textByEntityType(){return{[k.e.REVIEW]:this.localization.review.entityReview,[k.e.COMMENT]:this.localization.review.entityComment,[k.e.QUESTION]:this.localization.review.entityQuestion,[k.e.ANSWER]:this.localization.review.entityAnswer}}},methods:{getAbuseReports(t){var{misleading:e,inappropriatePhotoOrVideo:r,inappropriateContent:n,abuseOther:o}=this.localization.abuseReport,c=[{value:"1",label:e},{value:"4",label:r},{value:"2",label:n},{value:"3",label:o}],l=[{value:"1",label:e},{value:"2",label:n},{value:"3",label:o}];return{list:t===k.e.REVIEW&&this.hasMedia?c:l,anotherReasonValue:"3"}},additionalActionsListeners(t){switch(d()(t,"action")){case O.Z$.action:this.deleteReviewVisible={[this.uuid]:!0};break;case O.Ag.action:this.reportAbuseVisible=!0;break;case O.R3.action:this.onCopyUrl(t.url)}},onDelete(){this.deleteProcessing||(this.$emit("delete"),this.needShowError=!0)},vote({action:t}){this.isVotable&&!this.isUserRecord&&this.$emit("vote",t)},onReportAbuseClose(t){t&&t.target&&this.$el.contains(t.target)||(this.reportAbuseVisible=!1,this.needShowError=!1)},onReportAbuseReported(t){this.creatingAbuseReport||(this.$emit("reported",t),this.needShowError=!0)},onWriteComment(){this.$emit("writeComment")},onShowComments(){0===this.commentsCount?this.$emit("showComments"):this.$emit("hideComments")},async showModal(){this.isVotable||await this.showAuthForm()},closeConfirmation(){this.deleteReviewVisible={[this.uuid]:!1},this.needShowError=!1},onEdit(){this.$emit("editReview"),this.$composerRouter.push(this.editUrl)}}},n()}catch(t){n(t)}})},d749a:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("2b62e"),c=r.n(o),l=r("d86db"),d=r.n(l),h=r("5fca6"),v=r.n(h),m=r("8d3bc"),f=r("4ad74"),w=r("84194"),y=r("ff0be"),C=r("9491f"),A=r("c1623"),x=r("4eda8"),M=r("df68b"),I=r("b3b0a"),O=r("e56c4"),j=r("66250"),k=r("a8bbe"),T=r("1846a"),P=r("bce3d"),R=r("d3072"),z=r("68103"),D=r("f6963"),B=t([m,f,y,C,A,I,j,k,T,D]);[m,f,y,C,A,I,j,k,T,D]=B.then?(await B)():B;var L=r.n(m),{getQaDirective:E}=((S={}).getQaDirective=function(t){return{name:"qa",arg:"id",value:t}},S),U={review:{badgePurchased:"Товар куплен на OZON",productVariants:"Вариант товара: ",showAllReview:"Показать весь отзыв"}};e.Z={name:"Review",functional:!0,inject:{getLocalization:{default:()=>{}}},props:Object.assign(Object.assign(Object.assign({},w.Cw),w.KI),{},{type:d().number.def(0),index:d().number.def(0),creatingAbuseReport:d().bool.def(!1),creatingAbuseReportError:d().bool.def(!1),hideFirstCommentView:d().bool.def(!1),isMobile:d().bool.def(!1),isGallery:d().bool.def(!1),fullMediaWidth:d().bool.def(!1),isShowFullText:d().bool.def(!1),query:d().object.def({}),translateButton:d().object.def({})}),render(t,{$style:e,props:r,listeners:n,_v:o,data,injections:l}){var d=l.getLocalization()||U,{id:h,createdAt:m,isAbuseReported:w,isAnonymous:B,isReportable:S,isVotable:V,isCommentable:N,isDeletable:_,author:$,usefulness:F,itemId:G,isItemPurchased:H,isUserReview:Y,status:Q,rulesLink:Z,content,product:K,deleteProcessing:W,deleteError:J,type:X,index:tt,creatingAbuseReport:et,creatingAbuseReportError:it,isMobile:at,isEditable:st,editUrl:nt,updatedAt:ot,isGallery:ct,fullMediaWidth:lt,sharing:ut,uuid:ht,travelInfo:vt,isExternal:mt,badge:bt,comments:pt,hideFirstCommentView:ft,isShowFullText:wt,query:yt,translateButton:gt}=r,Ct=Array.isArray(data.class)?data.class:[data.class||""],At=[{name:"detect-viewport",value:{once:!0,callback:()=>n.view&&n.view(ht)}}],xt=Boolean(content.photos&&content.photos.length)||Boolean(content.videos&&content.videos.length),Mt=X===P.ZY||X===P.FL,It=(0,z.Au)({author:$,isUserEntity:Y,isAnonymous:B,query:yt}),Ot=K&&K.uri?K.uri:"",jt=K&&K.variants?K.variants.map(t=>`${t.name}: ${t.value}`).join(", "):"",kt=1===v()(Object.values(content)).length&&content.score&&!_&&!st,Tt=X===P.FL?[t("div",c()([{class:e.status},{directives:[E("reviewStatus")]}]),[t(T.Z,{attrs:{status:Q,"entity-type":R.e.REVIEW,"rules-link":Z,"is-mobile":at}})])]:[],Pt=Mt&&K?[t(k.Z,{attrs:{"product-href":Ot,name:K.name||"",image:K.coverImage||"","is-mobile":at,"travel-info":vt}})]:[],Rt=t(j.Z,{attrs:{"created-at":m,rating:content.score||0,"is-author-type":Mt,"is-mobile":at,"updated-at":ot,"is-gallery":ct,"is-external":mt}}),zt=vt?[t("div",{class:e.travelBadge},[o(vt)])]:[],Dt=gt?[t(D.Z,c()([{class:[e.translateButton,{[e.hasVariant]:jt&&Ot},{[e.translateButtonGallery]:ct}],attrs:{uuid:ht,content,isMobile:at,translateButton:gt}},{on:{translateClick:t=>{n.translateClick(t)}}}]))]:[],Bt=Mt?[]:[t(A.Z,{attrs:{name:It.name,"avatar-url":It.imageUrl,"avatar-size":at?"m":"l",url:It.authorUrl,"partner-caption":$.clientOfficial&&$.clientOfficial.caption,"is-mobile":at}},[ct?[Rt]:[zt]])],Lt=[],Et={class:[e.mediaContent,{[e.fullWidth]:lt}],directives:[E("photosPreview")],on:{clickPhotoPreview:t=>n.clickPhotoPreview&&n.clickPhotoPreview(t,ht),openMediaInside:t=>n.openMediaInside&&n.openMediaInside(t)}};content&&(content.photos&&content.photos.length||content.videos&&content.videos.length)&&Lt.push(t(C.Z,c()([{},Object.assign({props:{maxCount:at?6:8,photos:content.photos,videos:content.videos,isMobile:at,isGallery:ct}},Et)])));var Ut=H&&X!==P.FL?[t(x.Z,c()([{},{props:{text:d.review.badgePurchased},class:e.itemPurchased,directives:[E("itemPurchased")]}]))]:[],St=bt&&X!==P.FL?[t(f.DsBadge,c()([{},{props:{theme:bt.theme,size:bt.size,label:bt.label,backgroundColor:bt.backgroundColor,labelColor:bt.labelColor,rightGraphicColor:bt.rightGraphicColor,isClickable:!0},class:e.itemPurchased,on:{click:()=>n.openFreshModal(bt.url,ht)}}]))]:[],Vt=content&&content.contextQuestions&&content.contextQuestions.length?[t(O.Z,c()([{attrs:{"context-questions":content.contextQuestions},class:e.contextQuestions},{on:{clickContextQuestions:t=>n.clickContextQuestions&&n.clickContextQuestions(t)}}]))]:[],Nt=jt&&Ot?[t("div",{class:e.variant},[ct?[t("span",[d.review.productVariants])]:[],t(L(),c()([{},{props:{href:Ot,title:jt},class:e.variantLink,directives:[E("variantAnchor")]}]),[o(jt)])])]:[];return t("div",c()([{class:[e.review,{[e.mobile]:at,[e.themeAuthor]:Mt},...Ct],attrs:Object.assign({},data.attrs)},{directives:At}]),[W||et?[t(I.Z)]:[],t("div",{class:[e.header,{[e.themeMyAccount]:X===P.FL}]},[Tt,Pt,Bt,ct?[]:[Rt]]),t("div",{class:e.body},[t("div",{class:e.additionalInfo},[t("div",{class:{[e.extendedWrapper]:at&&Dt}},[Ut,St,Nt,Dt,ct?[zt]:[],Vt])]),t(M.Z,{attrs:{content,isShowFullText:wt},class:e.content}),Lt]),kt?[]:[t(y.Z,c()([{},{props:{id:h,uuid:ht,index:tt,deleteError:J,deleteProcessing:W,isAbuseReported:w,isCommentable:N,isDeletable:_,isReportable:S,isUserRecord:Y,isVotable:V,entityType:R.e.REVIEW,usefulness:F,creatingAbuseReport:et,creatingAbuseReportError:it,isEditable:st,editUrl:nt,isGallery:ct,sharing:ut,isExternal:mt,hasMedia:xt,commentsCount:pt.list&&pt.list.length||0,commentsTotalCount:pt.totalCount,hideFirstCommentView:ft},class:e.footer,directives:[E("review-footer")],on:{delete(){W||n.delete(ht,G)},reported:t=>n.reported({uuid:ht,itemId:G,report:t}),vote:t=>n.vote({uuid:ht,itemId:G,value:t}),writeComment:()=>n.writeComment({uuid:ht,itemId:G,rootParentUuid:ht,parentUuid:null,answerAuthorName:It.name,entityType:R.e.REVIEW}),editReview:()=>n.editReview(ht),showComments:()=>n.showComments({review:{uuid:ht},currentComments:pt.list,itemId:G}),hideComments:()=>n.hideComments(ht)}}]))]])}},n()}catch(t){n(t)}var S})},b0ace:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("2b62e"),c=r.n(o),l=r("d86db"),d=r.n(l),h=r("227f1"),v=r("8d3bc"),m=t([h,v]);[h,v]=m.then?(await m)():m;var f=r.n(v),{getQaDirective:w}=((y={}).getQaDirective=function(t){return{name:"qa",arg:"id",value:t}},y);e.Z={name:"Product",functional:!0,props:{productHref:d().string.def(""),name:d().string.def(""),image:d().string.def(""),travelInfo:d().string.def(""),isMobile:d().bool.def(!1)},render(t,{$style:e,props:r,_v:n}){var{productHref:o,name:l,image,isMobile:d,travelInfo:v}=r;return t("div",{class:[e.product,{[e.mobile]:d}]},[t("div",{class:[e.imageWrapper,{[e.default]:!image}]},[t(h.DsImage,{attrs:{size:100,src:image,"use-cdn":!0},class:[e.image,{[e.default]:!image}]})]),t("div",{class:e.headerWrapper},[t(f(),c()([{attrs:{href:o,title:l},class:e.title},{directives:[w("reviewTitle")]}]),[n(l)]),t("div",c()([{class:e.subtitle},{directives:[w("travelInfo")]}]),[v])])])}},n()}catch(t){n(t)}var y})},"5f41d":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("d86db"),c=r.n(o),l=r("0af63"),d=r("0e79c"),h=r("0d3ba"),v=t([d]);d=(v.then?(await v)():v)[0];e.Z={name:"TranslateReviewButton",components:{ButtonAtom:d.AtomDsButton},mixins:[l.DefaultAtomActionsMixin],props:{uuid:c().string.def(""),content:c().object.def({}),isMobile:c().bool.def(!1),translateButton:c().object.def({})},data(){return{activeTranslateStatus:this.translateButton?this.translateButton.translationStatus:"",localTranslate:{original:{},translated:{}}}},computed:{activeTranslate(){if(this.activeTranslateStatus){var t=h.K[this.activeTranslateStatus];return this.translateButton[t]}return null},isNotTranslated(){return this.activeTranslateStatus===h.o.NOT_TRANSLATED}},methods:{setContent(t){var{comment:e="",negative:r="",positive:n=""}=t,o=Object.assign({},this.content),c={comment:o.comment?e:"",negative:o.negative?r:"",positive:o.positive?n:""};this.$emit("translateClick",{uuid:this.uuid,content:c})},async translateContent(){var t=this.activeTranslateStatus,{action:e}=this.activeTranslate.common;this.activeTranslateStatus=h.o.IN_PROGRESS;var{res:r,error:n}=await this.onAtomAction(e);if(r&&!n){this.setTranslateStatus(t);var o=t===h.o.TRANSLATED;this.localTranslate.original=o?r:this.content,this.setContent(r),this.localTranslate.translated=o?this.content:r}n&&(this.activeTranslateStatus=t,this.$emit("translateClick",{uuid:this.uuid,error:!0}))},setTranslateStatus(t=""){this.activeTranslateStatus=t?t===h.o.NOT_TRANSLATED?h.o.TRANSLATED:h.o.NOT_TRANSLATED:this.isNotTranslated?h.o.TRANSLATED:h.o.NOT_TRANSLATED},async getReviewContentTranslate(){if(0!==Object.keys(this.localTranslate.original).length||0!==Object.keys(this.localTranslate.translated).length){this.setTranslateStatus();var t=this.isNotTranslated?this.localTranslate.original:this.localTranslate.translated;this.setContent(t)}else await this.translateContent()}}},n()}catch(t){n(t)}})},b3b0a:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("472db"),c=r("0ab26"),l=r("79c86"),d=r("695d8"),h=r.n(d),v=t([c]);function m(t){this.$style=l.Z.locals||l.Z}c=(v.then?(await v)():v)[0];var component=h()(c.Z,o.s,o.x,!1,m,null,null);e.Z=component.exports,n()}catch(f){n(f)}})},"9491f":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("87948"),c=r("936e4"),l=r("d8967"),d=r("695d8"),h=r.n(d),v=t([c]);function m(t){this.$style=l.Z.locals||l.Z}c=(v.then?(await v)():v)[0];var component=h()(c.Z,o.s,o.x,!1,m,null,null);e.Z=component.exports,n()}catch(f){n(f)}})},"86d2f":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("c9cec"),c=r("9ca93"),l=r("d2f36"),d=r("695d8"),h=r.n(d),v=t([o]);function m(t){this.highlightStyle=c.Z.locals||c.Z,this.$style=l.Z.locals||l.Z}o=(v.then?(await v)():v)[0];var component=h()(o.Z,undefined,undefined,!1,m,null,null);e.Z=component.exports,n()}catch(f){n(f)}})},a7d86:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("4e92f"),c=r("bb0f4"),l=r("9916d"),d=r("695d8"),h=r.n(d),v=t([c]);function m(t){this.$style=l.Z.locals||l.Z}c=(v.then?(await v)():v)[0];var component=h()(c.Z,o.s,o.x,!1,m,null,null);e.Z=component.exports,n()}catch(f){n(f)}})},66250:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("a81a5"),c=r("97e8b"),l=r("695d8"),d=r.n(l),h=t([o]);function v(t){this.$style=c.Z.locals||c.Z}o=(h.then?(await h)():h)[0];var component=d()(o.Z,undefined,undefined,!1,v,null,null);e.Z=component.exports,n()}catch(m){n(m)}})},df68b:(t,e,r)=>{r.d(e,{Z:()=>C});var n,o,c=r("84194"),l=r("d3b92"),d=r("d86db"),h=r.n(d),{ellipsis:v}=(o=[".","!","?"],(n={}).ellipsis=function(text,t){var e=t>=text.length?text.length-1:t,r=/[.?!,\s]/g.exec(text.slice(e));if(null===r)return`${text.slice(0,e)}...`;var n=e+r.index;return o.includes(r[0])?`${text.slice(0,n)}${r[0]}..`:`${text.slice(0,n)}...`},n),m={contentText:{readMore:"Читать полностью",advantages:"Достоинства",received:"Недостатки",comment:"Комментарий"}},f={name:"ContentText",inject:{getLocalization:{default:()=>{}}},props:{content:c.o8,isShowFullText:h().bool.def(!1)},data:()=>({currentVisibleIndex:null}),computed:{localization(){return this.getLocalization()||m},titles(){return[{key:"positive",text:this.localization.contentText.advantages},{key:"negative",text:this.localization.contentText.received},{key:"comment",text:this.localization.contentText.comment}]},itemsHasContent(){return this.titles.filter(t=>Boolean(this.content[t.key]))},itemsTextLengths(){return this.itemsHasContent.map(t=>this.content[t.key]).map(text=>text.length)}},created(){this.calcCurrentVisibleIndex()},methods:{calcCurrentVisibleIndex(){var t=null,e=0;this.itemsTextLengths.forEach((r,i)=>{e=r,null===t&&e>l.K3&&(t=i)}),this.isShowFullText||(this.currentVisibleIndex=t)},getVisibleText(t,e){var text=this.content[t];if(null===this.currentVisibleIndex||this.currentVisibleIndex>e)return text;var r=this.itemsTextLengths.filter((t,i)=>i<this.currentVisibleIndex).reduce((t,e)=>t+e,0),n=l.K3-r;return v(text,n)},isTitleVisible({key:t}){return"comment"!==t||this.itemsHasContent.length>1},readMore(){this.currentVisibleIndex=null}}},w=r("fef85"),y=r("695d8");var C=r.n(y)()(f,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.contentWrapper},[t._l(t.itemsHasContent,function(e,n){return[null===t.currentVisibleIndex||t.currentVisibleIndex>=n?r("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"review-text-"+e.key,expression:"`review-text-${item.key}`",arg:"id"}],key:e.key,class:t.$style.contentBlock},[t.isTitleVisible(e)?r("div",{class:t.$style.contentTitle},[t._v("\n        "+t._s(e.text)+"\n      ")]):t._e(),t._v(" "),r("div",[r("span",{class:t.$style.contentText},[t._v(t._s(t.getVisibleText(e.key,n))+" ")]),t._v(" "),t.currentVisibleIndex===n?r("span",{class:t.$style.readMore,on:{click:t.readMore}},[t._v(t._s(t.localization.contentText.readMore))]):t._e()])]):t._e()]})],2)},[],!1,function(t){this.$style=w.Z.locals||w.Z},null,null).exports},e56c4:(t,e,r)=>{r.d(e,{Z:()=>h});var n=r("aaeb4"),o={name:"ContextQuestions",functional:!0,props:Object.assign({},n.H),render(t,{props:e,data,_v:r,$style:n,listeners:o}){for(var{contextQuestions:c}=e,l=Array.isArray(data.class)?data.class:[data.class||""],d=[],h=function(i){var e=c[i];d.push(t("div",{class:n.question,on:{click:()=>o.clickContextQuestions(i)}},[r(`${e.question}:`),t("span",{class:n.questionAnswer},[r(e.answer)])]))},i=0;i<c.length;i++)h(i);return t("div",{class:l},[...d])}},c=o,l=r("b2c50"),d=r("695d8");var h=r.n(d)()(c,undefined,undefined,!1,function(t){this.$style=l.Z.locals||l.Z},null,null).exports},ff0be:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("9fe99"),c=r("788a9"),l=r("9e781"),d=r("695d8"),h=r.n(d),v=t([c]);function m(t){this.$style=l.Z.locals||l.Z}c=(v.then?(await v)():v)[0];var component=h()(c.Z,o.s,o.x,!1,m,null,null);e.Z=component.exports,n()}catch(f){n(f)}})},"9f5f9":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("8ea24"),c=r("ed66b"),l=r("695d8"),d=r.n(l),h=t([o]);function v(t){this.$style=c.Z.locals||c.Z}o=(h.then?(await h)():h)[0];var component=d()(o.Z,undefined,undefined,!1,v,null,null);e.Z=component.exports,n()}catch(m){n(m)}})},a8bbe:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("98435"),c=r("31acc"),l=r("695d8"),d=r.n(l),h=t([o]);function v(t){this.$style=c.Z.locals||c.Z}o=(h.then?(await h)():h)[0];var component=d()(o.Z,undefined,undefined,!1,v,null,null);e.Z=component.exports,n()}catch(m){n(m)}})},f6963:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("ccaee"),c=r("b8505"),l=r("695d8"),d=r.n(l),h=t([c]);c=(h.then?(await h)():h)[0];var component=d()(c.Z,o.s,o.x,!1,null,null,null);e.Z=component.exports,n()}catch(t){n(t)}})},"0ab26":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("f6d46"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},"936e4":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("7f3d1"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},c9cec:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("de7f8"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},bb0f4:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("31307"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},a81a5:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("ed411"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},"788a9":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("495e8"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},"8ea24":(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("d749a"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},98435:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("b0ace"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},b8505:(t,e,r)=>{r.a(t,async(t,n)=>{try{var o=r("5f41d"),c=t([o]);o=(c.then?(await c)():c)[0],e.Z=o.Z,n()}catch(t){n(t)}})},"472db":(t,e,r)=>{r.d(e,{s:()=>n,x:()=>o});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.creating},[r("DsLoader",{class:t.$style.loader,attrs:{size:500}})],1)},o=[]},87948:(t,e,r)=>{r.d(e,{s:()=>n,x:()=>o});var n=function(){var t,e,r,n,o,c=this,l=c.$createElement,d=c._self._c||l;return c.media&&c.media.length?d("div",{class:[c.$style.mediaPreviews,(t={},t[c.$style.mobile]=c.isMobile,t),(e={},e[c.$style[c.mediaPreviewsMobileClass]]=c.mediaPreviewsMobileClass,e),(r={},r[c.$style.withVideo]=c.videos&&c.videos.length,r),(n={},n[c.$style.galleryTheme]=c.isGallery,n)]},[d("div",{class:[c.$style.mediaWrapper,(o={},o[c.$style[c.gridClass]]=c.gridClass,o)]},c._l(c.media.slice(0,c.maxCount),function(t,e){var r;return d("button",{key:t.url,class:c.$style.mediaItem,attrs:{type:"button","aria-label":"Открыть галерею"},on:{click:function(e){c.isGallery?c.openMediaInside(t):c.openMedia(t)}}},[d("DsImage",{directives:[{name:"show",rawName:"v-show",value:!t.error,expression:"!item.error"}],class:[c.$style.image,(r={},r[c.$style.modAlly]=c.isAccessibilityMode,r)],attrs:{lazy:"","use-cdn":"",size:c.isMobile&&!c.isAccessibilityMode?200:500,src:t.url},on:{error:function(e){return c.handleError(t)}}}),c._v(" "),t.error?d("div",{class:c.$style.brokenVideo},[d("IAttached")],1):c._e(),c._v(" "),t.type===c.MEDIA_TYPES.VIDEO?d("div",[d("IPlay",{class:c.$style.playIcon}),c._v(" "),t.duration?d("DsBadge",{class:c.$style.videoDuration,attrs:{label:t.duration,theme:"custom","label-color":"layerFloor1","background-color":"clearDarkKey600"}}):c._e()],1):c._e(),c._v(" "),e===c.maxCount-1&&c.media.length>c.maxCount?d("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"photosPreviewAdditionalCount",expression:"'photosPreviewAdditionalCount'",arg:"id"}],class:c.$style.overflow},[c._v("\n        +"+c._s(c.media.length-c.maxCount)+"\n      ")]):c._e()],1)}),0)]):c._e()},o=[]},"4e92f":(t,e,r)=>{r.d(e,{s:()=>n,x:()=>o});var n=function(){var t,e,r=this,n=r.$createElement,o=r._self._c||n;return o("div",{class:(t={},t[r.$style.mobile]=r.isMobile||r.isGallery,t)},[r.commentsList.length?o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"review-comments-list",expression:"'review-comments-list'",arg:"id"}],class:[r.$style.commentsList,(e={},e[r.$style.gallery]=r.isGallery,e)]},r._l(r.commentsList,function(t,e){return o("Comment",r._g(r._b({directives:[{name:"detect-viewport",rawName:"v-detect-viewport",value:r.detectViewportSettings(t),expression:"detectViewportSettings(comment)"}],key:t.id,class:r.$style.comment,attrs:{index:e}},"Comment",r.getCommentsProps(r.review,t),!1),r.getCommentListeners))}),1):r._e(),r._v(" "),r.total>r.commentsList.length&&(!r.hideFirstCommentView||r.commentsList.length)&&!r.isCommentsLoading?o("OzButton",{class:r.$style.showMoreComments,attrs:{"test-info":{automatizationId:"review-comments-show-more"},color:"",type:"button",theme:"empty"},on:{click:r.loadMoreComments},scopedSlots:r._u([{key:"content",fn:function(){var t;return[o("div",{class:r.$style.showMoreButtonSlot},[o("div",{class:[r.$style.showMoreCommentsIconWrapper,(t={},t[r.$style.showMoreCommentsLoading]=r.isCommentsLoading,t)]},[r.isCommentsLoading?o("DsLoader"):o("PlusIcon")],1),r._v(" "),o("span",[r._v(r._s(r.localization.commentsList.buttonMore))])])]},proxy:!0}],null,!1,313515025)}):r._e(),r._v(" "),o("div",{class:r.$style.loaderWrapper},[r.isCommentsLoading&&r.commentsLoadingReview===r.review.uuid?o("DsLoader",{attrs:{size:"500"}}):r._e()],1),r._v(" "),r.newCreatedCommentsList.length?o("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"review-comments-list-new",expression:"'review-comments-list-new'",arg:"id"}],class:r.$style.commentsList},r._l(r.newCreatedCommentsList,function(t,e){return o("Comment",r._g(r._b({key:t.id,class:r.$style.comment,attrs:{index:e}},"Comment",r.getCommentsProps(r.review,t),!1),r.getCommentListeners))}),1):r._e()],1)},o=[]},"9fe99":(t,e,r)=>{r.d(e,{s:()=>n,x:()=>o});var n=function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return n("div",{class:[e.$style.footerWrapper,(t={},t[e.$style.mobile]=e.isMobile||e.isGallery,t)]},[n("div",{class:e.$style.footer},[n("div",{class:e.$style.footerItem},[e.showUsefullnes?n("Usefulness",{class:e.$style.buttonUsefulness,attrs:{type:e.entityType===e.ENTITY_TYPES.COMMENT?"icon":"text",actions:e.usefulnessActions,"is-user-logged-in":e.isUserRecord||e.isVotable,"text-title":e.textByEntityType[e.entityType]},on:{doAction:e.vote,showLogin:e.showModal}},[e.showCommentAddButton?n("DsLinkButton",{class:e.$style.buttonReply,attrs:{"test-info":{automatizationId:"review-reply"},size:"400",title:e.localization.review.answer},on:{click:e.onWriteComment}}):e._e()],1):e._e(),e._v(" "),e.showCommentAddButton&&!e.showUsefullnes?n("DsLinkButton",{class:e.$style.buttonReply,attrs:{"test-info":{automatizationId:"review-reply"},size:"400",title:e.localization.review.answer},on:{click:e.onWriteComment}}):e._e(),e._v(" "),e.commentsTotalCount&&e.hideFirstCommentView?n("DsLinkButton",{class:e.$style.buttonReply,attrs:{"test-info":{automatizationId:"show-comments"},size:"400",title:e.showCommentsButtonText},on:{click:e.onShowComments}}):e._e()],1),e._v(" "),n("div",{class:e.$style.footerItem},[!e.isEditable||e.isMobile||e.isGallery?e._e():n("DsButton",{class:e.$style.buttonEdit,attrs:{size:"400",title:e.localization.review.editButton,"test-info":{automatizationId:"edit-review-button"}},on:{click:e.onEdit}}),e._v(" "),e.isEditable&&(e.isMobile||e.isGallery)?n("DsIconButton",{class:e.$style.buttonEdit,attrs:{size:"400",theme:"custom",icon:e.editIcon,"icon-color":"graphicLightKey","background-color":"bgActionPrimary","test-info":{automatizationId:"edit-review-button"}},on:{click:e.onEdit}}):e._e(),e._v(" "),e.isReportable&&1===e.additionalActions.length&&!e.isAbuseReported?n("DsIconButton",{attrs:{size:"400",icon:e.reportIcon,"test-info":{automatizationId:"authorlist-report-review-button"},theme:"actionSecondary"},on:{click:function(t){return e.additionalActionsListeners(e.additionalActionsReport)}}}):e._e(),e._v(" "),e.isDeletable&&1===e.additionalActions.length?n("DsIconButton",{attrs:{size:"400",icon:e.deleteIcon,"test-info":{automatizationId:"authorlist-delete-review-button"},theme:"actionSecondary"},on:{click:function(t){return e.additionalActionsListeners(e.additionalActionsDelete)}}}):e._e(),e._v(" "),e.additionalActions.length>1||e.isOnlyCopyUrlAction?n("AdditionalActionsButton",{directives:[{name:"qa",rawName:"v-qa:id",value:"footerAdditionalButton",expression:"'footerAdditionalButton'",arg:"id"}],attrs:{actions:e.additionalActions,"is-highlight":e.isEditable},on:{doAction:e.additionalActionsListeners}}):e._e()],1)]),e._v(" "),n("OzTransition",[e.reportAbuseVisible&&!e.isAbuseReported?n("AbuseReport",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onReportAbuseClose,expression:"onReportAbuseClose"}],class:e.$style.confirmation,attrs:{"entity-type":e.entityType,"abuse-report":e.getAbuseReports(e.entityType),creating:e.creatingAbuseReport},on:{cancel:e.onReportAbuseClose,create:e.onReportAbuseReported}}):e._e(),e._v(" "),e.deleteReviewVisible[e.uuid]?n("Confirmation",{class:e.$style.confirmation,attrs:{"confirm-text":e.confirmText,"cancel-text":e.cancelText,text:e.localization.review.confirmationDelete+" "+e.textByEntityType[e.entityType]+"?","test-info-confirm":"authorlist-deletion-confirm-button"},on:{cancel:e.closeConfirmation,confirm:e.onDelete}}):e._e()],1),e._v(" "),n("OzTransition",[(e.deleteError||e.creatingAbuseReportError)&&(e.reportAbuseVisible||e.deleteReviewVisible[e.uuid])&&e.needShowError?n("Notification",{class:e.$style.notification,attrs:{notification:e.notificationError}}):e._e()],1)],1)},o=[]},ccaee:(t,e,r)=>{r.d(e,{s:()=>n,x:()=>o});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.activeTranslate?r("ButtonAtom",t._b({attrs:{fill:t.isMobile},on:{click:t.getReviewContentTranslate}},"ButtonAtom",t.activeTranslate,!1)):t._e()},o=[]}}]);