(self.webpackChunkDetached_reviews=self.webpackChunkDetached_reviews||[]).push([["rp-all-list-photos-v2"],{"684d1":(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{var o=r("ce27b"),c=r.n(o),d=r("c7b40"),l=r.n(d),v=r("16477"),h=r("227f1"),f=r("79a44"),m=r("69aed"),y=r("dbc40"),w=r("7fce6"),_=r.n(w),C=r("abb9e"),I=r.n(C),S=r("15108"),P=r("14217"),M=r("828a6"),x=r("225da"),V=e([h]);h=(V.then?(await V)():V)[0];var{VideoIdentifiersInstance:k,PlayIcon:A}=((e,t)=>{var r=((t=class extends m.AbstractStoreService{getInitialState(){return{mobReviewGallery:""}}setVideoIdentifier(e,t){this.pushState(r=>{r[e]=t})}}).__serviceName="AbstractStoreService_VideoIdentifiersInstance",t),n={functional:!0,name:"icLCirclePlay",meta:{width:32,height:32,viewBox:"0 0 32 32"},render:(e,t)=>e("svg",Object.assign(Object.assign({},t.data),{},{attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},t.data.attrs),domProps:{innerHTML:'<path fill="currentColor" d="M14.286 11c.229 0 .458.06.661.178l6.429 3.75c.387.226.624.633.624 1.072s-.237.846-.624 1.072l-6.429 3.75a1.31 1.31 0 0 1-1.295.016A1.24 1.24 0 0 1 13 19.75v-7.5c0-.45.25-.866.652-1.088.197-.108.415-.162.634-.162"/><path fill="currentColor" d="M1 16C1 7.716 7.716 1 16 1s15 6.716 15 15-6.716 15-15 15S1 24.284 1 16M16 3C8.82 3 3 8.82 3 16s5.82 13 13 13 13-5.82 13-13S23.18 3 16 3"/>'}}))};return e.VideoIdentifiersInstance=r,e.PlayIcon=n,e})({});t.Z=I().extend({name:"WidgetListPhotos",components:{DsImage:h.DsImage,PlayIcon:A},mixins:[_(),S.Z,y.Z],data(){return{MEDIA_TYPES:P.w_,visibilitySettings:{once:!0,callback:this.onViewWidget},notSubscribeVariantMode:!this.paramVariantModeEnabled}},computed:{defaultMediaCount(){return c()(this.widgetState,"lmtParams.defaultMediaCount",6)},videoUrlsToPrefetch(){var e=[];return this.widgetState.mediaContent?(this.widgetState.mediaContent.forEach(t=>{"VIDEO"===t.type&&t.videoUrl&&e.push(t.videoUrl)}),this.videoPrefetchCount&&e.splice(this.videoPrefetchCount),e):e}},mounted(){var e=c()(this.widgetState,"lmtParams.paramVariantModeEnabled",!1);this.notSubscribeVariantMode=!e},methods:{getMediaType(e){var t;return this.widgetState.mediaContent&&(t=this.widgetState.mediaContent.find(({galleryParams:t})=>t===e.galleryParams)),t?t.type:null},async onMediaItemClick(e,t=!1){if(this.sendTokenAnalytics((e.cellTrackingInfo||{})[v.EActionTypes.CLICK_ACTION]),e.galleryParams){if((t?this.getMediaType(e):e.type)===P.w_.VIDEO){var r=l()();f.registry.use(k).setVideoIdentifier("mobReviewGallery",r),window.dispatchEvent(new CustomEvent("reviewsClickOpenModal",{detail:{videoIdentifier:r,timestamp:performance.now()}}))}await this.$composerRouter.replace((0,M.q)(this.$composerRouter.current,e.galleryParams),{silent:!0})}},onViewWidget(){this.sendTokenAnalytics(v.EActionTypes.VIEW_ACTION)},sendTokenAnalytics:x.A}}),n()}catch(e){n(e)}})},dbc40:(e,t,r)=>{"use strict";var n=r("79a44"),o=r("ecabc"),c=r("69aed"),{PrefetchVideoSwMixin:d,ProductType:l}=((e,t)=>{var r=(e=>(e.OTHER="other",e.REVIEW_PREVIEW="review-preview",e.TILE="tile",e.ADV="advertisement",e.REVIEW="review",e.GALLERY="gallery",e))(r||{}),d={gallery:"cdn_video_pdp_hostname",tile:"cdn_video_tile_hostname",review:"cdn_video_review_hostname","review-preview":"cdn_video_review_hostname",other:"cdn_video_hostname"};function l(e,t,r){try{var n=e[d[r]]||e[d.other];if(n){var o=new URL(t);return o.hostname=n,o.toString()}return t}catch(e){}return t}var v=((t=class extends c.AbstractStoreService{getInitialState(){return{videos:{}}}setVideoData(e,t){this.pushState(r=>{r.videos[e]=t})}}).__serviceName="AbstractStoreService_ServiceWorkerInstance",t),h={methods:{async prefetchVideoChunksSW(e,t,r){try{if(!e||!t)return;var d=n.registry.use(v).state._get("videos");for(var h of e){if(d[h])return;var f=(0,c.createVideoPrefetchUrl)(h),[m,y]=await Promise.all([(0,c.getVideoDuration)(h),fetch(f,{method:"HEAD"})]),w="";if(y&&y.ok){var _=y.headers.get("content-type");_&&_.includes("codecs")&&(w=_)}if(!w)return;var C={duration:m,contentType:w};n.registry.use(v).setVideoData(h,C);var I=l((0,o.useComposerStore)(this).state._get("resolveParams"),f,t);(0,c.sendMessageToSW)({action:"CACHE_VIDEO_CHUNK",url:I+`&from=0&dur=${r}`})}}catch(e){}}}};return e.PrefetchVideoSwMixin=h,e.ProductType=r,e})({});t.Z={mixins:[d,(0,o.composerStateMixin)({enableVideoPrefetchSW:e=>e._get("experimentsConfig.enableVideoPrefetchSW",!1),prefetchListPhotosVideoSW:e=>e._get("experimentsConfig.prefetchListPhotosVideoSW",!1)})],beforeMount(){this.chunkSize=Number(JSON.parse(this.$config.get("videoChunkSizes")||"{}")[l.REVIEW]),this.videoPrefetchCount=Number(JSON.parse(this.$config.get("videoPrefetchCount")||"{}")[l.REVIEW]),this.videoPrefetchEnabled=this.enableVideoPrefetchSW&&this.prefetchListPhotosVideoSW},mounted(){this.videoPrefetchEnabled&&this.chunkSize&&requestIdleCallback(()=>{this.prefetchVideoChunksSW(this.videoUrlsToPrefetch,l.REVIEW,this.chunkSize)})}}},"8ec5d":e=>{for(var t=[],i=0;i<256;++i)t[i]=(i+256).toString(16).substr(1);e.exports=function(e,r){var i=r||0,n=t;return[n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]]].join("")}},"9f430":e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,i=0;i<16;i++)3&i||(e=4294967296*Math.random()),n[i]=e>>>((3&i)<<3)&255;return n}}},c7b40:(e,t,r)=>{var n=r("9f430"),o=r("8ec5d");e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var d=0;d<16;++d)t[i+d]=c[d];return t||o(c)}},"2978f":(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t);var o=r("8e26d"),c=r("0c8ce"),d=r("612bd"),l=r("695d8"),v=r.n(l),h=e([c]);function f(e){this.$style=d.Z.locals||d.Z}c=(h.then?(await h)():h)[0];var component=v()(c.Z,o.s,o.x,!1,f,null,null);t.default=component.exports,n()}catch(m){n(m)}})},"612bd":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var n={listPhotos:"pt0_30",mediaList:"p0t_30",mediaItem:"tp0_30",image:"t0p_30",videoIcon:"pt1_30",overloadMediaList:"p1t_30",mobile:"tp1_30"}},"0c8ce":(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{var o=r("684d1"),c=e([o]);o=(c.then?(await c)():c)[0],t.Z=o.Z,n()}catch(e){n(e)}})},"8e26d":(e,t,r)=>{"use strict";r.d(t,{s:()=>n,x:()=>o});var n=function(){var e,t=this,r=t.$createElement,n=t._self._c||r;return t.showWidget?n("div",{directives:[{name:"qa",rawName:"v-qa:id",value:"web-list-photos",expression:"'web-list-photos'",arg:"id"},{name:"detect-viewport",rawName:"v-detect-viewport",value:t.visibilitySettings,expression:"visibilitySettings"}],class:[t.$style.listPhotos,(e={},e[t.$style.mobile]=t.isMobile,e)]},[t.widgetState.mediaContent&&t.widgetState.mediaContent.length?n("div",{class:t.$style.mediaList,style:"grid-template-columns: repeat("+t.defaultMediaCount+", minmax(56px,90px));"},t._l(t.widgetState.mediaContent.slice(0,t.defaultMediaCount),function(e,r){return n("button",{key:r,class:t.$style.mediaItem,attrs:{type:"button"},on:{click:function(r){return t.onMediaItemClick(e)}}},[n("DsImage",{class:t.$style.image,attrs:{lazy:"","use-cdn":"",size:t.isMobile?128:180,alt:e.alt,src:e.previewUrl,"test-info":{automatizationId:"user-photo-"+(r+1)}}}),t._v(" "),e.type===t.MEDIA_TYPES.VIDEO?n("PlayIcon",{class:t.$style.videoIcon}):t._e(),t._v(" "),t.widgetState.moreMedia&&r===t.defaultMediaCount-1&&t.widgetState.mediaContent.length>=t.defaultMediaCount?n("div",{class:t.$style.overloadMediaList,on:{click:function(e){return e.stopPropagation(),t.onMediaItemClick(t.widgetState.moreMedia,!0)}}},[t._v("\n        +"+t._s(t.widgetState.moreMedia.mediaCount)+"\n      ")]):t._e()],1)}),0):t._e()]):t._e()},o=[]}}]);