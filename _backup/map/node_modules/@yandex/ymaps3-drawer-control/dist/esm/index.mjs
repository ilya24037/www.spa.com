var t={d:(i,e)=>{for(var n in e)t.o(e,n)&&!t.o(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:e[n]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},i={};function e(t){return t.ignorePositions.includes(t.currentPosition)?t.ignorePositionValue:void 0===t.originalValue?t.defaultValue:"number"==typeof(i=t.originalValue)?`${i}px`:i;var i}t.d(i,{h:()=>_});const n={props:{position:{type:String,required:!1},transitionDuration:{type:[Object,Number],required:!1},open:{type:Boolean,required:!0},width:{type:[String,Number],required:!1},maxWidth:{type:[String,Number],required:!1},minWidth:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},maxHeight:{type:[String,Number],required:!1},minHeight:{type:[String,Number],required:!1},verticalTriggerPosition:{type:String,required:!1},horizontalTriggerPosition:{type:String,required:!1},onOpenChange:{type:Function,required:!1},content:{type:Function,required:!0}}};class o extends ymaps3.YMapComplexEntity{constructor(){super(...arguments),this._onControlClick=()=>{var t,i;null===(i=(t=this._props).onOpenChange)||void 0===i||i.call(t,this._props.open)}}_onAttach(){this._buttonContainer=document.createElement("div"),this._buttonContainer.classList.add("ymaps3--drawer-control-button",this._props.position,s(this._props.horizontalTriggerPosition),r(this._props.verticalTriggerPosition)),this._buttonContainer.addEventListener("click",this._onControlClick),this._iconElement=document.createElement("div"),this._iconElement.classList.add("ymaps3--drawer-control-button-icon",this._props.position),this._iconElement.classList.toggle("open",this._props.open),this._buttonContainer.appendChild(this._iconElement),ymaps3.useDomContext(this,this._buttonContainer,null)}_onUpdate(t,i){void 0!==t.position&&(this._buttonContainer.classList.replace(i.position,t.position),this._iconElement.classList.replace(i.position,t.position)),void 0!==t.verticalTriggerPosition&&this._buttonContainer.classList.replace(r(i.verticalTriggerPosition),r(t.verticalTriggerPosition)),void 0!==t.horizontalTriggerPosition&&this._buttonContainer.classList.replace(s(i.horizontalTriggerPosition),s(t.horizontalTriggerPosition)),void 0!==t.open&&this._iconElement.classList.toggle("open",t.open)}_onDetach(){this._buttonContainer.removeEventListener("click",this._onControlClick)}}function r(t){return`vtp-${t}`}function s(t){return`htp-${t}`}class a extends ymaps3.YMapComplexEntity{_onAttach(){this._containerElement=document.createElement("div"),this._containerElement.classList.add("ymaps3--drawer-control-content"),this._content=this._props.content(),this._attachContent(),this._detachDom=ymaps3.useDomContext(this,this._containerElement,null)}_onUpdate(t){void 0!==t.content&&(this._detachContent(),this._content=this._props.content(),this._attachContent())}_onDetach(){this._detachContent(),this._detachDom(),this._detachDom=void 0}_attachContent(){this._content instanceof ymaps3.YMapEntity?this.addChild(this._content):this._containerElement.appendChild(this._content)}_detachContent(){this._content instanceof ymaps3.YMapEntity?this.removeChild(this._content):this._containerElement.removeChild(this._content)}}var h,p,l;const c=["top","bottom"],d=["left","right"],u=Object.freeze({position:"left",transitionDuration:500,verticalTriggerPosition:"center",horizontalTriggerPosition:"center"});class _ extends ymaps3.YMapComplexEntity{get _transitionDuration(){const{transitionDuration:t,open:i}=this._props;return"number"==typeof t?t:i?t.open:t.close}get _width(){return e({originalValue:this._props.width,currentPosition:this._props.position,ignorePositions:c,ignorePositionValue:"100%",defaultValue:""})}get _minWidth(){return e({originalValue:this._props.minWidth,currentPosition:this._props.position,ignorePositions:c,ignorePositionValue:"",defaultValue:""})}get _maxWidth(){return e({originalValue:this._props.maxWidth,currentPosition:this._props.position,ignorePositions:c,ignorePositionValue:"",defaultValue:""})}get _height(){return e({originalValue:this._props.height,currentPosition:this._props.position,ignorePositions:d,ignorePositionValue:"100%",defaultValue:""})}get _minHeight(){return e({originalValue:this._props.minHeight,currentPosition:this._props.position,ignorePositions:d,ignorePositionValue:"",defaultValue:""})}get _maxHeight(){return e({originalValue:this._props.maxHeight,currentPosition:this._props.position,ignorePositions:d,ignorePositionValue:"",defaultValue:""})}constructor(t){super(t)}_onAttach(){this._drawerContainer=document.createElement("div"),this._drawerContainer.classList.add("ymaps3--drawer-control-container",this._props.position),this._drawerContainer.classList.toggle("open",this._props.open),this._updateTransitionDuration(),this._updateSizes(),this.root.container.appendChild(this._drawerContainer),ymaps3.useDomContext(this,this._drawerContainer,this._drawerContainer),this._contentEntity=new a({content:this._props.content}),this.addChild(this._contentEntity),this._buttonEntity=new o({open:this._props.open,position:this._props.position,onOpenChange:this._props.onOpenChange,verticalTriggerPosition:this._props.verticalTriggerPosition,horizontalTriggerPosition:this._props.horizontalTriggerPosition}),this.addChild(this._buttonEntity)}_onUpdate(t,i){void 0!==t.position&&(this._updateTransitionDuration(!0),this._drawerContainer.classList.replace(i.position,t.position),this._updateSizes(),this._buttonEntity.update({position:t.position})),void 0!==t.open&&(this._updateTransitionDuration(),this._drawerContainer.classList.toggle("open",t.open),this._buttonEntity.update({open:t.open})),void 0!==t.transitionDuration&&this._updateTransitionDuration(),void 0!==t.content&&this._contentEntity.update({content:t.content}),this._props.width!==i.width&&(this._drawerContainer.style.width=this._width),this._props.minWidth!==i.minWidth&&(this._drawerContainer.style.minWidth=this._minWidth),this._props.maxWidth!==i.maxWidth&&(this._drawerContainer.style.maxWidth=this._maxWidth),this._props.height!==i.height&&(this._drawerContainer.style.height=this._height),this._props.minHeight!==i.minHeight&&(this._drawerContainer.style.minHeight=this._minHeight),this._props.maxHeight!==i.maxHeight&&(this._drawerContainer.style.maxHeight=this._maxHeight),void 0!==t.verticalTriggerPosition&&this._buttonEntity.update({verticalTriggerPosition:t.verticalTriggerPosition}),void 0!==t.horizontalTriggerPosition&&this._buttonEntity.update({horizontalTriggerPosition:t.horizontalTriggerPosition})}_onDetach(){this.removeChild(this._contentEntity),this.removeChild(this._buttonEntity)}_updateTransitionDuration(t=!1){this._drawerContainer.style.transition=t?"none":`transform ${this._transitionDuration}ms ease-in-out`}_updateSizes(){this._drawerContainer.style.width=this._width,this._drawerContainer.style.minWidth=this._minWidth,this._drawerContainer.style.maxWidth=this._maxWidth,this._drawerContainer.style.height=this._height,this._drawerContainer.style.minHeight=this._minHeight,this._drawerContainer.style.maxHeight=this._maxHeight}}h=ymaps3.overrideKeyReactify,p=ymaps3.overrideKeyVuefy,l=ymaps3.optionsKeyVuefy,_.defaultProps=u,_[h]=(t,{reactify:i,React:e,ReactDOM:n})=>{const o=i.entity(t);return e.forwardRef(((t,i)=>{const[r]=e.useState(document.createElement("div")),[s,a]=e.useState(),h=e.useMemo((()=>(a(t.content()),()=>r)),[t.content,r]);return e.createElement(e.Fragment,null,e.createElement(o,Object.assign({},t,{content:h,ref:i})),n.createPortal(s,r))}))},_[p]=(t,i,{vuefy:e,Vue:n})=>{const o=e.entity(t),{content:r}=i,s=function(t,i){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)i.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(e[n[o]]=t[n[o]])}return e}(i,["content"]),a=n.defineComponent({props:s,name:"YMapDrawerControl",components:{YMapDrawerControlVuefied:o},slots:Object,setup(t,{slots:i,expose:e}){const r=n.ref(null),s=document.createElement("div"),a=n.ref(null),h=n.computed((()=>{var t;return null===(t=a.value)||void 0===t?void 0:t.entity})),p=n.computed((()=>{var t;return r.value=null===(t=i.content)||void 0===t?void 0:t.call(i),()=>s}));return e({entity:h}),()=>n.h(o,Object.assign(Object.assign({},t),{content:p.value,ref:a}),(()=>n.h(n.Teleport,{to:s},[r.value])))}});return a},_[l]=n;var g=i.h;export{g as YMapDrawerControl};