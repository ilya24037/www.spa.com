# üõ£Ô∏è RouteEditor - –†–µ–¥–∞–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤

–ú–æ—â–Ω—ã–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è Yandex Maps —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–≤—ã—Ö —Ç–æ—á–µ–∫, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üìã –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏** - –î–æ 8 —Ç–æ—á–µ–∫ —Å drag & drop
- ‚úÖ **4 —Ä–µ–∂–∏–º–∞ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è** - –ê–≤—Ç–æ–º–æ–±–∏–ª—å, –ø–µ—à–∫–æ–º, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –≤–µ–ª–æ—Å–∏–ø–µ–¥
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∫—Ä–∞—Ç—á–∞–π—à–µ–≥–æ –ø—É—Ç–∏
- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–µ, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ç–æ—á–µ–∫
- ‚úÖ **TypeScript** - –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –±–µ–∑ any
- ‚úÖ **Vue 3 –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –ì–æ—Ç–æ–≤—ã–π Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å Composition API
- ‚úÖ **v-model –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è
- ‚úÖ **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã** - –ù–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—É—Ç–∏
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞** - –ò–∑–±–µ–≥–∞—Ç—å –ø–ª–∞—Ç–Ω—ã—Ö –¥–æ—Ä–æ–≥, –∞–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª–µ–π
- ‚úÖ **–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** - –ü–æ—à–∞–≥–æ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **Production-ready** - –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ edge cases

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Vanilla JavaScript

```javascript
import RouteEditor from './RouteEditor.js'
import YMapsCore from '../../core/YMapsCore.js'

async function initMap() {
  // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É
  const mapsCore = new YMapsCore({ apiKey: 'YOUR_API_KEY' })
  await mapsCore.loadAPI()
  const map = await mapsCore.createMap('map')
  
  // –°–æ–∑–¥–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤
  const routeEditor = new RouteEditor({
    position: 'topLeft',
    travelModes: ['driving', 'walking', 'transit'],
    defaultTravelMode: 'driving',
    maxWaypoints: 6,
    enableOptimization: true,
    enableDragDrop: true
  })
  
  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç—É
  await routeEditor.addToMap(map)
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏
  await routeEditor.setWaypoint(0, '–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å')
  await routeEditor.setWaypoint(1, '–ú–æ—Å–∫–≤–∞, –¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å')
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  routeEditor.on('routecalculated', (event) => {
    console.log(`–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ ${event.routes.length} –º–∞—Ä—à—Ä—É—Ç–æ–≤`)
    event.routes.forEach((route, index) => {
      console.log(`–ú–∞—Ä—à—Ä—É—Ç ${index + 1}: ${route.distance}–º, ${route.duration}—Å`)
    })
  })
  
  routeEditor.on('waypointset', (event) => {
    console.log(`–¢–æ—á–∫–∞ ${event.index}: ${event.waypoint.address}`)
  })
}
```

### Vue 3 Composition API

```vue
<template>
  <div id="map" style="height: 500px"></div>
  
  <!-- RouteEditor —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π -->
  <RouteEditorVue
    :map="map"
    v-model:travel-mode="currentTravelMode"
    :max-waypoints="8"
    :enable-optimization="true"
    :show-alternatives="true"
    :avoid-tolls="avoidTolls"
    :avoid-highways="avoidHighways"
    :show-external-waypoints="true"
    :show-external-routes="true"
    :show-instructions="true"
    :show-stats="true"
    position="topRight"
    @routecalculated="onRouteCalculated"
    @waypointset="onWaypointSet"
    @optimize="onRouteOptimized"
    @ready="onEditorReady"
  />
  
  <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
  <div class="route-controls">
    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–º</h3>
    
    <div class="control-group">
      <label>
        <input 
          v-model="avoidTolls" 
          type="checkbox"
        >
        –ò–∑–±–µ–≥–∞—Ç—å –ø–ª–∞—Ç–Ω—ã—Ö –¥–æ—Ä–æ–≥
      </label>
      <label>
        <input 
          v-model="avoidHighways" 
          type="checkbox"
        >
        –ò–∑–±–µ–≥–∞—Ç—å –∞–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª–µ–π
      </label>
    </div>
    
    <div class="route-actions">
      <button @click="calculateRoute" :disabled="isCalculating">
        {{ isCalculating ? '–†–∞—Å—á–µ—Ç...' : '–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç' }}
      </button>
      <button @click="optimizeRoute" :disabled="!canOptimize">
        –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
      </button>
      <button @click="clearRoute">
        –û—á–∏—Å—Ç–∏—Ç—å
      </button>
    </div>
    
    <!-- –≠–∫—Å–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç–∞ -->
    <div v-if="activeRoute" class="route-export">
      <button @click="exportRoute('gpx')">–≠–∫—Å–ø–æ—Ä—Ç GPX</button>
      <button @click="exportRoute('kml')">–≠–∫—Å–ø–æ—Ä—Ç KML</button>
    </div>
  </div>
  
  <!-- –°–≤–æ–¥–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ -->
  <div v-if="activeRoute" class="route-summary">
    <h4>{{ activeRoute.description || '–¢–µ–∫—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç' }}</h4>
    <div class="summary-stats">
      <div class="stat">
        <span class="stat-label">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ:</span>
        <span class="stat-value">{{ formatDistance(activeRoute.distance) }}</span>
      </div>
      <div class="stat">
        <span class="stat-label">–í—Ä–µ–º—è –≤ –ø—É—Ç–∏:</span>
        <span class="stat-value">{{ formatDuration(activeRoute.duration) }}</span>
      </div>
      <div class="stat">
        <span class="stat-label">–ü—É—Ç–µ–≤—ã—Ö —Ç–æ—á–µ–∫:</span>
        <span class="stat-value">{{ activeRoute.waypoints.length }}</span>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import YMapsCore from '@/ymaps-components/core/YMapsCore'
import RouteEditorVue from '@/ymaps-components/controls/RouteEditor/RouteEditor.vue'
import type { Route, Waypoint } from '@/ymaps-components/controls/RouteEditor/RouteEditor.d.ts'

const map = ref(null)
const routeEditor = ref()
const currentTravelMode = ref('driving')
const avoidTolls = ref(false)
const avoidHighways = ref(false)
const activeRoute = ref<Route | null>(null)
const isCalculating = ref(false)

const canOptimize = computed(() => {
  return routeEditor.value?.getWaypoints().length >= 3
})

onMounted(async () => {
  const mapsCore = new YMapsCore({ apiKey: 'YOUR_KEY' })
  await mapsCore.loadAPI()
  map.value = await mapsCore.createMap('map', {
    center: [55.753994, 37.622093],
    zoom: 11
  })
})

const onRouteCalculated = (event) => {
  console.log('–ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã:', event.routes)
  activeRoute.value = event.routes[event.activeIndex] || null
}

const onWaypointSet = (event) => {
  console.log(`–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ç–æ—á–∫–∞ ${event.index}: ${event.waypoint.address}`)
}

const onRouteOptimized = (event) => {
  console.log('–ú–∞—Ä—à—Ä—É—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω:', event.waypoints)
}

const onEditorReady = (editor) => {
  console.log('RouteEditor –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é')
  routeEditor.value = editor
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏
  editor.setWaypoint(0, '–ú–æ—Å–∫–≤–∞, –ö—Ä–µ–º–ª—å')
  editor.setWaypoint(1, '–ú–æ—Å–∫–≤–∞, –ú–ì–£')
}

const calculateRoute = async () => {
  if (!routeEditor.value) return
  
  isCalculating.value = true
  try {
    const routes = await routeEditor.value.calculateRoute()
    activeRoute.value = routes[0] || null
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞:', error)
  } finally {
    isCalculating.value = false
  }
}

const optimizeRoute = async () => {
  if (!routeEditor.value) return
  
  try {
    await routeEditor.value.optimizeRoute()
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:', error)
  }
}

const clearRoute = () => {
  if (routeEditor.value) {
    routeEditor.value.clear()
    activeRoute.value = null
  }
}

const exportRoute = (format: 'gpx' | 'kml') => {
  if (!activeRoute.value) return
  
  // –õ–æ–≥–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞
  console.log(`–≠–∫—Å–ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ${format.toUpperCase()}`)
  
  // –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è GPX
  if (format === 'gpx') {
    const gpxData = createGPX(activeRoute.value)
    downloadFile(gpxData, 'route.gpx', 'application/gpx+xml')
  }
}

const formatDistance = (meters: number): string => {
  return meters < 1000 
    ? `${Math.round(meters)} –º` 
    : `${(meters / 1000).toFixed(1)} –∫–º`
}

const formatDuration = (seconds: number): string => {
  const hours = Math.floor(seconds / 3600)
  const minutes = Math.floor((seconds % 3600) / 60)
  return hours > 0 ? `${hours} —á ${minutes} –º–∏–Ω` : `${minutes} –º–∏–Ω`
}
</script>
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–ø—Ü–∏–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (JavaScript)

```typescript
interface RouteEditorOptions {
  // –†–µ–∂–∏–º—ã –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è
  travelModes?: TravelMode[]                    // –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã
  defaultTravelMode?: TravelMode               // –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  
  // –ü—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏
  maxWaypoints?: number                        // –ú–∞–∫—Å–∏–º—É–º —Ç–æ—á–µ–∫ (2-23)
  enableDragDrop?: boolean                     // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ç–æ—á–µ–∫
  enableOptimization?: boolean                 // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞
  
  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  showDistanceTime?: boolean                   // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—Å—Ç./–≤—Ä–µ–º—è
  showAlternatives?: boolean                   // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
  
  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
  avoidTolls?: boolean                         // –ò–∑–±–µ–≥–∞—Ç—å –ø–ª–∞—Ç–Ω—ã—Ö –¥–æ—Ä–æ–≥
  avoidHighways?: boolean                      // –ò–∑–±–µ–≥–∞—Ç—å –∞–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª–µ–π
  avoidFerries?: boolean                       // –ò–∑–±–µ–≥–∞—Ç—å –ø–∞—Ä–æ–º–æ–≤
  
  // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
  units?: 'metric' | 'imperial'                // –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
  language?: string                            // –Ø–∑—ã–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
  
  // –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
  waypointRenderer?: (waypoint, index) => HTMLElement
  routeRenderer?: (route) => HTMLElement
  instructionsRenderer?: (instructions) => HTMLElement
  
  // –ë–∞–∑–æ–≤—ã–µ –æ–ø—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∞
  position?: string                            // –ü–æ–∑–∏—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ
  visible?: boolean                            // –í–∏–¥–∏–º–æ—Å—Ç—å
  enabled?: boolean                            // –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  zIndex?: number                              // Z-index
  margin?: object                              // –û—Ç—Å—Ç—É–ø—ã
}
```

### Props Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```typescript
interface Props {
  map?: any                                    // –≠–∫–∑–µ–º–ø–ª—è—Ä –∫–∞—Ä—Ç—ã
  travelMode?: TravelMode                      // –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è (v-model)
  travelModes?: TravelMode[]                   // –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã
  defaultTravelMode?: TravelMode               // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
  maxWaypoints?: number                        // –ú–∞–∫—Å–∏–º—É–º —Ç–æ—á–µ–∫
  enableDragDrop?: boolean                     // Drag & drop
  enableOptimization?: boolean                 // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  showDistanceTime?: boolean                   // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è
  showAlternatives?: boolean                   // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
  avoidTolls?: boolean                         // –ò–∑–±–µ–≥–∞—Ç—å –ø–ª–∞—Ç–Ω—ã—Ö
  avoidHighways?: boolean                      // –ò–∑–±–µ–≥–∞—Ç—å –∞–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª–µ–π
  avoidFerries?: boolean                       // –ò–∑–±–µ–≥–∞—Ç—å –ø–∞—Ä–æ–º–æ–≤
  units?: 'metric' | 'imperial'                // –ï–¥–∏–Ω–∏—Ü—ã
  language?: string                            // –Ø–∑—ã–∫
  position?: string                            // –ü–æ–∑–∏—Ü–∏—è
  visible?: boolean                            // –í–∏–¥–∏–º–æ—Å—Ç—å
  enabled?: boolean                            // –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  showExternalWaypoints?: boolean              // –í–Ω–µ—à–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫
  showExternalRoutes?: boolean                 // –í–Ω–µ—à–Ω–∏–π —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
  showInstructions?: boolean                   // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
  showStats?: boolean                          // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  showDebugInfo?: boolean                      // Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  zIndex?: number                              // Z-index
  margin?: object                              // –û—Ç—Å—Ç—É–ø—ã
  extendedOptions?: object                     // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
}
```

## üîß API –º–µ—Ç–æ–¥—ã

### JavaScript –∫–ª–∞—Å—Å

```typescript
class RouteEditor {
  // –ü—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏
  setWaypoint(index: number, location: string | [number, number]): Promise<void>
  getWaypoint(index: number): Waypoint | null
  getWaypoints(): Waypoint[]
  addWaypoint(location?, index?): Promise<number>
  removeWaypoint(index: number): void
  
  // –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è
  setTravelMode(mode: TravelMode): void
  getTravelMode(): TravelMode
  getAvailableTravelModes(): TravelMode[]
  
  // –ú–∞—Ä—à—Ä—É—Ç—ã
  calculateRoute(): Promise<Route[]>
  getRoutes(): Route[]
  getActiveRoute(): Route | null
  selectRoute(routeIndex: number): void
  optimizeRoute(): Promise<Waypoint[]>
  
  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  clear(): void
  setEditingMode(enabled: boolean): void
  isEditingMode(): boolean
  isCalculating(): boolean
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  setConstraints(constraints: Partial<RouteConstraints>): void
  getConstraints(): RouteConstraints
  setUnits(units: 'metric' | 'imperial'): void
  getUnits(): 'metric' | 'imperial'
  setMaxWaypoints(maxWaypoints: number): void
  getMaxWaypoints(): number
  
  // –°–æ–±—ã—Ç–∏—è
  on(event: string, handler: Function): void
  off(event: string, handler: Function): void
  
  // –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
  addToMap(map: ymaps.Map): Promise<void>
  removeFromMap(): Promise<void>
  destroy(): void
}
```

### Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (defineExpose)

```typescript
// –ú–µ—Ç–æ–¥—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ—Ä–µ–∑ template ref
interface ExposedMethods {
  getControl(): RouteEditor | null             // JS —ç–∫–∑–µ–º–ø–ª—è—Ä
  setWaypoint(index: number, location: string | [number, number]): Promise<void>
  getWaypoint(index: number): Waypoint | null
  getWaypoints(): Waypoint[]
  addWaypoint(location?, index?): Promise<number>
  removeWaypoint(index: number): void
  setTravelMode(mode: TravelMode): void
  getTravelMode(): TravelMode
  calculateRoute(): Promise<Route[]>
  getRoutes(): Route[]
  getActiveRoute(): Route | null
  selectRoute(index: number): void
  optimizeRoute(): Promise<Waypoint[]>
  clear(): void
  recreate(): Promise<void>
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const routeEditorRef = ref()

const addStopover = async () => {
  await routeEditorRef.value.addWaypoint('–ú–æ—Å–∫–≤–∞, –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ')
}

const optimizeTrip = async () => {
  await routeEditorRef.value.optimizeRoute()
}
```

## üì° –°–æ–±—ã—Ç–∏—è

### JavaScript

```javascript
routeEditor.on('travelmodechange', (event) => {
  console.log(`–†–µ–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω: ${event.oldMode} ‚Üí ${event.newMode}`)
})

routeEditor.on('waypointadd', (event) => {
  console.log(`–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ—á–∫–∞ ${event.index}, –≤—Å–µ–≥–æ: ${event.total}`)
})

routeEditor.on('waypointset', (event) => {
  console.log(`–¢–æ—á–∫–∞ ${event.index}: ${event.waypoint.address}`)
})

routeEditor.on('calculatestart', () => {
  console.log('–ù–∞—á–∏–Ω–∞–µ–º —Ä–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞...')
  showLoadingSpinner()
})

routeEditor.on('routecalculated', (event) => {
  console.log(`–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ ${event.routes.length} –º–∞—Ä—à—Ä—É—Ç–æ–≤`)
  event.routes.forEach((route, index) => {
    console.log(`–ú–∞—Ä—à—Ä—É—Ç ${index + 1}:`)
    console.log(`  –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${route.distance}–º`)
    console.log(`  –í—Ä–µ–º—è: ${route.duration}—Å`)
    console.log(`  –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–π: ${route.instructions.length}`)
  })
})

routeEditor.on('routeselect', (event) => {
  console.log(`–í—ã–±—Ä–∞–Ω –º–∞—Ä—à—Ä—É—Ç ${event.newIndex}`)
  updateNavigationPanel(event.route)
})

routeEditor.on('optimize', (event) => {
  console.log('–ú–∞—Ä—à—Ä—É—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω')
  console.log('–ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–æ—á–µ–∫:', event.waypoints.map(wp => wp.address))
})

// –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
routeEditor.on('routeclick', (event) => {
  console.log(`–ö–ª–∏–∫ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É ${event.routeIndex} –≤ —Ç–æ—á–∫–µ:`, event.coordinates)
})

routeEditor.on('waypointdrag', (event) => {
  console.log(`–¢–æ—á–∫–∞ ${event.index} –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞:`, event.coordinates)
})
```

### Vue

```vue
<template>
  <RouteEditorVue
    :map="map"
    v-model:travel-mode="travelMode"
    @travelmodechange="onTravelModeChange"
    @waypointadd="onWaypointAdd"
    @waypointset="onWaypointSet"
    @waypointremove="onWaypointRemove"
    @calculatestart="onCalculateStart"
    @calculateend="onCalculateEnd"
    @routecalculated="onRouteCalculated"
    @routeselect="onRouteSelect"
    @optimize="onOptimize"
    @clear="onClear"
    @error="onError"
    @ready="onReady"
  />
</template>

<script setup>
const onRouteCalculated = (data) => {
  const { routes, activeIndex } = data
  console.log(`–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤: ${routes.length}`)
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
  analytics.track('route_calculated', {
    routeCount: routes.length,
    totalDistance: routes[activeIndex]?.distance,
    totalDuration: routes[activeIndex]?.duration,
    waypointCount: routes[activeIndex]?.waypoints.length
  })
}

const onOptimize = (data) => {
  console.log('–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞')
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  showNotification('–ú–∞—Ä—à—Ä—É—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏')
}

const onError = (error) => {
  console.error('–û—à–∏–±–∫–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:', error.message)
  showErrorToast('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.')
}
</script>
```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π

### CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```css
.ymaps-route-editor {
  --panel-width: 320px;           /* –®–∏—Ä–∏–Ω–∞ –ø–∞–Ω–µ–ª–∏ */
  --panel-padding: 16px;          /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
  --waypoint-height: 44px;        /* –í—ã—Å–æ—Ç–∞ –ø—É—Ç–µ–≤–æ–π —Ç–æ—á–∫–∏ */
  --button-height: 36px;          /* –í—ã—Å–æ—Ç–∞ –∫–Ω–æ–ø–æ–∫ */
  --border-radius: 8px;           /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ */
  --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* –†–∞–∑–º–µ—Ä—ã */
.ymaps-route-editor--compact {
  --panel-width: 280px;
  --panel-padding: 12px;
  --waypoint-height: 36px;
  --button-height: 32px;
}

.ymaps-route-editor--expanded {
  --panel-width: 400px;
  --panel-padding: 20px;
  --waypoint-height: 52px;
  --button-height: 40px;
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏

```css
/* –°—Ç–∏–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ */
.ymaps-route-editor-panel {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(10px);
}

/* –ö—Ä–∞—Å–∏–≤—ã–µ –ø—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏ */
.route-editor-waypoint {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  transition: all 0.3s ease;
}

.route-editor-waypoint:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
.route-editor-calculate {
  background: linear-gradient(45deg, #ff6b6b, #ee5a52);
  border: none;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: all 0.3s ease;
}

.route-editor-calculate:hover {
  background: linear-gradient(45deg, #ee5a52, #ff6b6b);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(238, 90, 82, 0.4);
}

/* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∞ */
.route-item--active {
  background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, transparent 100%);
  border-left: 4px solid #3b82f6;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
@media (prefers-color-scheme: dark) {
  .ymaps-route-editor-panel {
    background: rgba(30, 30, 30, 0.95);
    border: 1px solid #374151;
  }
  
  .route-editor-waypoint {
    background: rgba(55, 65, 81, 0.8);
    border-color: #4b5563;
    color: #f9fafb;
  }
  
  .waypoint-input {
    background: transparent;
    color: #f9fafb;
    border: 1px solid #4b5563;
  }
  
  .waypoint-input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
}
```

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

RouteEditor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã:

```css
/* –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
@media (max-width: 768px) {
  .ymaps-route-editor {
    --panel-width: 100vw;        /* –ü–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
    --waypoint-height: 52px;     /* –ë–æ–ª—å—à–µ –¥–ª—è touch */
    --button-height: 44px;       /* –ú–∏–Ω–∏–º—É–º 44px –¥–ª—è iOS */
  }
  
  .ymaps-route-editor-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: 60vh;
    border-radius: 16px 16px 0 0;
    z-index: 10000;
  }
  
  .waypoint-input {
    font-size: 16px;             /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç zoom –≤ iOS */
    padding: 12px 16px;
  }
  
  /* –°–µ–Ω—Å–æ—Ä–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
  .waypoint-remove,
  .waypoint-drag-handle {
    min-width: 44px;
    min-height: 44px;
  }
}

/* –ü–ª–∞–Ω—à–µ—Ç—ã */
@media (min-width: 768px) and (max-width: 1024px) {
  .ymaps-route-editor {
    --panel-width: 350px;
  }
  
  .ymaps-route-editor-panel {
    max-height: 80vh;
    overflow-y: auto;
  }
}

/* –î–µ—Å–∫—Ç–æ–ø */
@media (min-width: 1024px) {
  .ymaps-route-editor-panel {
    max-height: 90vh;
  }
  
  /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
  .route-editor-advanced-options {
    display: block;
  }
}
```

## üéØ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π

```javascript
const deliveryRouteEditor = new RouteEditor({
  travelModes: ['driving'],
  defaultTravelMode: 'driving',
  maxWaypoints: 15,
  enableOptimization: true,
  avoidTolls: true, // –≠–∫–æ–Ω–æ–º–∏–º –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–µ
  
  // –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤ —Ç–æ—á–µ–∫
  waypointRenderer: (waypoint, index) => {
    const icons = {
      0: 'üè™',      // –°–∫–ª–∞–¥
      '-1': 'üè†'    // –ö–ª–∏–µ–Ω—Ç (–ø–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—á–∫–∞)
    }
    const icon = index === 0 ? icons[0] : 
                 index === waypoint.length - 1 ? icons[-1] : 'üì¶'
    
    return `<div class="delivery-waypoint">
      <span class="waypoint-icon">${icon}</span>
      <span class="waypoint-address">${waypoint.address}</span>
    </div>`
  }
})

// –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
const deliveryPoints = [
  '–ú–æ—Å–∫–≤–∞, —Å–∫–ª–∞–¥ –Ω–∞ –ö–∞—à–∏—Ä—Å–∫–æ–º —à–æ—Å—Å–µ',
  '–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 15',
  '–ú–æ—Å–∫–≤–∞, –ø—Ä–æ—Å–ø–µ–∫—Ç –ú–∏—Ä–∞, 45',
  '–ú–æ—Å–∫–≤–∞, –°–∞–¥–æ–≤–æ–µ –∫–æ–ª—å—Ü–æ, 23'
]

deliveryPoints.forEach(async (point, index) => {
  await deliveryRouteEditor.setWaypoint(index, point)
})

// –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –º–∞—Ä—à—Ä—É—Ç –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–ø–ª–∏–≤–∞
deliveryRouteEditor.on('routecalculated', async (event) => {
  console.log(`–ú–∞—Ä—à—Ä—É—Ç –¥–æ—Å—Ç–∞–≤–∫–∏: ${event.routes[0].distance}–º`)
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  if (deliveryPoints.length > 3) {
    await deliveryRouteEditor.optimizeRoute()
  }
})
```

### –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

```javascript
const touristRouteEditor = new RouteEditor({
  travelModes: ['walking', 'transit'],
  defaultTravelMode: 'walking',
  maxWaypoints: 8,
  showAlternatives: true,
  units: 'metric',
  
  // –ö–∞—Å—Ç–æ–º–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
  waypointRenderer: (waypoint, index) => {
    const attractions = {
      '–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å': 'üèõÔ∏è',
      '–¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è –≥–∞–ª–µ—Ä–µ—è': 'üé®',
      '–ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ': 'üå≥',
      '–•—Ä–∞–º –•—Ä–∏—Å—Ç–∞ –°–ø–∞—Å–∏—Ç–µ–ª—è': '‚õ™'
    }
    
    const icon = Object.keys(attractions).find(attraction => 
      waypoint.address.includes(attraction)
    ) ? attractions[attraction] : 'üìç'
    
    return `<div class="tourist-waypoint">
      ${icon} ${waypoint.address}
      <div class="waypoint-type">–î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
    </div>`
  }
})

// –°–æ–∑–¥–∞–µ–º —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç
const touristRoute = [
  '–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å',
  '–ú–æ—Å–∫–≤–∞, –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è –≥–∞–ª–µ—Ä–µ—è', 
  '–ú–æ—Å–∫–≤–∞, –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ',
  '–ú–æ—Å–∫–≤–∞, –•—Ä–∞–º –•—Ä–∏—Å—Ç–∞ –°–ø–∞—Å–∏—Ç–µ–ª—è'
]

touristRoute.forEach(async (attraction, index) => {
  await touristRouteEditor.setWaypoint(index, attraction)
})

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–µ—à–µ—Ö–æ–¥–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
touristRouteEditor.on('routecalculated', (event) => {
  event.routes.forEach((route, index) => {
    console.log(`–í–∞—Ä–∏–∞–Ω—Ç ${index + 1}:`)
    console.log(`  –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${(route.distance / 1000).toFixed(1)} –∫–º`)
    console.log(`  –í—Ä–µ–º—è –ø–µ—à–∫–æ–º: ${Math.round(route.duration / 60)} –º–∏–Ω—É—Ç`)
  })
})
```

### Vue —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

```vue
<template>
  <RouteEditorVue
    :map="map"
    v-model:travel-mode="travelMode"
    @routecalculated="saveRouteToStorage"
    @clear="clearStoredRoute"
    @ready="loadStoredRoute"
  />
  
  <!-- –ò—Å—Ç–æ—Ä–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ -->
  <div v-if="routeHistory.length > 0" class="route-history">
    <h3>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</h3>
    <div 
      v-for="savedRoute in routeHistory" 
      :key="savedRoute.id"
      class="saved-route"
      @click="loadRoute(savedRoute)"
    >
      <div class="route-info">
        <h4>{{ savedRoute.name }}</h4>
        <p>{{ savedRoute.waypoints.length }} —Ç–æ—á–µ–∫, {{ formatDistance(savedRoute.distance) }}</p>
        <span class="route-date">{{ formatDate(savedRoute.date) }}</span>
      </div>
      <button @click.stop="deleteRoute(savedRoute.id)">
        –£–¥–∞–ª–∏—Ç—å
      </button>
    </div>
  </div>
</template>

<script setup>
const routeHistory = ref([])
const routeEditor = ref()

const saveRouteToStorage = (event) => {
  const route = event.routes[event.activeIndex]
  if (!route) return
  
  const savedRoute = {
    id: Date.now(),
    name: `–ú–∞—Ä—à—Ä—É—Ç ${new Date().toLocaleDateString()}`,
    waypoints: route.waypoints,
    distance: route.distance,
    duration: route.duration,
    travelMode: travelMode.value,
    date: new Date().toISOString()
  }
  
  routeHistory.value.unshift(savedRoute)
  
  // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 10 –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
  if (routeHistory.value.length > 10) {
    routeHistory.value = routeHistory.value.slice(0, 10)
  }
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
  localStorage.setItem('routeHistory', JSON.stringify(routeHistory.value))
}

const loadStoredRoute = () => {
  // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏–∑ localStorage
  const saved = localStorage.getItem('routeHistory')
  if (saved) {
    routeHistory.value = JSON.parse(saved)
  }
}

const loadRoute = async (savedRoute) => {
  if (!routeEditor.value) return
  
  // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç
  routeEditor.value.clear()
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∂–∏–º –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è
  if (savedRoute.travelMode) {
    travelMode.value = savedRoute.travelMode
  }
  
  // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏
  for (let i = 0; i < savedRoute.waypoints.length; i++) {
    const waypoint = savedRoute.waypoints[i]
    await routeEditor.value.setWaypoint(i, waypoint.coordinates)
  }
  
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å—á–µ—Ç
  await routeEditor.value.calculateRoute()
}

const deleteRoute = (routeId) => {
  routeHistory.value = routeHistory.value.filter(route => route.id !== routeId)
  localStorage.setItem('routeHistory', JSON.stringify(routeHistory.value))
}
</script>
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```javascript
// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ø–æ–≥–æ–¥—ã
routeEditor.on('routecalculated', async (event) => {
  const route = event.routes[event.activeIndex]
  
  try {
    // –ü–æ–ª—É—á–∞–µ–º –ø–æ–≥–æ–¥—É –¥–ª—è –≤—Å–µ—Ö —Ç–æ—á–µ–∫ –º–∞—Ä—à—Ä—É—Ç–∞
    const weatherPromises = route.waypoints.map(waypoint =>
      fetch(`/api/weather?lat=${waypoint.coordinates[0]}&lng=${waypoint.coordinates[1]}`)
        .then(res => res.json())
    )
    
    const weatherData = await Promise.all(weatherPromises)
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ–≥–æ–¥–µ
    weatherData.forEach((weather, index) => {
      if (weather.conditions === 'rain') {
        showWeatherAlert(`–î–æ–∂–¥—å –≤ —Ç–æ—á–∫–µ ${index + 1}: ${route.waypoints[index].address}`)
      }
    })
    
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã:', error)
  }
})

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—Ä–∞—Ñ–∏–∫–æ–º
routeEditor.on('calculatestart', () => {
  // –í–∫–ª—é—á–∞–µ–º —Å–ª–æ–π –ø—Ä–æ–±–æ–∫
  if (map.layers) {
    map.layers.add('traffic')
  }
})

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
routeEditor.on('routeselect', (event) => {
  analytics.track('route_selected', {
    routeIndex: event.newIndex,
    distance: event.route.distance,
    duration: event.route.duration,
    travelMode: routeEditor.getTravelMode()
  })
})
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ú–∞—Ä—à—Ä—É—Ç –Ω–µ —Å—Ç—Ä–æ–∏—Ç—Å—è

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ—á–µ–∫
const waypoints = routeEditor.getWaypoints()
console.log('–ü—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏:', waypoints)

if (waypoints.length < 2) {
  console.error('–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞')
  return
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
waypoints.forEach((waypoint, index) => {
  if (!waypoint || !waypoint.coordinates) {
    console.error(`–¢–æ—á–∫–∞ ${index} –Ω–µ –∏–º–µ–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:`, waypoint)
  }
})

// –ü—Ä–æ–≤–µ—Ä—è–µ–º API
routeEditor.on('apierror', (event) => {
  console.error('–û—à–∏–±–∫–∞ API –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:', event.error.message)
  
  // –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
  // 1. –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
  // 2. –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
  // 3. –¢–æ—á–∫–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
  // 4. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
})
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
const waypoints = routeEditor.getWaypoints()
if (waypoints.length < 3) {
  console.error('–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 3 —Ç–æ—á–∫–∏')
  return
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
if (!routeEditor.getOptions().enableOptimization) {
  console.error('–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö')
  return
}

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
try {
  const optimizedWaypoints = await routeEditor.optimizeRoute()
  console.log('–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:', optimizedWaypoints)
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:', error.message)
}
```

### Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

```vue
<template>
  <!-- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ map –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ -->
  <RouteEditorVue
    :key="mapKey"  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    :map="map"
    v-model:travel-mode="travelMode"
  />
</template>

<script setup>
// –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
watch([apiKey, mapType], () => {
  mapKey.value++  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ
})

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ–∂–∏–º–∞
watch(() => travelMode.value, (newMode) => {
  console.log('–†–µ–∂–∏–º –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞:', newMode)
})
</script>
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ debug —Ä–µ–∂–∏–º–∞

```javascript
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π debug
window.YMAPS_DEBUG = true

const routeEditor = new RouteEditor({
  // –æ–ø—Ü–∏–∏
})

// –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
routeEditor.on('*', (event) => {
  console.log(`[RouteEditor] ${event.type}:`, event)
})
```

### Vue —Å –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

```vue
<template>
  <RouteEditorVue
    :map="map"
    :show-debug-info="true"
    v-model:travel-mode="travelMode"
  />
</template>
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```javascript
console.log('–†–µ–∂–∏–º –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è:', routeEditor.getTravelMode())
console.log('–ü—É—Ç–µ–≤—ã–µ —Ç–æ—á–∫–∏:', routeEditor.getWaypoints())
console.log('–ú–∞—Ä—à—Ä—É—Ç—ã:', routeEditor.getRoutes())
console.log('–ê–∫—Ç–∏–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç:', routeEditor.getActiveRoute())
console.log('–ò–¥–µ—Ç —Ä–∞—Å—á–µ—Ç:', routeEditor.isCalculating())
console.log('–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', routeEditor.isEditingMode())
console.log('–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:', routeEditor.getConstraints())
console.log('–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è:', routeEditor.getUnits())
```

## üìö –°–º. —Ç–∞–∫–∂–µ

- [ControlBase](../ControlBase.js) - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
- [controlHelpers](../../utils/controlHelpers.js) - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
- [SearchControl](../SearchControl/) - –ö–æ–Ω—Ç—Ä–æ–ª –ø–æ–∏—Å–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
- [ZoomControl](../ZoomControl/) - –ö–æ–Ω—Ç—Ä–æ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–æ–º
- [TypeSelector](../TypeSelector/) - –ö–æ–Ω—Ç—Ä–æ–ª –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç

---

<div align="center">
  <strong>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è SPA Platform</strong><br>
  <sub>RouteEditor v1.0.0 | Production Ready</sub>
</div>