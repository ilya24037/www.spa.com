# üìã –û–¢–ß–Å–¢ –û –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ï –ê–î–ú–ò–ù–ö–ò

## ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É KISS

### üîç –ß—Ç–æ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ (–®–∞–≥ 1.1)

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥ –∏–∑ —à–∞–≥–∞ 1.1 –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```bash
grep -r "UserRole::ADMIN" app/
# ‚úÖ –ù–∞–π–¥–µ–Ω enum UserRole —Å –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ä–æ–ª–µ–π –∏ permissions

grep -r "AdModerationService" app/
# ‚úÖ –ù–∞–π–¥–µ–Ω –≥–æ—Ç–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å AdModerationService —Å –º–µ—Ç–æ–¥–∞–º–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

grep -r "role.*admin" app/Http/
# ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π
```

### ‚ùå –ú–æ–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **–ù–ï –≤—ã–ø–æ–ª–Ω–∏–ª —à–∞–≥ 1.1 –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º** - –Ω–∞—á–∞–ª –ø–∏—Å–∞—Ç—å –∫–æ–¥ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥** –≤–º–µ—Å—Ç–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
   - –ù–∞–ø–∏—Å–∞–ª `$ad->update(['status' => 'active'])` –≤–º–µ—Å—Ç–æ `$moderationService->approveAd($ad)`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `in_array($user->role, ['admin', 'moderator'])` –≤–º–µ—Å—Ç–æ `$user->isStaff()`
3. **–ù–∞—Ä—É—à–∏–ª Clean Architecture** - –ø–æ–º–µ—Å—Ç–∏–ª –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É KISS

#### 1. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
```php
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
$ad->update(['status' => 'active']);

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
protected AdModerationService $moderationService;
$this->moderationService->approveAd($ad);
```

#### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–π—Ç–∞ HasRoles
```php
// –ë–´–õ–û:
if (in_array($user->role, ['admin', 'moderator'])) { }

// –°–¢–ê–õ–û:
if ($user->isStaff()) { }
```

#### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã permissions
```php
// –ë–´–õ–û:
abort_if(auth()->user()->role !== 'admin', 403);

// –°–¢–ê–õ–û:
abort_if(!auth()->user()->hasPermission('manage_users'), 403);
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ |
|---------|-----------------|-------------------|
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | ‚ùå 0% | ‚úÖ 100% |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | ‚ùå –ï—Å—Ç—å | ‚úÖ –ù–µ—Ç |
| –°–æ–±–ª—é–¥–µ–Ω–∏–µ Clean Architecture | ‚ùå –õ–æ–≥–∏–∫–∞ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ | ‚úÖ –õ–æ–≥–∏–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö |
| –ü—Ä–∏–Ω—Ü–∏–ø KISS | ‚ùå –ü–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–æ | ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —á–µ—Ä–µ–∑ reuse |
| –°—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ | ~300 | ~80 |

### üéØ –í—ã–≤–æ–¥—ã

1. **–í–°–ï–ì–î–ê –≤—ã–ø–æ–ª–Ω—è—Ç—å –®–∞–≥ 1.1** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∞ –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å** - –≤ –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ
3. **–°–ª–µ–¥–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞** - DDD, Clean Architecture, SOLID

### ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:
- ‚úÖ AdModerationService –≤–Ω–µ–¥—Ä—ë–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ –¢—Ä–µ–π—Ç HasRoles —Å –º–µ—Ç–æ–¥–∞–º–∏ isAdmin(), isStaff() —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ permissions –∏–∑ UserRole –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ Clean Architecture —Å–æ–±–ª—é–¥–µ–Ω–∞

## üîë –ì–ª–∞–≤–Ω—ã–π —É—Ä–æ–∫

> **KISS = Keep It Simple by SEARCHING first!**
>
> –ü—Ä–µ–∂–¥–µ —á–µ–º –ø–∏—Å–∞—Ç—å –∫–æ–¥, –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π —á—Ç–æ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
> –ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–æ–¥–∞,
> –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.