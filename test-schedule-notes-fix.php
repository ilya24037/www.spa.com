<?php

use App\Domain\Ad\Models\Ad;

require_once __DIR__ . '/vendor/autoload.php';
$app = require_once __DIR__ . '/bootstrap/app.php';
$app->make(\Illuminate\Contracts\Console\Kernel::class)->bootstrap();

echo "üîß –¢–ï–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø schedule_notes\n";
echo str_repeat("=", 60) . "\n\n";

echo "üìã –í–´–ü–û–õ–ù–ï–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:\n";
echo str_repeat("-", 50) . "\n";
echo "–í ScheduleSection.vue:\n";
echo "  ‚ùå –ë–´–õ–û: emit('update:scheduleNotes', value)\n";
echo "  ‚úÖ –°–¢–ê–õ–û: emit('update:schedule-notes', value)\n\n";

echo "–ü–†–ò–ß–ò–ù–ê –û–®–ò–ë–ö–ò:\n";
echo "  ‚Ä¢ AdForm.vue –∏—Å–ø–æ–ª—å–∑—É–µ—Ç v-model:schedule-notes (—Å –¥–µ—Ñ–∏—Å–æ–º)\n";
echo "  ‚Ä¢ Vue –æ–∂–∏–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ update:schedule-notes\n";
echo "  ‚Ä¢ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–ª update:scheduleNotes (camelCase)\n";
echo "  ‚Ä¢ –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö\n\n";

// –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
$ad = Ad::find(97) ?: Ad::first();

if ($ad) {
    echo "üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–ê –û–ë–™–Ø–í–õ–ï–ù–ò–ò ID: " . $ad->id . "\n";
    
    $testText = "–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞ 9:00-18:00, –≤—ã—Ö–æ–¥–Ω—ã–µ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏. –¢–µ—Å—Ç: " . date('H:i:s');
    $ad->schedule_notes = $testText;
    $ad->save();
    
    echo "  ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ\n";
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    $ad->refresh();
    if ($ad->schedule_notes === $testText) {
        echo "  ‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î!\n\n";
    } else {
        echo "  ‚ùå –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å\n\n";
    }
} else {
    echo "  ‚ùå –ù–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n\n";
}

echo str_repeat("=", 60) . "\n";
echo "‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ò–ú–ï–ù–ï–ù–û!\n\n";

echo "üåê –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:\n";
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ http://spa.test/ads/97/edit\n";
echo "2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é '–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã'\n";
echo "3. –í –ø–æ–ª–µ '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä–∞—Ñ–∏–∫–µ —Ä–∞–±–æ—Ç—ã' –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç\n";
echo "4. –ù–∞–∂–º–∏—Ç–µ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫'\n";
echo "5. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É - —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è! ‚úÖ\n";