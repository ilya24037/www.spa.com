# Архитектура макета SPA Platform

## Обзор

Архитектура макета в проекте SPA Platform реализована по принципам больших маркетплейсов (Ozon, Avito, Wildberries) и включает в себя несколько ключевых компонентов.

## Основные файлы

### 1. **resources/css/02-layout/grid.css**
Главный файл, отвечающий за поведение макета страницы:

- **Контейнеры с максимальной шириной**
- **Адаптивные сетки**
- **Минимальные ограничения ширины**

### 2. **resources/js/src/shared/layouts/MainLayout/MainLayout.vue**
Vue компонент основного макета:

- **Фиксированная шапка (sticky header)**
- **Централизованный контейнер**
- **Адаптивные отступы**

### 3. **resources/css/01-base/reset.css**
Базовые стили сброса и нормализации

## Ключевые принципы реализации

### 1. Центрирование контента и ограничение ширины

```css
/* В файле grid.css */
.container-adaptive {
  width: 100%;
  margin: 0 auto;  /* Центрирование */
  padding: 0 var(--container-padding);
  max-width: 1600px;  /* Максимальная ширина как у Ozon */
}
```

**Как работает:**
- `margin: 0 auto` - центрирует контейнер по горизонтали
- `max-width` - предотвращает растягивание на больших экранах
- Адаптивные `padding` увеличиваются на больших экранах

### 2. Минимальная ширина и горизонтальный скролл

```css
/* В файле grid.css */
:root {
  --card-min-width: 280px;  /* Минимальная ширина карточек */
}

.service-grid {
  grid-template-columns: repeat(auto-fill, minmax(var(--card-min-width), 1fr));
}

/* Для мобильных устройств */
@media (max-width: 639px) {
  .service-grid {
    grid-template-columns: 1fr;  /* Одна колонка на мобильных */
  }
}
```

**Как работает:**
- `minmax()` - задает минимальную ширину элементов сетки
- При сжатии окна ниже минимальной ширины контента появляется горизонтальный скролл
- На мобильных устройствах переключается на одну колонку

### 3. Фиксированная шапка (Sticky Header)

```vue
<!-- В MainLayout.vue -->
<header v-if="!isAuthPage" class="sticky top-0 z-50 negative-margin">
  <div class="site-padding">
    <AppHeader :user="user" :is-authenticated="isAuthenticated" />
  </div>
</header>
```

**Как работает:**
- `sticky top-0` - закрепляет шапку при прокрутке
- `z-50` - высокий z-index чтобы шапка была над контентом
- `negative-margin` - компенсирует отступы контейнера

### 4. Адаптивные брейкпоинты

```css
/* Определены в grid.css */
:root {
  --bp-xs: 320px;   /* Маленькие телефоны */
  --bp-sm: 640px;   /* Большие телефоны */
  --bp-md: 768px;   /* Планшеты */
  --bp-lg: 1024px;  /* Небольшие десктопы */
  --bp-xl: 1280px;  /* Большие десктопы */
  --bp-2xl: 1536px; /* Широкие экраны */
}
```

### 5. Предотвращение деформации контента

```css
/* В reset.css */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* В grid.css - фиксированные пропорции карточек */
:root {
  --card-aspect-ratio: 1.2;
}
```

## Сравнение с маркетплейсами

### Ozon
- **Максимальная ширина контента:** ~1400-1600px
- **Минимальная ширина:** ~1000px для десктопа
- **Фиксированная шапка:** да, с категориями
- **Адаптивная сетка:** 4-6 колонок на десктопе

### Avito
- **Максимальная ширина контента:** ~1200-1400px
- **Минимальная ширина:** ~980px для десктопа
- **Sticky элементы:** фильтры и шапка
- **Адаптивная сетка:** 3-4 колонки на десктопе

### Наша реализация
- **Максимальная ширина:** 1600px (как у Ozon)
- **Минимальная ширина карточек:** 280px
- **Sticky header:** да
- **Адаптивная сетка:** auto-fill с minmax

## Использование в компонентах

### Базовая страница с контейнером
```vue
<template>
  <div class="container-adaptive">
    <!-- Контент автоматически центрируется и ограничен по ширине -->
    <h1>Заголовок страницы</h1>
    <div class="service-grid">
      <!-- Карточки услуг -->
    </div>
  </div>
</template>
```

### Страница с полной шириной (как главная Ozon)
```vue
<template>
  <div>
    <!-- Hero секция на всю ширину -->
    <section class="bg-primary">
      <div class="container-adaptive">
        <!-- Контент hero центрирован -->
      </div>
    </section>
    
    <!-- Основной контент -->
    <div class="container-adaptive">
      <div class="service-grid">
        <!-- Сетка услуг -->
      </div>
    </div>
  </div>
</template>
```

## Рекомендации по использованию

1. **Всегда используйте контейнеры** для основного контента:
   - `.container-adaptive` - для стандартных страниц
   - `.container-narrow` - для текстовых страниц
   - `.container-wide` - для каталогов с большим количеством товаров

2. **Используйте готовые сетки** для карточек:
   - `.service-grid` - для услуг
   - `.master-grid` - для мастеров
   - `.compact-grid` - для плотной упаковки

3. **Не переопределяйте минимальные ширины** без необходимости - они рассчитаны для оптимального UX

4. **Тестируйте на разных разрешениях**:
   - 320px (минимальная мобильная)
   - 768px (планшет)
   - 1024px (небольшой десктоп)
   - 1920px (большой монитор)

## Отладка

Для визуализации сеток добавьте класс `debug` к body:
```html
<body class="debug">
```

Это покажет границы всех сеток и контейнеров.