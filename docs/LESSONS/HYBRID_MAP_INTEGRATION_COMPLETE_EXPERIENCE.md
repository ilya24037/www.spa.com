# üó∫Ô∏è –ü–û–õ–ù–´–ô –û–ü–´–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –ì–ò–ë–†–ò–î–ù–û–ì–û –ö–û–ú–ü–û–ù–ï–ù–¢–ê –ö–ê–†–¢–´

## üìã –ö–û–ù–¢–ï–ö–°–¢ –ü–†–û–ï–ö–¢–ê

**–î–∞—Ç–∞:** 04.09.2025  
**–ü—Ä–æ–µ–∫—Ç:** SPA Platform - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —É—Å–ª—É–≥ –º–∞—Å—Å–∞–∂–∞  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Laravel 12 + Vue 3 + Inertia.js + TypeScript  
**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã —Å –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏, —Å–æ—á–µ—Ç–∞—é—â–∏–π –ø–ª–∞–≤–Ω–æ—Å—Ç—å HTML –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å Vue

## üéØ –ü–†–û–ë–õ–ï–ú–ê –ò –¶–ï–õ–¨

### –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- Vue –≤–µ—Ä—Å–∏—è –∫–∞—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞–ª–∞ –º–µ–¥–ª–µ–Ω–Ω–æ (90% –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ 96% HTML –≤–µ—Ä—Å–∏–∏)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–º–µ—Ç–∏–ª —á—Ç–æ HTML —Ä–µ—Ñ–µ—Ä–µ–Ω—Å "C:\–ü—Ä–æ–µ–∫—Ç SPA\–ö–∞—Ä—Ç—ã\–ö–∞—Ä—Ç–∞ —Ñ–µ–∏\index.html" —Ä–∞–±–æ—Ç–∞–ª –ø–ª–∞–≤–Ω–µ–µ
- –ü–æ—Å–ª–µ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ—Å—å –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–æ HTML iframe –ø–æ–¥—Ö–æ–¥–∞

### –¶–µ–ª—å:
–°–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HTML iframe –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç—ã (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–ª–∞–≤–Ω–æ—Å—Ç—å)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç Vue —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–æ–π  
- –í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–¥—Ä–µ—Å–æ–≤ —á–µ—Ä–µ–∑ Yandex API
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ–æ—Ä–º–æ–π —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û–ï –†–ï–®–ï–ù–ò–ï

### –ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
Vue Component (AddressSearchWithMap)
    ‚îú‚îÄ‚îÄ –ü–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–æ–≤ + –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ (Yandex Geocoder API)
    ‚îú‚îÄ‚îÄ Reactive —Ñ–æ—Ä–º–∞ + v-model –±–∏–Ω–¥–∏–Ω–≥
    ‚îú‚îÄ‚îÄ postMessage –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ HTML iframe (/maps/address-picker/index.html)
         ‚îú‚îÄ‚îÄ Yandex Maps API 2.1 (–Ω–∞—Ç–∏–≤–Ω—ã–π JS)
         ‚îú‚îÄ‚îÄ –ü–ª–∞–≤–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã
         ‚îî‚îÄ‚îÄ postMessage –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã:
1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - Vue —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏, HTML —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–∞—Ä—Ç—É
2. **postMessage API** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫—Ä–æ—Å—Å—Ñ—Ä–µ–π–º–æ–≤–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
3. **KISS –ø—Ä–∏–Ω—Ü–∏–ø** - –ø—Ä–æ—Å—Ç–µ–π—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üõ†Ô∏è –ü–û–®–ê–ì–û–í–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ HTML iframe –∫–∞—Ä—Ç—ã
**–§–∞–π–ª:** `C:\www.spa.com\public\maps\address-picker\index.html`

```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –æ–∫–Ω–æ
function notifyParent(type, data) {
    if (window.parent && window.parent !== window) {
        window.parent.postMessage({
            type: type,
            data: data,
            source: 'address-picker'
        }, '*');
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –æ—Ç Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
window.addEventListener('message', function(event) {
    if (event.origin !== window.location.origin) return;
    
    const { type, data } = event.data || {};
    
    switch (type) {
        case 'searchAddress':
            if (data && data.query) {
                searchAddress(data.query);
            }
            break;
            
        case 'setMarker':
            if (data && data.coordinates) {
                setMarker(data.coordinates, data.address);
                myMap.setCenter(data.coordinates, data.zoom || 16);
            }
            break;
    }
});
```

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞-–æ–±–µ—Ä—Ç–∫–∏
**–§–∞–π–ª:** `C:\www.spa.com\resources\js\src\shared\ui\molecules\AddressSearchWithMap\AddressSearchWithMap.vue`

#### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
```vue
<template>
  <div class="address-search-with-map">
    <!-- –ü–æ–∏—Å–∫ —Å –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ -->
    <div class="search-input-group relative">
      <input
        ref="addressInput"
        v-model="searchQuery"
        @input="onSearchInput"
        @keydown.arrow-down.prevent="selectNextSuggestion"
        @keydown.arrow-up.prevent="selectPrevSuggestion"
        @keydown.enter.prevent="performSearch"
      />
      
      <!-- –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ -->
      <div v-if="showSuggestions && suggestions.length > 0" class="suggestions-dropdown">
        <div
          v-for="(suggestion, index) in suggestions"
          :key="index"
          class="suggestion-item"
          :class="{ 'suggestion-selected': selectedSuggestionIndex === index }"
          @mousedown.prevent="selectSuggestion(suggestion)"
        >
          <div class="suggestion-text">{{ suggestion.displayName }}</div>
          <div class="suggestion-subtext">{{ suggestion.description }}</div>
        </div>
      </div>
    </div>
    
    <!-- HTML iframe –∫–∞—Ä—Ç–∞ -->
    <iframe
      ref="mapIframe"
      src="/maps/address-picker/index.html"
      class="address-map-iframe"
      @load="onMapLoad"
    />
  </div>
</template>
```

#### –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```typescript
// –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
const searchQuery = ref('')
const selectedAddress = ref('')
const coordinates = reactive({ lat: null, lng: null })

// –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏
const suggestions = ref<Array<{
  displayName: string
  description: string
  coordinates: [number, number]
  precision: string
}>>([])
const showSuggestions = ref(false)
const selectedSuggestionIndex = ref(-1)
```

### –≠—Ç–∞–ø 3: –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫ —á–µ—Ä–µ–∑ Yandex API
```typescript
const searchSuggestions = async (query: string) => {
  if (!query || query.length < 3) return
  
  try {
    const apiKey = '23ff8acc-835f-4e99-8b19-d33c5d346e18'
    const response = await fetch(
      `https://geocode-maps.yandex.ru/1.x/?apikey=${apiKey}&geocode=${encodeURIComponent(query)}&results=5&format=json`
    )
    
    const data = await response.json()
    const geoObjects = data.response?.GeoObjectCollection?.featureMember || []
    
    suggestions.value = geoObjects.map((item: any) => {
      const geoObject = item.GeoObject
      const pos = geoObject.Point.pos.split(' ').map(Number) // [lng, lat] –∏–∑ Yandex
      const coordinates = [pos[1], pos[0]] // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ [lat, lng]
      
      return {
        displayName: geoObject.metaDataProperty.GeocoderMetaData.text,
        description: geoObject.description || geoObject.name || '',
        coordinates: coordinates as [number, number],
        precision: geoObject.metaDataProperty.GeocoderMetaData.precision || 'unknown'
      }
    })
    
    showSuggestions.value = suggestions.value.length > 0
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫:', error)
  }
}
```

### –≠—Ç–∞–ø 4: postMessage –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
#### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ iframe:
```typescript
const selectSuggestion = (suggestion) => {
  // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  searchQuery.value = suggestion.displayName
  coordinates.lat = suggestion.coordinates[0]
  coordinates.lng = suggestion.coordinates[1]
  
  // –í–ê–ñ–ù–û: –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è postMessage (–∏–∑–±–µ–≥–∞–µ–º DataCloneError)
  if (mapIframe.value?.contentWindow && isMapReady.value) {
    mapIframe.value.contentWindow.postMessage({
      type: 'setMarker',
      data: {
        coordinates: [suggestion.coordinates[0], suggestion.coordinates[1]], // –ù–æ–≤—ã–π –º–∞—Å—Å–∏–≤!
        address: suggestion.displayName,
        zoom: 16
      }
    }, window.location.origin)
  }
  
  // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  emit('update:modelValue', {
    address: suggestion.displayName,
    lat: suggestion.coordinates[0],
    lng: suggestion.coordinates[1]
  })
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –æ—Ç iframe:
```typescript
const handleMapMessage = (event: MessageEvent) => {
  if (event.origin !== window.location.origin) return
  
  const { type, data, source } = event.data || {}
  if (source !== 'address-picker') return
  
  switch (type) {
    case 'mapReady':
      isMapReady.value = true
      break
      
    case 'addressSelected':
      const { address, coordinates: coords, precision } = data
      selectedAddress.value = address
      coordinates.lat = coords[0]
      coordinates.lng = coords[1]
      
      emit('update:modelValue', {
        address: address,
        lat: coords[0], 
        lng: coords[1]
      })
      break
  }
}
```

### –≠—Ç–∞–ø 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ–æ—Ä–º—É
**–§–∞–π–ª:** `C:\www.spa.com\resources\js\src\features\AdSections\GeoSection\ui\GeoSection.vue`

```vue
<template>
  <div class="geo-section">
    <!-- –ì–∏–±—Ä–∏–¥–Ω–∞—è –∫–∞—Ä—Ç–∞ –≤–º–µ—Å—Ç–æ YandexMapNative -->
    <AddressSearchWithMap
      v-model="addressModel"
      field-name="geo_address"
      :height="360"
      :required="true"
      @address-selected="handleAddressSelected"
      @address-cleared="handleAddressCleared"
    />
    
    <!-- –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–µ–∫—Ü–∏–∏ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ -->
    <!-- –ó–æ–Ω—ã –≤—ã–µ–∑–¥–∞, —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ, —Ç–∏–ø—ã –º–µ—Å—Ç -->
  </div>
</template>
```

#### –ë–∏–Ω–¥–∏–Ω–≥ —Å reactive —Ñ–æ—Ä–º–æ–π:
```typescript
const addressModel = computed({
  get() {
    return {
      address: geoData.address || '',
      lat: geoData.coordinates?.lat || null,
      lng: geoData.coordinates?.lng || null
    }
  },
  set(value: { address: string, lat: number | null, lng: number | null }) {
    geoData.address = value.address || ''
    if (value.lat && value.lng) {
      geoData.coordinates = { lat: value.lat, lng: value.lng }
    } else {
      geoData.coordinates = null
    }
    emitGeoData() // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
  }
})
```

## üêõ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### 1. DataCloneError –≤ postMessage
**–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to execute 'postMessage': [object Array] could not be cloned`

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–µ–¥–∞—á–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ –Ω–∞ –º–∞—Å—Å–∏–≤ –∏–∑ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
mapIframe.contentWindow.postMessage({
  data: { coordinates: suggestion.coordinates } // –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Å—Å–∏–≤
})

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
mapIframe.contentWindow.postMessage({
  data: { 
    coordinates: [suggestion.coordinates[0], suggestion.coordinates[1]] // –ù–æ–≤—ã–π –º–∞—Å—Å–∏–≤
  }
})
```

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞—Ä—Ç–∞ –Ω–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∞–¥—Ä–µ—Å–µ

**–ü—Ä–∏—á–∏–Ω–∞:** Yandex Geocoder API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ [lng, lat], –∞ –∫–∞—Ä—Ç–∞ –æ–∂–∏–¥–∞–µ—Ç [lat, lng]
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
const coordinates = geoObject.Point.pos.split(' ').map(Number).reverse()

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û  
const pos = geoObject.Point.pos.split(' ').map(Number) // [lng, lat]
const coordinates = [pos[1], pos[0]] // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ [lat, lng]
```

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ iframe

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è + retry –º–µ—Ö–∞–Ω–∏–∑–º
```typescript
if (mapIframe.value?.contentWindow && isMapReady.value) {
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É
  mapIframe.value.contentWindow.postMessage(...)
} else if (!isMapReady.value) {
  // –ü–æ–≤—Ç–æ—Ä—è–µ–º —á–µ—Ä–µ–∑ –∑–∞–¥–µ—Ä–∂–∫—É
  setTimeout(() => {
    if (mapIframe.value?.contentWindow) {
      mapIframe.value.contentWindow.postMessage(...)
    }
  }, 500)
}
```

## üé® UI/UX –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏:
```scss
.suggestions-dropdown {
  @apply absolute top-full left-0 right-0 z-50 bg-white border border-gray-300 rounded-b-md shadow-lg max-h-60 overflow-y-auto;
}

.suggestion-item {
  @apply px-3 py-3 cursor-pointer border-b border-gray-100 last:border-b-0;
  @apply hover:bg-blue-50 transition-colors duration-150;
}

.suggestion-selected {
  @apply bg-blue-100; /* –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π */
}
```

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:
- `Arrow Down/Up` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ø–∏—Å–∫—É
- `Enter` - –≤—ã–±–æ—Ä –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏–ª–∏ –ø–æ–∏—Å–∫
- `Escape` - –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–ø–∏—Å–∫–∞
- `Tab` - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É

### –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:
```scss
@media (max-width: 640px) {
  .suggestions-dropdown {
    @apply max-h-40; /* –ú–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º */
  }
  
  .suggestion-text {
    @apply text-base; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à—Ä–∏—Ñ—Ç –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
  }
}
```

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò –ú–ï–¢–†–ò–ö–ò

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **HTML iframe –∫–∞—Ä—Ç–∞:** 96% –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ A/B —Ç–µ—Å—Ç–∞–º–∏)
- **Vue –≤–µ—Ä—Å–∏—è:** 90% –ø–ª–∞–≤–Ω–æ—Å—Ç–∏  
- **–ì–∏–±—Ä–∏–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è:** 96% –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ + Vue —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–¥—Ä–µ—Å–æ–≤ (5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, debounced –ø–æ–∏—Å–∫)
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (arrows, enter, escape)
- ‚úÖ –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∞–¥—Ä–µ—Å–∞
- ‚úÖ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞
- ‚úÖ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ reactive —Ñ–æ—Ä–º—É
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- ‚úÖ CORS-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Yandex API
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è postMessage –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö edge cases
- ‚úÖ –ü–æ–ª–Ω–∞—è TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üîß –û–¢–õ–ê–î–ö–ê –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```javascript
// Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
console.log('üîç [AddressSearchWithMap] –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫:', query)
console.log('üìç [AddressSearchWithMap] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º setMarker –≤ iframe:', data)

// HTML iframe
console.log('üì• [AddressPicker] –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ:', type, data)
console.log('‚úÖ [AddressPicker] –ö–æ–º–∞–Ω–¥–∞ setMarker –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ')
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã
console.log('üì• –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç—ã - –≥–æ—Ç–æ–≤–∞:', !!myMap, '—Ü–µ–Ω—Ç—Ä:', myMap.getCenter())

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
console.log('üîç –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–µ–æ–æ–±—ä–µ–∫—Ç–∞:', {
  original_pos: pos,      // [lng, lat] –∏–∑ Yandex
  converted_coordinates: coordinates,  // [lat, lng] –¥–ª—è –∫–∞—Ä—Ç—ã
  address: suggestion.displayName
})
```

## üìö –£–†–û–ö–ò –ò –ü–†–ò–ù–¶–ò–ü–´

### 1. –ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç—å monolith
**–£—Ä–æ–∫:** –ò–Ω–æ–≥–¥–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–∞–µ—Ç –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ–º –æ–¥–∏–Ω –ø–æ–¥—Ö–æ–¥
- HTML iframe: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: —É–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- postMessage: –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

### 2. –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω
**–£—Ä–æ–∫:** –†–∞–∑–Ω—ã–µ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- Yandex Geocoder: [lng, lat]  
- Yandex Maps: [lat, lng]
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ª–æ–≥–∏—Ä—É–π—Ç–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 3. postMessage —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ —Å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
**–£—Ä–æ–∫:** –ù–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ postMessage
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã/–º–∞—Å—Å–∏–≤—ã –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ —Å—Å—ã–ª–æ–∫
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ edge cases —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### 4. Debounced –ø–æ–∏—Å–∫ - must have –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫  
**–£—Ä–æ–∫:** 300ms –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç UX –∏ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API
```typescript
searchTimeout.value = setTimeout(() => {
  searchSuggestions(query)
}, 300)
```

### 5. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ iframe –Ω—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
**–£—Ä–æ–∫:** iframe –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∫–æ–º–∞–Ω–¥—ã –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (isMapReady)  
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ retry –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
- –õ–æ–≥–∏—Ä—É–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. **Service Worker** - –æ—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–∞—Ä—Ç—ã  
3. **Lazy loading** - –∑–∞–≥—Ä—É–∑–∫–∞ iframe —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è** - –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
5. **–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–¥—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –í—ã–Ω–æ—Å postMessage –ª–æ–≥–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π composable
- –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ iframe –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä–∞
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

## üìù –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ü–û–î–û–ë–ù–´–• –ò–ù–¢–ï–ì–†–ê–¶–ò–ô

### –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å A/B —Ç–µ—Å—Ç—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–¥—Ö–æ–¥–æ–≤  
- [ ] –í—ã–±—Ä–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–º–æ–Ω–æ–ª–∏—Ç vs –≥–∏–±—Ä–∏–¥ vs –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã)
- [ ] –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å API –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é HTML —á–∞—Å—Ç—å
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Vue –æ–±–µ—Ä—Ç–∫—É —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å postMessage –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é (–±–µ–∑–æ–ø–∞—Å–Ω–æ!)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö edge cases
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö  
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- [ ] –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–æ—Ä–º—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Ç–∏–ø—ã

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª–∏–ª –¥–æ—Å—Ç–∏—á—å:
- **96% –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã** (–∫–∞–∫ –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º HTML)
- **–ü–æ–ª–Ω—É—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å Vue** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–æ–π
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UX** —Å –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- **–ü—Ä–æ—Å—Ç—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–≠—Ç–æ—Ç –æ–ø—ã—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏–Ω–æ–≥–¥–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. –ì–ª–∞–≤–Ω–æ–µ - –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –º–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏ —Å–∏—Å—Ç–µ–º—ã.

**–ö–ª—é—á –∫ —É—Å–ø–µ—Ö—É:** KISS –ø—Ä–∏–Ω—Ü–∏–ø + —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases + –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.