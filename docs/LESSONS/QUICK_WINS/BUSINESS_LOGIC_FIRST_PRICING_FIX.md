# üéØ QUICK WIN: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ BUSINESS_LOGIC_FIRST

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 01.09.2025  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 15 –º–∏–Ω—É—Ç  
**–ü—Ä–∏–Ω—Ü–∏–ø:** BUSINESS_LOGIC_FIRST –∏–∑ docs/LESSONS/APPROACHES/  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è (–¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å)

---

## üö® –ü–†–û–ë–õ–ï–ú–ê

### –°–∏–º–ø—Ç–æ–º—ã:
- –ü–æ–ª—è "1 —á–∞—Å", "2 —á–∞—Å–∞" –≤ —Å–µ–∫—Ü–∏–∏ "–°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥" –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å–µ–∫—Ü–∏–π –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è–ª–∏—Å—å
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –ø—É—Å—Ç—ã–º–∏

### –û—à–∏–±–æ—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—á—Ç–æ —è –¥–µ–ª–∞–ª —Å–Ω–∞—á–∞–ª–∞):
‚ùå –ü—ã—Ç–∞–ª—Å—è —Ä–µ—à–∏—Ç—å —á–µ—Ä–µ–∑ localStorage watcher  
‚ùå –î–æ–±–∞–≤–ª—è–ª `handleSaveDraft()` –≤—ã–∑–æ–≤ –≤ watch  
‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä–∏–ª –ø–æ–ª–Ω—É—é —Ü–µ–ø–æ—á–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–æ backend  

---

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –ü–†–ò–ú–ï–ù–ï–ù–ò–ï BUSINESS_LOGIC_FIRST

### –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–ª–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ (5 –º–∏–Ω—É—Ç)
```
Vue Component ‚Üí FormData ‚Üí DraftController ‚Üí Service ‚Üí –ë–î
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏–ª:**
1. ‚úÖ **adFormModel.ts** - FormData –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (–≤—Å–µ –ø–æ–ª—è –≤–∫–ª—é—á–µ–Ω—ã)
2. ‚úÖ **adFormModel.ts** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (–≤—Å–µ –ø–æ–ª—è –µ—Å—Ç—å)  
3. ‚ùå **DraftController::update** - –û–¢–°–£–¢–°–¢–í–£–ï–¢ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `prices[*]`!

### –®–∞–≥ 2: –ù–∞–π–¥–µ–Ω–∞ —Ç–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
**–í store –º–µ—Ç–æ–¥–µ:** –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ `prices[*] ‚Üí prices` –º–∞—Å—Å–∏–≤–∞  
**–í update –º–µ—Ç–æ–¥–µ:** —ç—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –û–¢–°–£–¢–°–¢–í–£–ï–¢!

```php
// store() - —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
$prices = [];
foreach ($request->all() as $key => $value) {
    if (str_starts_with($key, 'prices[')) {
        $fieldName = str_replace(['prices[', ']'], '', $key);
        $prices[$fieldName] = $value;
    }
}

// update() - –ù–ï –ë–´–õ–û ‚ùå
// –ü–æ—ç—Ç–æ–º—É —Ü–µ–Ω—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤!
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è (5 –º–∏–Ω—É—Ç)
–°–∫–æ–ø–∏—Ä–æ–≤–∞–ª —Ç–æ—á–Ω–æ —Ç–∞–∫—É—é –∂–µ –ª–æ–≥–∏–∫—É –∏–∑ `store` –º–µ—Ç–æ–¥–∞ –≤ `update` –º–µ—Ç–æ–¥.

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –†–ï–®–ï–ù–ò–ï

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
1. **AdForm.vue:492-505** - —É–±—Ä–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π localStorage watcher
2. **DraftController.php:335-345** - –¥–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É `prices[*]`

### –ö–æ–¥ —Ä–µ—à–µ–Ω–∏—è:
```php
// –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ DraftController::update
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–π prices (–æ–Ω–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–∞–∫ prices[key])
$prices = [];
foreach ($request->all() as $key => $value) {
    if (str_starts_with($key, 'prices[')) {
        $fieldName = str_replace(['prices[', ']'], '', $key);
        $prices[$fieldName] = $value;
    }
}
if (!empty($prices)) {
    $data['prices'] = $prices;
}
```

---

## üìö –ö–õ–Æ–ß–ï–í–´–ï –£–†–û–ö–ò

### 1. –ü—Ä–∏–Ω—Ü–∏–ø BUSINESS_LOGIC_FIRST —Å—Ä–∞–±–æ—Ç–∞–ª –∏–¥–µ–∞–ª—å–Ω–æ:
> **"–õ—é–±–∞—è –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∞ –∏–º–µ–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ –≤ –∫–æ–¥–µ. –ù–∞–π–¥–∏ —ç—Ç–æ –º–µ—Å—Ç–æ –ü–ï–†–ï–î –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏."**

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- ‚ùå –ù–ï –Ω–∞—á–∏–Ω–∞–π —Å frontend (localStorage, watchers, Vue)
- ‚úÖ –ü–†–û–í–ï–†–¨ –ø–æ–ª–Ω—É—é —Ü–µ–ø–æ—á–∫—É –æ—Ç Vue –¥–æ –ë–î
- ‚úÖ –ù–ê–ô–î–ò —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ –≥–¥–µ –ª–æ–º–∞–µ—Ç—Å—è —Ü–µ–ø–æ—á–∫–∞

### 2. –û–ø—ã—Ç –∏–∑ PRICING_SECTION_FIX_REPORT.md –ø–æ–º–æ–≥:
–¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —É–∂–µ —Ä–µ—à–∞–ª–∞—Å—å 20.08.2025, –Ω–æ —Ä–µ—à–µ–Ω–∏–µ "–æ—Ç–∫–∞—Ç–∏–ª–æ—Å—å" –≤ update –º–µ—Ç–æ–¥–µ.

### 3. –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É store –∏ update:
- **store** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ ‚úÖ  
- **update** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ‚ùå (–±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑–¥–µ—Å—å)

---

## ‚ö° –í–†–ï–ú–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø

- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** ~30 –º–∏–Ω—É—Ç (localStorage watcher, —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã)
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** 15 –º–∏–Ω—É—Ç (–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ + —Ç–æ—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- **–≠–∫–æ–Ω–æ–º–∏—è:** 50% –≤—Ä–µ–º–µ–Ω–∏ + –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

---

## üéØ –ò–ù–î–ò–ö–ê–¢–û–†–´ –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø –ü–†–ò–ù–¶–ò–ü–ê

**–ò—Å–ø–æ–ª—å–∑—É–π BUSINESS_LOGIC_FIRST –∫–æ–≥–¥–∞:**
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ Frontend "—Ä–∞–±–æ—Ç–∞–µ—Ç", –Ω–æ backend –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∫–∞—Å–∞–µ—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ–π/—Å–µ–∫—Ü–∏–π
- ‚úÖ –ï—Å—Ç—å —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–ê–ª–≥–æ—Ä–∏—Ç–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
1. –ü—Ä–æ–≤–µ—Ä—å FormData –æ—Ç–ø—Ä–∞–≤–∫—É (frontend)
2. –ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª—É—á–µ–Ω–∏–µ –≤ Controller (backend)  
3. –ü—Ä–æ–≤–µ—Ä—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ Service
4. –ü—Ä–æ–≤–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
5. **–ù–∞–π–¥–∏ –≥–¥–µ –ª–æ–º–∞–µ—Ç—Å—è —Ü–µ–ø–æ—á–∫–∞**

---

## üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –¶–µ–Ω—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- ‚ùå –†–µ–¥–∏—Ä–µ–∫—Ç—ã –ø—Ä–∏ –≤–≤–æ–¥–µ –∑–Ω–∞—á–µ–Ω–∏–π (localStorage watcher)
- ‚ùå –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –¶–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –ë–î
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ –≤–≤–æ–¥–µ
- ‚úÖ –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üí° –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –í –ë–£–î–£–©–ï–ú

### –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö:
1. **–ü—Ä–æ–≤–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–∫—É:** FormData —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è?
2. **–ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª—É—á–µ–Ω–∏–µ:** Controller –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–∏ –ø–æ–ª—è?
3. **–ü—Ä–æ–≤–µ—Ä—å –æ–±—Ä–∞–±–æ—Ç–∫—É:** –µ—Å—Ç—å –ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö?
4. **–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–ª–∏—á–∏—è:** store vs update, create vs edit

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
```bash
# –ü–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è
grep -r "prices\[" app/
grep -r "prices" app/Application/Http/Controllers/

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ store –∏ update –º–µ—Ç–æ–¥–æ–≤
diff <(grep -A 20 "public function store" Controller.php) \
     <(grep -A 20 "public function update" Controller.php)
```

---

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –£–†–û–ö–ò

- **BUSINESS_LOGIC_FIRST.md** - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø
- **PRICING_SECTION_FIX_REPORT.md** - –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã
- **MetroSelector —É—Ä–æ–∫** - –ø–æ—Ö–æ–∂–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å watcher'–∞–º–∏

---

**–ì–ª–∞–≤–Ω—ã–π —É—Ä–æ–∫:** –ü—Ä–∏–Ω—Ü–∏–ø BUSINESS_LOGIC_FIRST —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ä–µ—à–µ–Ω–∏—é. –í—Å–µ–≥–¥–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–π –ø–æ–ª–Ω—É—é —Ü–µ–ø–æ—á–∫—É –¥–∞–Ω–Ω—ã—Ö!