# üì∏ –û—Ç—á–µ—Ç –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

**–î–∞—Ç–∞:** 20 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–æ–µ–∫—Ç:** SPA Platform  
**–ú–æ–¥—É–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –≤ —á–µ—Ä–Ω–æ–≤–∏–∫–∞—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
2. [–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è](#—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è-–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è)
3. [–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω](#–∞–Ω–∞–ª–∏–∑-–ø—Ä–∏—á–∏–Ω)
4. [–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#–ø–æ—à–∞–≥–æ–≤–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
5. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-–∏–∑–º–µ–Ω–µ–Ω–∏—è)
6. [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
7. [–í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#–≤—ã–≤–æ–¥—ã-–∏-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Domain-Driven Design (DDD) –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –≤ —á–µ—Ä–Ω–æ–≤–∏–∫–∞—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π:

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ:
- ‚ùå –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- ‚ùå –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –±—Ä–∞—É–∑–µ—Ä –∑–∞–≤–∏—Å–∞–ª
- ‚ùå –í–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ "Allowed memory size exhausted" (–ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏)

### –ü—Ä–æ–±–ª–µ–º—ã —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ:
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ
- ‚ùå –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å –æ–±—Ä–∞—Ç–Ω–æ
- ‚ùå –†–∞–±–æ—Ç–∞–ª–æ —Ç–æ–ª—å–∫–æ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ç–æ —Å—Ä–∞–∑—É

---

## üïê –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: "–ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å, –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–¥–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è"
2. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ - –±—Ä–∞—É–∑–µ—Ä –∑–∞–≤–∏—Å–∞–ª
3. –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞ –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏ (536870912 bytes)

### –≠—Ç–∞–ø 2: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –∑–∞–≤–∏—Å–∞–Ω–∏—è
1. –ù–∞–π–¥–µ–Ω–æ –ø–æ–ª–µ `geo` —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ 33MB —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫
2. –ü—Ä–∏—á–∏–Ω–∞: —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π `JSON.stringify()` –≤ frontend –∫–æ–¥–µ
3. –ü–æ–ª–µ geo –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–ª–æ—Å—å, —É–≤–µ–ª–∏—á–∏–≤–∞—è—Å—å –≤ —Ä–∞–∑–º–µ—Ä–µ

### –≠—Ç–∞–ø 3: –ü—Ä–æ–±–ª–µ–º–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ
1. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ
2. Frontend –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. –ù–æ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å –æ–±—Ä–∞—Ç–Ω–æ

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω

### –ü—Ä–∏—á–∏–Ω–∞ 1: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞–º—è—Ç—å—é (Memory Exhaustion)

**–ö–æ–¥ —Å –æ—à–∏–±–∫–æ–π (adFormModel.ts):**
```typescript
// –ü—Ä–æ–±–ª–µ–º–∞: —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
if (form.geo) {
    formData.append('geo', JSON.stringify(form.geo))
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
- –ï—Å–ª–∏ `form.geo` —É–∂–µ –±—ã–ª–∞ —Å—Ç—Ä–æ–∫–æ–π JSON, –æ–Ω–∞ —Å–Ω–æ–≤–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–ª–∞—Å—å
- –ö–∞–∂–¥–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–ª–∞ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫
- –ü–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ü–∏–∫–ª–æ–≤ —Ä–∞–∑–º–µ—Ä –¥–æ—Å—Ç–∏–≥–∞–ª –¥–µ—Å—è—Ç–∫–æ–≤ –º–µ–≥–∞–±–∞–π—Ç

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ DraftController.php:**
```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –¥–ª—è photos[0], photos[1]
if ($request->has('photos')) {
    // –≠—Ç–æ—Ç –∫–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Ñ–æ—Ç–æ –∫–∞–∫ `photos[0]`, `photos[1]`, etc.
2. Laravel –º–µ—Ç–æ–¥ `$request->has('photos')` –≤–æ–∑–≤—Ä–∞—â–∞–ª `false`
3. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥—É–º–∞–ª, —á—Ç–æ photos –Ω–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î –≤–º–µ—Å—Ç–æ –Ω–æ–≤—ã—Ö

### –ü—Ä–∏—á–∏–Ω–∞ 3: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ DraftService

**–û—à–∏–±–∫–∞:**
```
Unclosed '{' on line 14
```

–í —Ñ–∞–π–ª–µ DraftService.php –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ 500 –æ—à–∏–±–∫–µ.

---

## üîß –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é

**–§–∞–π–ª:** `resources/js/src/features/ad-creation/model/adFormModel.ts`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ geo —É–∂–µ —Å—Ç—Ä–æ–∫–æ–π
if (form.geo) {
    if (typeof form.geo === 'string') {
        // –ï—Å–ª–∏ —É–∂–µ —Å—Ç—Ä–æ–∫–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
        formData.append('geo', form.geo)
    } else {
        // –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç, —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º
        formData.append('geo', JSON.stringify(form.geo))
    }
}
```

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏

**–§–∞–π–ª:** `app/Domain/Ad/Services/DraftService.php`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∞—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 169

```php
} // –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ –¥–ª—è if (!is_string($data[$field]))
```

### –®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ photos –≤ backend

**–§–∞–π–ª:** `app/Application/Http/Controllers/Ad/DraftController.php`

**–†–µ—à–µ–Ω–∏–µ 1:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

```php
// –ü—Ä–æ–±—É–µ–º –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞: photos.0 –∏ photos[0]
$dotNotation = "photos.{$index}";
$bracketNotation = "photos[{$index}]";

$hasFile = $request->hasFile($dotNotation) || $request->hasFile($bracketNotation);
$hasValue = $request->has($dotNotation) || $request->has($bracketNotation);
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è photos –≤ –ª—é–±–æ–º –≤–∏–¥–µ

```php
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –±—ã–ª–∏ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã photos –≤ –ª—é–±–æ–º –≤–∏–¥–µ
$hasPhotosInRequest = false;
foreach ($request->all() as $key => $value) {
    if (str_starts_with($key, 'photos[') || $key === 'photos') {
        $hasPhotosInRequest = true;
        break;
    }
}

if ($hasPhotosInRequest) {
    // Photos –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã - –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö
    $data['photos'] = $finalPhotos;
} else {
    // Photos –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–∑ –ë–î
    $data['photos'] = $currentPhotos;
}
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–æ—Ç–æ

**–§–∞–π–ª:** `resources/js/src/features/AdSections/MediaSection/ui/MediaSection.vue`

**–î–æ–±–∞–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π:**
```vue
<div v-if="localPhotos.length > 0" class="photos-header">
    <span class="photos-count">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π: {{ localPhotos.length }}</span>
    <button 
        type="button"
        @click="removeAllPhotos"
        class="remove-all-btn"
        title="–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏"
    >
        <svg><!-- –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã --></svg>
        –£–¥–∞–ª–∏—Ç—å –≤—Å–µ
    </button>
</div>
```

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è:**
```javascript
const removeAllPhotos = () => {
    // –û—á–∏—â–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤
    localPhotos.value = []
    
    // –≠–º–∏—Ç–∏–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
    emit('update:photos', [])
}
```

### –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ë—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –ø–æ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–µ:

1. **MediaSection.vue** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–æ—Ç–æ
2. **AdForm.vue** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π photos —á–µ—Ä–µ–∑ watch
3. **adFormModel.ts** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö
4. **DraftController.php** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
5. **DraftService.php** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î

---

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **Frontend (Vue.js):**
   - `resources/js/src/features/AdSections/MediaSection/ui/MediaSection.vue`
   - `resources/js/src/features/ad-creation/ui/AdForm.vue`
   - `resources/js/src/features/ad-creation/model/adFormModel.ts`

2. **Backend (Laravel):**
   - `app/Application/Http/Controllers/Ad/DraftController.php`
   - `app/Domain/Ad/Services/DraftService.php`

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```typescript
// –î–æ
formData.append('geo', JSON.stringify(form.geo))

// –ü–æ—Å–ª–µ
if (typeof form.geo === 'string') {
    formData.append('geo', form.geo)
} else {
    formData.append('geo', JSON.stringify(form.geo))
}
```

#### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤
```php
// –î–æ
if ($request->has('photos')) { /* ... */ }

// –ü–æ—Å–ª–µ
$hasPhotosInRequest = false;
foreach ($request->all() as $key => $value) {
    if (str_starts_with($key, 'photos[')) {
        $hasPhotosInRequest = true;
        break;
    }
}
```

#### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–æ–ª–µ–π
```php
// –ü–æ–¥–¥–µ—Ä–∂–∫–∞ photos.0 –∏ photos[0]
$photoValue = $request->input("photos.{$index}") 
           ?: $request->input("photos[{$index}]");
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:**
   - ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ drag-and-drop
   - ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ –≤ —á–µ—Ä–Ω–æ–≤–∏–∫–µ
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

2. **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:**
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∫–Ω–æ–ø–∫–æ–π "–£–¥–∞–ª–∏—Ç—å –≤—Å–µ"
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–π –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
   - ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–∞–º—è—Ç–∏
   - ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

| –î–µ–π—Å—Ç–≤–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|
| –î–æ–±–∞–≤–∏—Ç—å 1 —Ñ–æ—Ç–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –î–æ–±–∞–≤–∏—Ç—å 5 —Ñ–æ—Ç–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –£–¥–∞–ª–∏—Ç—å 1 —Ñ–æ—Ç–æ –∏–∑ 5 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—É—Å—Ç–æ–π —á–µ—Ä–Ω–æ–≤–∏–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

---

## üìö –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —É—Ä–æ–∫–∏:

1. **–ü—Ä–∏–Ω—Ü–∏–ø KISS (Keep It Simple, Stupid)**
   - –°–Ω–∞—á–∞–ª–∞ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ
   - –ù–µ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ –ª–æ–≥–∏–∫—É –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   - –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ —Ñ–æ—Ä–º–∞—Ç–∞ –ø–æ–ª–µ–π

2. **–í–∞–∂–Ω–æ—Å—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏–∏**
   - –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
   - –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON
   - TypeScript –ø–æ–º–æ–≥–∞–µ—Ç, –Ω–æ –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç runtime –æ—à–∏–±–æ–∫

3. **–û—Ç–ª–∞–¥–∫–∞ –ø–æ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–µ**
   - –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–∞–Ω–Ω—ã–º–∏ –≤–∞–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
   - Frontend ‚Üí Network ‚Üí Backend ‚Üí Database ‚Üí Response
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ:

1. **–î–ª—è —Ä–∞–±–æ—Ç—ã —Å FormData:**
   - –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —á—Ç–æ Laravel –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –ø–æ–ª—è –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: `field.0` –∏ `field[0]`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `$request->all()` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

2. **–î–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –ø–æ–ª—è–º–∏:**
   - –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–∏–ø –ø–µ—Ä–µ–¥ JSON.stringify()
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ try/catch –ø—Ä–∏ JSON –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
   - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

3. **–î–ª—è –æ—Ç–ª–∞–¥–∫–∏:**
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø—Ä–æ–±–ª–µ–º
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–º–æ–¥–∑–∏ –≤ –ª–æ–≥–∞—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ (üì∏, ‚úÖ, ‚ùå)
   - –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —É–¥–∞–ª—è—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥ –ø–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
   - –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ—Å–ª–µ –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ –∏ —Ä–∞–±–æ—Ç—É —Å –º–µ–¥–∏–∞

2. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π:**
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
   - –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ —Ç–æ–º, –ø–æ—á–µ–º—É –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏–º–µ–Ω–Ω–æ —Ç–∞–∫

3. **Code Review:**
   - –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã, null –∑–Ω–∞—á–µ–Ω–∏—è)

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **test-photo-delete-chain.php** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ backend –æ–ø–µ—Ä–∞—Ü–∏–π
2. **show-photo-logs.php** - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å photos
3. **test-photo-delete-debug.html** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—Ç–ª–∞–¥–∫–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
C:/Users/user1/.config/herd/bin/php.bat C:/www.spa.com/show-photo-logs.php

# –¢–µ—Å—Ç backend
C:/Users/user1/.config/herd/bin/php.bat C:/www.spa.com/test-photo-delete-chain.php
```

### –ü–æ–ª–µ–∑–Ω—ã–µ console –∫–æ–º–∞–Ω–¥—ã:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã
document.querySelector('[data-page]').__vueParentComponent?.proxy?.form?.photos

// –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É photos
window.debugPhotos = true
```

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω–∞ –ø—É—Ç–µ–º:
1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –≤ Laravel
3. –î–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–æ—Ç–æ

–†–µ—à–µ–Ω–∏–µ –∑–∞–Ω—è–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π, –Ω–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –í–∞–∂–Ω—ã–º —É—Ä–æ–∫–æ–º —Å—Ç–∞–ª–æ —Ç–æ, —á—Ç–æ –ø–æ—Å–ª–µ –±–æ–ª—å—à–∏—Ö —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –æ—Å–æ–±–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞:** Claude AI Assistant  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 20 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í–µ—Ä—Å–∏—è:** 1.0