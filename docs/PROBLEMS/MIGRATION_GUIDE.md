# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é (Domain Driven Design) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ SPA Platform.

## üéØ –¶–µ–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
2. **–£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
4. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–æ–Ω–æ–ª–∏—Ç)
```
app/
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ BookingService.php (800+ —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ UserService.php
‚îÇ   ‚îî‚îÄ‚îÄ SearchService.php
‚îú‚îÄ‚îÄ Models/
‚îî‚îÄ‚îÄ Http/Controllers/
```

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–æ–¥—É–ª—å–Ω–∞—è)
```
app/
‚îú‚îÄ‚îÄ Domain/
‚îÇ   ‚îú‚îÄ‚îÄ Booking/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Repositories/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Actions/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DTOs/
‚îÇ   ‚îú‚îÄ‚îÄ User/
‚îÇ   ‚îî‚îÄ‚îÄ Search/
‚îú‚îÄ‚îÄ Enums/
‚îú‚îÄ‚îÄ DTOs/
‚îú‚îÄ‚îÄ Repositories/
‚îî‚îÄ‚îÄ Services/Adapters/
```

## üöÄ –≠—Ç–∞–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π –ø–æ DDD –ø—Ä–∏–Ω—Ü–∏–ø–∞–º
- –ù–∞–ø–∏—Å–∞–Ω–∏–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤

### –≠—Ç–∞–ø 2: –ê–¥–∞–ø—Ç–µ—Ä—ã (‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω)
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Feature Flags
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –≠—Ç–∞–ø 3: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (üöß –í –ø—Ä–æ—Ü–µ—Å—Å–µ)
- –í–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ—Ö–≤–∞—Ç–∞

### –≠—Ç–∞–ø 4: –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
- 100% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer install

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate

# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
php artisan vendor:publish --tag=adapters-config
```

### 2. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
php artisan app:migrate-modular

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥
php artisan app:migrate-modular --step=2_enable_adapters

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º (dry run)
php artisan app:migrate-modular --dry-run
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
php artisan app:monitor-migration

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
php artisan app:monitor-migration --realtime

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç
php artisan app:monitor-migration --report
```

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Feature Flags

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–ª–∞–≥–æ–≤
php artisan feature:flag list

# –í–∫–ª—é—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
php artisan feature:flag enable use_modern_booking_service

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
php artisan feature:flag set use_modern_booking_service --percentage=25

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
php artisan feature:flag stats use_modern_booking_service
```

## üìä Feature Flags

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------|----------|--------------|
| `use_modern_booking_service` | –ù–æ–≤—ã–π BookingService | false |
| `use_modern_search` | –ù–æ–≤—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ | false |
| `use_adapters` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä—ã | true |
| `log_legacy_calls` | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å legacy –≤—ã–∑–æ–≤—ã | true |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```php
// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
if (feature('use_modern_booking_service')) {
    $booking = $this->modernBookingService->create($data);
} else {
    $booking = $this->legacyBookingService->createBooking($data);
}

// –° –∞–¥–∞–ø—Ç–µ—Ä–æ–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
$booking = $this->bookingAdapter->createBooking($data);
```

## üîÑ –ê–¥–∞–ø—Ç–µ—Ä—ã

–ê–¥–∞–ø—Ç–µ—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º –∏ –Ω–æ–≤—ã–º –∫–æ–¥–æ–º:

```php
// BookingServiceAdapter –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å
$adapter = app(BookingServiceAdapter::class);
$booking = $adapter->createBooking($data);
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã:
- `BookingServiceAdapter` - –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- `MasterServiceAdapter` - –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤
- `SearchServiceAdapter` - –¥–ª—è –ø–æ–∏—Å–∫–∞

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º:
1. **Adoption Rate** - % —É—Å–ø–µ—à–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. **Error Rate** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
3. **Performance** - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
4. **Legacy Calls** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- Adoption Rate > 95%
- Error Rate < 0.1%
- Performance improvement > 20%
- Legacy Calls ‚Üí 0

## ‚ö†Ô∏è Rollback –ø–ª–∞–Ω

–í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:

```bash
# 1. –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
php artisan feature:flag disable use_modern_booking_service
php artisan feature:flag disable use_modern_search

# 2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ legacy
php artisan feature:flag disable use_adapters

# 3. –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
php artisan app:migrate-modular --rollback
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –í—ã—Å–æ–∫–∏–π Error Rate
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f storage/logs/laravel.log`
2. –£–º–µ–Ω—å—à–∏—Ç—å % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏
4. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –æ—Ö–≤–∞—Ç

### –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à: `php artisan cache:clear`
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã: `php artisan app:optimize-performance`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î

### Legacy –≤—ã–∑–æ–≤—ã –Ω–µ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–¥–∞–ø—Ç–µ—Ä—ã
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Domain Driven Design](https://martinfowler.com/tags/domain%20driven%20design.html)
- [Feature Flags Best Practices](https://martinfowler.com/articles/feature-toggles.html)
- [Strangler Fig Pattern](https://martinfowler.com/bliki/StranglerFigApplication.html)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: {{ date }}*