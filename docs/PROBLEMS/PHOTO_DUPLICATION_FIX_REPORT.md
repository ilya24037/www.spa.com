# üì∏ –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø—Ä–∏ drag & drop

**–î–∞—Ç–∞:** 20 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–æ–µ–∫—Ç:** SPA Platform  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (drag & drop) —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –¥—É–±–ª–∏ –≤–º–µ—Å—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞

---

## üî¥ –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

### –°–∏–º–ø—Ç–æ–º—ã:
1. –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–æ—Ç–æ –Ω–∞ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –¥—É–±–ª—å
2. –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è–ª–æ—Å—å `handleFilesSelected {count: 1}` –ø–æ—Å–ª–µ drag & drop
3. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–æ—Å—å –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞
4. UploadZone —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–æ—Ç–æ

### –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
‚úÖ Drag & drop —Ñ–æ—Ç–æ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ (5 —Ñ–æ—Ç–æ)
üìÅ PhotoUpload: handleFilesSelected {count: 1}  ‚Üê –í–û–¢ –ü–†–û–ë–õ–ï–ú–ê!
‚ö° addPhotos –ù–ê–ß–ê–õ–û {filesCount: 1, currentPhotosCount: 5}
‚úÖ –ü–û–°–õ–ï –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è localPhotos.length: 6  ‚Üê –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï!
```

---

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´

### –ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ drag & drop:**
   - **PhotoGrid** - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ (drag & drop)
   - **UploadZone** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (drag & drop)
   - **UploadZone —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª** –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–æ—Ç–æ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Ñ–∞–π–ª—ã

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π:**
   - –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤: `dataTransfer.types = ['Files']` ‚Üí `length = 1`
   - –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Ñ–æ—Ç–æ: `dataTransfer.types = ['Files', 'text/plain', ...]` ‚Üí `length > 1`
   - UploadZone –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –í–°–ï —Å–æ–±—ã—Ç–∏—è —Å `hasFiles = true`

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:**
   - UploadZone –Ω–µ —Ä–∞–∑–ª–∏—á–∞–ª –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –∏ —Ñ–∞–π–ª–æ–≤
   - Drag & drop —Å–æ–±—ã—Ç–∏—è –Ω–µ –±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã

---

## ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –≤ UploadZone

**–§–∞–π–ª:** `resources/js/src/features/media/photo-upload/ui/components/UploadZone.vue`

```typescript
const handleDrop = (event: DragEvent) => {
  console.log('üìÅ UploadZone: handleDrop –≤—ã–∑–≤–∞–Ω', { 
    dataTransferTypes: event.dataTransfer?.types,
    hasFiles: event.dataTransfer?.types.includes('Files'),
    typesCount: event.dataTransfer?.types.length
  })
  
  isDragOver.value = false
  
  // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û —Ñ–∞–π–ª—ã, –±–µ–∑ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤
  const hasFiles = event.dataTransfer?.types.includes('Files')
  const hasOnlyFiles = hasFiles && event.dataTransfer?.types.length === 1
  
  if (hasOnlyFiles) {
    const files = Array.from(event.dataTransfer?.files || [])
    if (files.length > 0) {
      console.log('‚úÖ UploadZone: –§–∞–π–ª—ã –ø–µ—Ä–µ—Ç–∞—â–µ–Ω—ã, —ç–º–∏—Ç–∏–º —Å–æ–±—ã—Ç–∏–µ', { filesCount: files.length })
      emit('files-selected', files)
    }
  } else {
    console.log('‚ùå UploadZone: Drag & drop –ø—Ä–æ–ø—É—â–µ–Ω - –Ω–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ', {
      hasFiles,
      hasOnlyFiles,
      typesCount: event.dataTransfer?.types.length,
      types: Array.from(event.dataTransfer?.types || [])
    })
  }
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ drag & drop –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ñ–æ—Ç–æ

```vue
<div 
  class="upload-zone border-2 border-dashed rounded-lg p-4 transition-colors"
  :class="{ 
    'border-blue-400 bg-blue-50': isDragOver,
    'border-gray-300': !isDragOver
  }"
  @drop.prevent="hasContent ? null : handleDrop"
  @dragover.prevent="hasContent ? null : handleDragOver"
  @dragleave.prevent="hasContent ? null : (isDragOver = false)"
>
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ preventDefault –≤ PhotoGrid

**–§–∞–π–ª:** `resources/js/src/features/media/photo-upload/ui/components/PhotoGrid.vue`

```typescript
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–±—Ä–∞–ª–∏ —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ preventDefault –∏ stopPropagation
const handleDragStart = (index: number, event: DragEvent) => {
  // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º dragstart - –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ
  emit('dragstart', index)
}

const handleDragOver = (index: number, event: DragEvent) => {
  // –¢–æ–ª—å–∫–æ preventDefault –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è drop
  event.preventDefault()
  emit('dragover', index)
}

const handleDragDrop = (index: number, event: DragEvent) => {
  // –¢–æ–ª—å–∫–æ preventDefault –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è drop
  event.preventDefault()
  emit('drop', index)
}

const handleDragEnd = (event: DragEvent) => {
  // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º dragend
  emit('dragend')
}
```

### 4. –£–±—Ä–∞–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ drag —Å–æ–±—ã—Ç–∏–π –≤ PhotoUpload

**–§–∞–π–ª:** `resources/js/src/features/media/photo-upload/ui/PhotoUpload.vue`

```vue
<!-- ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–±—Ä–∞–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É drag —Å–æ–±—ã—Ç–∏–π -->
<section 
  v-else
  class="photo-upload space-y-4"
  role="region"
  aria-label="–ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏"
>
```

---

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. ‚úÖ **Drag & drop —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Ñ–æ—Ç–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—é—Ç—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
2. ‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞
3. ‚úÖ **UploadZone –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ
4. ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ
5. ‚úÖ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - UploadZone –∏ PhotoGrid –Ω–µ –º–µ—à–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- **–î–û:** –ü—Ä–∏ drag & drop —Ñ–æ—Ç–æ UploadZone —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –∏ –¥–æ–±–∞–≤–ª—è–ª —Ñ–∞–π–ª—ã
- **–ü–û–°–õ–ï:** UploadZone —Ä–∞–∑–ª–∏—á–∞–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –∏ —Ñ–∞–π–ª–æ–≤

---

## üéØ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
3. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –Ω–∞ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ (drag & drop)
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - –§–æ—Ç–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–æ—Å—å –Ω–∞ –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
   - –í –∫–æ–Ω—Å–æ–ª–∏ –ù–ï–¢ `handleFilesSelected`
   - UploadZone –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Drag & drop –ø—Ä–æ–ø—É—â–µ–Ω"

### –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
```
‚úÖ Drag & drop —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
üîÑ PhotoUpload: onDragDrop –≤—ã–∑–≤–∞–Ω { index: 0 }
üîÑ usePhotoUpload: handleDragDrop –≤—ã–∑–≤–∞–Ω { sourceIndex: 4, targetIndex: 0, currentPhotosLength: 5 }
‚úÖ usePhotoUpload: reorderPhotos –∑–∞–≤–µ—Ä—à–µ–Ω, –Ω–æ–≤–∞—è –¥–ª–∏–Ω–∞: 5

‚ùå UploadZone –ù–ï –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:
üìÅ UploadZone: handleDrop –≤—ã–∑–≤–∞–Ω { typesCount: 4 }  ‚Üê –ë–æ–ª—å—à–µ 1 —Ç–∏–ø–∞
‚ùå UploadZone: Drag & drop –ø—Ä–æ–ø—É—â–µ–Ω - –Ω–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ
```

---

## üìö –£–†–û–ö–ò

1. **–ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ drag & drop —Ñ–æ—Ç–æ**, –∞ –≤ **–∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ `types.length === 1`** —Ä–µ—à–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** drag & drop –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
5. **–ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å** drag & drop —Ñ–æ—Ç–æ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ `preventDefault`

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –õ–æ–≥–∏–∫–∞ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π:
```typescript
// –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤: types = ['Files'] ‚Üí length = 1
// –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ: types = ['Files', 'text/plain', ...] ‚Üí length > 1

const hasOnlyFiles = hasFiles && event.dataTransfer?.types.length === 1

if (hasOnlyFiles) {
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã
} else {
  // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ
}
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:
```vue
@drop.prevent="hasContent ? null : handleDrop"
@dragover.prevent="hasContent ? null : handleDragOver"
```

---

## üèÜ –í–´–í–û–î–´

–ü—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞ —á–µ—Ä–µ–∑:
1. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ** —Ç–∏–ø–æ–≤ drag & drop —Å–æ–±—ã—Ç–∏–π
2. **–£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** UploadZone –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ñ–æ—Ç–æ
3. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö** preventDefault –≤ PhotoGrid
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–¢–µ–ø–µ—Ä—å drag & drop —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 20 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Claude AI Assistant + –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üî¥ –í—ã—Å–æ–∫–∞—è (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)