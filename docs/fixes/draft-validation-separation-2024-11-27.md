# üìã –ü–õ–ê–ù: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 27.11.2024  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Ç—Ä–µ–±—É—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (—Ü–µ–Ω–∞, —Ç–µ–ª–µ—Ñ–æ–Ω, –≥–æ—Ä–æ–¥)  
**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é - –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ë–ï–ó –ø—Ä–æ–≤–µ—Ä–æ–∫, –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ü–û–õ–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞

## üìä –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å:
- ‚ùå –ì–µ–æ–≥—Ä–∞—Ñ–∏—è (–≥–æ—Ä–æ–¥, –∞–¥—Ä–µ—Å) 
- ‚ùå –ö–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω)
- ‚ùå –¶–µ–Ω–∞

–≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —á–µ—Ä–Ω–æ–≤–∏–∫ –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –ª—é–±–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

## üéØ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫"** - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ë–ï–ó –≤–∞–ª–∏–¥–∞—Ü–∏–∏
2. **"–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –í–°–ï –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

## üìù –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–§–∞–π–ª:** `resources/js/src/features/ad-creation/model/adFormModel.ts`

```typescript
// –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
const validateForPublish = (): boolean => {
  const newErrors: any = {}
  
  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
  if (!form.parameters.title?.trim()) {
    newErrors['parameters.title'] = '–£–∫–∞–∂–∏—Ç–µ –∏–º—è'
  }
  
  if (!form.price || form.price <= 0) {
    newErrors.price = '–£–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—É'
  }
  
  if (!form.contacts.phone?.trim()) {
    newErrors['contacts.phone'] = '–£–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω'
  }
  
  if (!form.geo.city) {
    newErrors['geo.city'] = '–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥'
  }
  
  if (!form.geo.address?.trim()) {
    newErrors['geo.address'] = '–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å'
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–¥–∏–∞
  if (!form.photos?.length) {
    newErrors.photos = '–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Ñ–æ—Ç–æ'
  }
  
  errors.value = newErrors
  
  // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  if (Object.keys(newErrors).length > 0) {
    const errorCount = Object.keys(newErrors).length
    console.error(`‚ùå –ù–∞–π–¥–µ–Ω–æ ${errorCount} –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:`, newErrors)
    
    // TODO: –ü–æ–∫–∞–∑–∞—Ç—å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    // showNotification(`–ó–∞–ø–æ–ª–Ω–∏—Ç–µ ${errorCount} –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π`, 'error')
    
    // TODO: –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∫ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
    // scrollToFirstError()
  }
  
  return Object.keys(newErrors).length === 0
}
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å handleSaveDraft - —É–±—Ä–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é

```typescript
const handleSaveDraft = async () => {
  // –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
  if (saving.value) {
    console.log('‚ö†Ô∏è handleSaveDraft: –£–∂–µ –∏–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ')
    return
  }
  
  try {
    saving.value = true
    
    // –ë–ï–ó –í–ê–õ–ò–î–ê–¶–ò–ò! –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫ –∫–∞–∫ –µ—Å—Ç—å
    console.log('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –ë–ï–ó –≤–∞–ª–∏–¥–∞—Ü–∏–∏')
    
    // –°–æ–∑–¥–∞–µ–º FormData –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
    const formData = new FormData()
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  } catch (error) {
    saving.value = false
    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞:', error)
  }
}
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å handlePublish - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é

```typescript
const handlePublish = async () => {
  // –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
  if (saving.value) {
    console.log('‚ö†Ô∏è handlePublish: –£–∂–µ –∏–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ')
    return
  }
  
  if (!authStore.isAuthenticated) {
    router.visit('/login')
    return
  }
  
  // –ü–û–õ–ù–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
  if (!validateForPublish()) {
    console.log('‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏')
    return
  }
  
  console.log('‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞, –ø—É–±–ª–∏–∫—É–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–µ')
  saving.value = true
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
}
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å handleSubmit –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

```typescript
const handleSubmit = async () => {
  // –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
  if (saving.value) {
    console.log('‚ö†Ô∏è handleSubmit: –£–∂–µ –∏–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ')
    return
  }
  
  // –î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
  if (!validateForPublish()) {
    console.log('‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞')
    return
  }
  
  console.log('‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ')
  saving.value = true
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
}
```

### –®–∞–≥ 5: –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é –æ—à–∏–±–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª:** `resources/js/src/features/ad-creation/ui/AdForm.vue`

```typescript
// –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
const scrollToFirstError = () => {
  const firstError = document.querySelector('.has-error')
  if (firstError) {
    firstError.scrollIntoView({ 
      behavior: 'smooth', 
      block: 'center' 
    })
  }
}

// –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫ –∫ —Å–µ–∫—Ü–∏—è–º
const sectionHasError = (section: string): boolean => {
  return Object.keys(errors).some(key => key.startsWith(section))
}
```

## üìÇ –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **`resources/js/src/features/ad-creation/model/adFormModel.ts`**
   - –î–æ–±–∞–≤–∏—Ç—å `validateForPublish()`
   - –û–±–Ω–æ–≤–∏—Ç—å `handleSaveDraft()` - —É–±—Ä–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
   - –û–±–Ω–æ–≤–∏—Ç—å `handlePublish()` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `validateForPublish()`
   - –û–±–Ω–æ–≤–∏—Ç—å `handleSubmit()` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `validateForPublish()`

2. **`resources/js/src/features/ad-creation/ui/AdForm.vue`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫ –æ—à–∏–±–∫–∞–º

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫"** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –í–°–ï–ì–î–ê, –¥–∞–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É
2. **"–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - ‚úÖ –ò–º—è (title)
   - ‚úÖ –¶–µ–Ω–∞ (price)
   - ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω (contacts.phone)
   - ‚úÖ –ì–æ—Ä–æ–¥ (geo.city)
   - ‚úÖ –ê–¥—Ä–µ—Å (geo.address)
   - ‚úÖ –•–æ—Ç—è –±—ã –æ–¥–Ω–æ —Ñ–æ—Ç–æ (photos)

3. –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ –∫–∞–∫–∏–µ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
   - –ù–µ –¥–∞–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
   - (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –∫ –ø–µ—Ä–≤–æ–º—É –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º—É –ø–æ–ª—é

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
2. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫" —Å –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º–æ–π - –¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
3. –ù–∞–∂–∞—Ç—å "–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ" —Å –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º–æ–π - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫–∏
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
5. –ù–∞–∂–∞—Ç—å "–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ" - –¥–æ–ª–∂–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω–∞
- –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç–æ–π —á–µ—Ä–Ω–æ–≤–∏–∫
- –ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –í–°–ï –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- –°–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `validateForPublish()`