# –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –¥—É–±–ª–∏–∫–∞—Ç—ã –≤–º–µ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —á–µ—Ä–Ω–æ–≤–∏–∫–∞.

## –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞
–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —á–µ—Ä–Ω–æ–≤–∏–∫–∞–º–∏ –∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏:
- **–ß–µ—Ä–Ω–æ–≤–∏–∫–∏**: `AdController` –≤–æ–∑–≤—Ä–∞—â–∞–ª –ø—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `$preparedData`
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è**: `AdController` –≤–æ–∑–≤—Ä–∞—â–∞–ª `new AdResource($ad)`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–ª—é—á `data`

–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –≤ `Edit.vue` —Ç–µ—Ä—è–ª—Å—è ID –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ `AdForm`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤—ã—Ö —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –≤–º–µ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. Frontend –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Edit.vue)
**–§–∞–π–ª:** `resources/js/Pages/Ad/Edit.vue`

```javascript
// –°–æ–∑–¥–∞–µ–º actualAd –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
const actualAd = props.ad?.data || props.ad

// –ò—Å–ø–æ–ª—å–∑—É–µ–º actualAd –≤–µ–∑–¥–µ –≤ template
<AdForm 
  :category="actualAd.category || 'erotic'"
  :ad-id="actualAd.id"
  :initial-data="actualAd"
/>
```

### 2. Backend —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è (AdController.php)
**–§–∞–π–ª:** `app/Application/Http/Controllers/Ad/AdController.php`

```php
// –¢–µ–ø–µ—Ä—å –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º AdResource
if ($ad->status->value === 'draft') {
    $draftService = app(\App\Domain\Ad\Services\DraftService::class);
    $preparedData = $draftService->prepareForDisplay($ad);
    $preparedData['id'] = (int) $ad->id;
    
    // –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑—É–µ–º AdResource –¥–ª—è –æ–±–µ—Ä—Ç–∫–∏ –≤ 'data'
    $ad->setRawAttributes($preparedData);
    
    return Inertia::render('Ad/Edit', [
        'ad' => new AdResource($ad), // –¢–µ–ø–µ—Ä—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ–¥–∏–Ω–∞—è!
        'isActive' => false
    ]);
}
```

### 3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

**Edit.vue:**
```javascript
console.log('üîç Edit.vue: props.ad —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:', {
  hasData: !!props.ad?.data,
  actualAdId: actualAd?.id,
  actualAdStatus: actualAd?.status
})
```

**AdForm.vue:**
```javascript
console.log('üîç AdForm.vue: –ø–æ–ª—É—á–µ–Ω—ã props:', {
  adId: props.adId,
  initialDataId: props.initialData?.id
})
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ **ID –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –∏–∑ Edit.vue –≤ AdForm.vue  
‚úÖ **–ï–¥–∏–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π (–≤—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ AdResource)  
‚úÖ **–î—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è** - —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ PUT –∑–∞–ø—Ä–æ—Å  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–æ–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö  

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫: `http://spa.test/ads/{id}/edit`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å - –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ID –æ—Å—Ç–∞–ª—Å—è —Ç–µ–º –∂–µ (–Ω–µ —Å–æ–∑–¥–∞–ª—Å—è –¥—É–±–ª–∏–∫–∞—Ç)

## –°–≤—è–∑—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Ä–µ—à–µ–Ω–∏–µ–º
–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –∏–∑ —Ñ–∞–π–ª–∞ `DRAFT_DUPLICATION_FIX_COMPLETE_REPORT.md` –æ—Ç 19.08.2025, –≥–¥–µ –±—ã–ª–∞ –≤—ã—è–≤–ª–µ–Ω–∞ —Ç–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö –æ—Ç AdResource.

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑:
- `resources/js/Pages/Ad/Edit.vue` (—Å—Ç—Ä–æ–∫–∏ 92-100)
- `resources/js/src/features/ad-creation/ui/AdForm.vue` (—Å—Ç—Ä–æ–∫–∏ 481-487)