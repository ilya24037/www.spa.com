# üöÄ –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù: –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–∞–π–æ–Ω–∞–º–∏ –∏ –º–µ—Ç—Ä–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É Avito

**–°–æ–∑–¥–∞–Ω–æ:** 09.09.2025  
**–ê–≤—Ç–æ—Ä:** AI Development Team  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üéØ –û–ë–©–ê–Ø –ó–ê–î–ê–ß–ê

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥–æ—Ä–æ–¥** –∏–∑ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ –≥–µ–æ–∫–æ–¥–∏–Ω–≥
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã"** —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ (–∫–∞–∫ –Ω–∞ Avito)
- **–ü–æ–¥–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ** —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤ —Å –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–æ–º
- **–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ –∫–∞–∫ –Ω–∞ Avito** - –∑–Ω–∞–∫–æ–º–æ–µ UX –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üéØ –ë–∏–∑–Ω–µ—Å-—Ü–µ–ª—å
–ü–æ–≤—ã—Å–∏—Ç—å —É–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ —Ç–æ—á–Ω–æ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ —É—Å–ª—É–≥, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫:
- –£–≤–µ–ª–∏—á–µ–Ω–∏—é –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ 15-20%
- –£–ª—É—á—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–Ω–∏–∂–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

---

## üìã –≠–¢–ê–ü–´ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠–¢–ê–ü 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (Backend) üìÖ –ù–µ–¥–µ–ª—è 1

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
**–§–∞–π–ª:** `database/migrations/2025_01_01_000001_create_geography_tables.php`

```sql
-- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏
CREATE TABLE cities (
  id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL UNIQUE,
  region VARCHAR(255) NOT NULL,
  has_metro BOOLEAN DEFAULT FALSE,
  has_districts BOOLEAN DEFAULT TRUE,
  population INTEGER UNSIGNED,
  latitude DECIMAL(10,8),
  longitude DECIMAL(11,8),
  created_at TIMESTAMP NULL DEFAULT NULL,
  updated_at TIMESTAMP NULL DEFAULT NULL,
  INDEX idx_cities_name (name),
  INDEX idx_cities_has_metro (has_metro),
  INDEX idx_cities_population (population)
);

-- –†–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–æ–≤ (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ)
CREATE TABLE city_districts (
  id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  city_id BIGINT UNSIGNED NOT NULL,
  name VARCHAR(255) NOT NULL,
  sort_order INTEGER DEFAULT 0,
  is_central BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP NULL DEFAULT NULL,
  updated_at TIMESTAMP NULL DEFAULT NULL,
  FOREIGN KEY (city_id) REFERENCES cities(id) ON DELETE CASCADE,
  INDEX idx_districts_city_id (city_id),
  INDEX idx_districts_sort_order (sort_order)
);

-- –õ–∏–Ω–∏–∏ –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞
CREATE TABLE metro_lines (
  id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  city_id BIGINT UNSIGNED NOT NULL,
  name VARCHAR(255) NOT NULL,
  color VARCHAR(7) NOT NULL COMMENT 'HEX —Ü–≤–µ—Ç –ª–∏–Ω–∏–∏',
  sort_order INTEGER DEFAULT 0,
  created_at TIMESTAMP NULL DEFAULT NULL,
  updated_at TIMESTAMP NULL DEFAULT NULL,
  FOREIGN KEY (city_id) REFERENCES cities(id) ON DELETE CASCADE,
  INDEX idx_metro_lines_city_id (city_id),
  INDEX idx_metro_lines_sort_order (sort_order)
);

-- –°—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ
CREATE TABLE metro_stations (
  id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  line_id BIGINT UNSIGNED NOT NULL,
  name VARCHAR(255) NOT NULL,
  sort_order INTEGER DEFAULT 0,
  latitude DECIMAL(10,8) NULL,
  longitude DECIMAL(11,8) NULL,
  created_at TIMESTAMP NULL DEFAULT NULL,
  updated_at TIMESTAMP NULL DEFAULT NULL,
  FOREIGN KEY (line_id) REFERENCES metro_lines(id) ON DELETE CASCADE,
  INDEX idx_metro_stations_line_id (line_id),
  INDEX idx_metro_stations_sort_order (sort_order),
  INDEX idx_metro_stations_coordinates (latitude, longitude)
);
```

#### 1.2 –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** `database/seeders/GeographySeeder.php`

**–ì–æ—Ä–æ–¥–∞-–º–∏–ª–ª–∏–æ–Ω–Ω–∏–∫–∏ —Å –º–µ—Ç—Ä–æ (–∫—Ä–∏—Ç–µ—Ä–∏–π >500–∫ –Ω–∞—Å–µ–ª–µ–Ω–∏—è –∏–ª–∏ –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç—Ä–æ):**
```php
$citiesWithMetro = [
    ['name' => '–ú–æ—Å–∫–≤–∞', 'region' => '–ú–æ—Å–∫–≤–∞', 'population' => 12678079, 'has_metro' => true],
    ['name' => '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', 'region' => '–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 5384342, 'has_metro' => true],
    ['name' => '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', 'region' => '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1633595, 'has_metro' => true],
    ['name' => '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', 'region' => '–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1495066, 'has_metro' => true],
    ['name' => '–ö–∞–∑–∞–Ω—å', 'region' => '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω', 'population' => 1257391, 'has_metro' => true],
    ['name' => '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥', 'region' => '–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1252236, 'has_metro' => true],
    ['name' => '–°–∞–º–∞—Ä–∞', 'region' => '–°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1156644, 'has_metro' => true],
];

$largeCitiesWithoutMetro = [
    ['name' => '–ß–µ–ª—è–±–∏–Ω—Å–∫', 'region' => '–ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1196680],
    ['name' => '–û–º—Å–∫', 'region' => '–û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1154507],
    ['name' => '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É', 'region' => '–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1142162],
    ['name' => '–£—Ñ–∞', 'region' => '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω', 'population' => 1135727],
    ['name' => '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫', 'region' => '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π', 'population' => 1103301],
    ['name' => '–í–æ—Ä–æ–Ω–µ–∂', 'region' => '–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1058261],
    ['name' => '–ü–µ—Ä–º—å', 'region' => '–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π', 'population' => 1049199],
    ['name' => '–í–æ–ª–≥–æ–≥—Ä–∞–¥', 'region' => '–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', 'population' => 1008998],
    ['name' => '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', 'region' => '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π', 'population' => 948827],
];
```

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ä–∞–π–æ–Ω–∞–º –ú–æ—Å–∫–≤—ã:**
```php
$moscowDistricts = [
    // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥
    '–¶–ê–û' => [
        '–ê—Ä–±–∞—Ç', '–ë–∞—Å–º–∞–Ω–Ω—ã–π', '–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—á—å–µ', '–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∏–π', 
        '–ú–µ—â–∞–Ω—Å–∫–∏–π', '–ü—Ä–µ—Å–Ω–µ–Ω—Å–∫–∏–π', '–¢–∞–≥–∞–Ω—Å–∫–∏–π', '–¢–≤–µ—Ä—Å–∫–æ–π', 
        '–•–∞–º–æ–≤–Ω–∏–∫–∏', '–Ø–∫–∏–º–∞–Ω–∫–∞'
    ],
    // –°–µ–≤–µ—Ä–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥  
    '–°–ê–û' => [
        '–ê—ç—Ä–æ–ø–æ—Ä—Ç', '–ë–µ–≥–æ–≤–æ–π', '–ë–µ—Å–∫—É–¥–Ω–∏–∫–æ–≤—Å–∫–∏–π', '–í–æ–π–∫–æ–≤—Å–∫–∏–π', 
        '–ì–æ–ª–æ–≤–∏–Ω—Å–∫–∏–π', '–î–µ–≥—É–Ω–∏–Ω–æ –í–æ—Å—Ç–æ—á–Ω–æ–µ', '–î–µ–≥—É–Ω–∏–Ω–æ –ó–∞–ø–∞–¥–Ω–æ–µ', 
        '–î–º–∏—Ç—Ä–æ–≤—Å–∫–∏–π', '–ö–æ–ø—Ç–µ–≤–æ', '–õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π', '–ú–æ–ª–∂–∞–Ω–∏–Ω–æ–≤—Å–∫–∏–π', 
        '–°–∞–≤–µ–ª–æ–≤—Å–∫–∏–π', '–°–æ–∫–æ–ª', '–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∏–π', '–•–æ–≤—Ä–∏–Ω–æ', '–•–æ—Ä–æ—à–µ–≤—Å–∫–∏–π'
    ],
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ 10 –æ–∫—Ä—É–≥–æ–≤
];
```

**–ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ –ú–æ—Å–∫–≤—ã:**
```php
$moscowMetroLines = [
    ['name' => '–°–æ–∫–æ–ª—å–Ω–∏—á–µ—Å–∫–∞—è', 'color' => '#E42313', 'stations' => [
        '–ë—É–ª—å–≤–∞—Ä –†–æ–∫–æ—Å—Å–æ–≤—Å–∫–æ–≥–æ', '–ß–µ—Ä–∫–∏–∑–æ–≤—Å–∫–∞—è', '–ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å',
        '–°–æ–∫–æ–ª—å–Ω–∏–∫–∏', '–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∞—è', '–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è', '–ö—Ä–∞—Å–Ω—ã–µ –≤–æ—Ä–æ—Ç–∞',
        '–ß–∏—Å—Ç—ã–µ –ø—Ä—É–¥—ã', '–õ—É–±—è–Ω–∫–∞', '–û—Ö–æ—Ç–Ω—ã–π —Ä—è–¥', '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º. –õ–µ–Ω–∏–Ω–∞',
        '–ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è', '–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã', '–§—Ä—É–Ω–∑–µ–Ω—Å–∫–∞—è', '–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è',
        '–í–æ—Ä–æ–±—å–µ–≤—ã –≥–æ—Ä—ã', '–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç', '–ü—Ä–æ—Å–ø–µ–∫—Ç –í–µ—Ä–Ω–∞–¥—Å–∫–æ–≥–æ', '–Æ–≥–æ-–ó–∞–ø–∞–¥–Ω–∞—è',
        '–¢—Ä–æ–ø–∞—Ä–µ–≤–æ', '–†—É–º—è–Ω—Ü–µ–≤–æ', '–°–∞–ª–∞—Ä—å–µ–≤–æ'
    ]],
    ['name' => '–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—Ü–∫–∞—è', 'color' => '#4F8242', 'stations' => [
        '–•–æ–≤—Ä–∏–Ω–æ', '–ë–µ–ª–æ–º–æ—Ä—Å–∫–∞—è', '–†–µ—á–Ω–æ–π –≤–æ–∫–∑–∞–ª', '–í–æ–¥–Ω—ã–π —Å—Ç–∞–¥–∏–æ–Ω',
        '–í–æ–π–∫–æ–≤—Å–∫–∞—è', '–°–æ–∫–æ–ª', '–ê—ç—Ä–æ–ø–æ—Ä—Ç', '–î–∏–Ω–∞–º–æ', '–ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è',
        '–ú–∞—è–∫–æ–≤—Å–∫–∞—è', '–¢–≤–µ—Ä—Å–∫–∞—è', '–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è', '–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è',
        '–ü–∞–≤–µ–ª–µ—Ü–∫–∞—è', '–ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è', '–¢–µ—Ö–Ω–æ–ø–∞—Ä–∫', '–ö–æ–ª–æ–º–µ–Ω—Å–∫–∞—è',
        '–ö–∞—à–∏—Ä—Å–∫–∞—è', '–ö–∞–Ω—Ç–µ–º–∏—Ä–æ–≤—Å–∫–∞—è', '–¶–∞—Ä–∏—Ü—ã–Ω–æ', '–û—Ä–µ—Ö–æ–≤–æ', '–î–æ–º–æ–¥–µ–¥–æ–≤—Å–∫–∞—è',
        '–ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è', '–ê–ª–º–∞-–ê—Ç–∏–Ω—Å–∫–∞—è'
    ]],
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ 12 –ª–∏–Ω–∏–π
];
```

### –≠–¢–ê–ü 2: Backend Domain (DDD Architecture) üìÖ –ù–µ–¥–µ–ª—è 1-2

#### 2.1 –ú–æ–¥–µ–ª–∏ –¥–æ–º–µ–Ω–∞ Geography
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** `app/Domain/Geography/`

```php
// app/Domain/Geography/Models/City.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\HasManyThrough;

/**
 * City model
 * 
 * @property int $id
 * @property string $name
 * @property string $region  
 * @property bool $has_metro
 * @property bool $has_districts
 * @property int $population
 * @property float $latitude
 * @property float $longitude
 */
class City extends Model
{
    protected $fillable = [
        'name', 'region', 'has_metro', 'has_districts', 
        'population', 'latitude', 'longitude'
    ];

    protected $casts = [
        'has_metro' => 'boolean',
        'has_districts' => 'boolean',
        'population' => 'integer',
        'latitude' => 'decimal:8',
        'longitude' => 'decimal:8'
    ];

    /**
     * –†–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–∞
     */
    public function districts(): HasMany
    {
        return $this->hasMany(CityDistrict::class)
            ->orderBy('sort_order')
            ->orderBy('name');
    }

    /**
     * –õ–∏–Ω–∏–∏ –º–µ—Ç—Ä–æ –≥–æ—Ä–æ–¥–∞
     */
    public function metroLines(): HasMany  
    {
        return $this->hasMany(MetroLine::class)
            ->orderBy('sort_order')
            ->orderBy('name');
    }

    /**
     * –í—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ –≥–æ—Ä–æ–¥–∞
     */
    public function metroStations(): HasManyThrough
    {
        return $this->hasManyThrough(MetroStation::class, MetroLine::class)
            ->orderBy('metro_lines.sort_order')
            ->orderBy('metro_stations.sort_order');
    }

    /**
     * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ—Å—Ç—å –ª–∏ –æ–ø—Ü–∏—è "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã"
     */
    public function hasZonesOption(): bool
    {
        return $this->population > 500000 || $this->has_metro;
    }

    /**
     * –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫)
     */
    public function scopeSearchByName($query, string $name)
    {
        return $query->where('name', 'LIKE', "%{$name}%")
            ->orWhere('name', 'SOUNDS LIKE', $name);
    }
}
```

```php
// app/Domain/Geography/Models/CityDistrict.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

/**
 * CityDistrict model
 */
class CityDistrict extends Model
{
    protected $fillable = ['city_id', 'name', 'sort_order', 'is_central'];

    protected $casts = [
        'city_id' => 'integer',
        'sort_order' => 'integer', 
        'is_central' => 'boolean'
    ];

    public function city(): BelongsTo
    {
        return $this->belongsTo(City::class);
    }
}
```

```php
// app/Domain/Geography/Models/MetroLine.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

/**
 * MetroLine model
 */
class MetroLine extends Model
{
    protected $fillable = ['city_id', 'name', 'color', 'sort_order'];

    protected $casts = [
        'city_id' => 'integer',
        'sort_order' => 'integer'
    ];

    public function city(): BelongsTo
    {
        return $this->belongsTo(City::class);
    }

    public function stations(): HasMany
    {
        return $this->hasMany(MetroStation::class, 'line_id')
            ->orderBy('sort_order')
            ->orderBy('name');
    }
}
```

```php
// app/Domain/Geography/Models/MetroStation.php  
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

/**
 * MetroStation model
 */
class MetroStation extends Model
{
    protected $fillable = [
        'line_id', 'name', 'sort_order', 'latitude', 'longitude'
    ];

    protected $casts = [
        'line_id' => 'integer',
        'sort_order' => 'integer',
        'latitude' => 'decimal:8',
        'longitude' => 'decimal:8'
    ];

    public function line(): BelongsTo
    {
        return $this->belongsTo(MetroLine::class, 'line_id');
    }
}
```

#### 2.2 –°–µ—Ä–≤–∏—Å—ã –¥–æ–º–µ–Ω–∞
```php
// app/Domain/Geography/Services/GeographyService.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Services;

use App\Domain\Geography\Models\City;
use App\Domain\Geography\DTOs\CityGeographyDTO;
use App\Domain\Geography\DTOs\MetroDataDTO;
use App\Domain\Geography\Repositories\GeographyRepository;
use Illuminate\Support\Facades\Cache;

/**
 * –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
 */
class GeographyService
{
    public function __construct(
        private GeographyRepository $repository,
        private CityDetectionService $cityDetectionService
    ) {}

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ–¥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
     */
    public function getCityByName(string $name): ?City
    {
        return Cache::remember(
            "city_by_name_{$name}",
            3600,
            fn() => $this->repository->findCityByName($name)
        );
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
     */
    public function getCityData(string $cityName): ?CityGeographyDTO
    {
        return Cache::remember(
            "city_geography_{$cityName}",
            3600,
            function() use ($cityName) {
                $city = $this->repository->findCityByName($cityName);
                if (!$city) {
                    return null;
                }

                $districts = $this->repository->getCityDistricts($city->id);
                $metro = $city->has_metro ? $this->getMetroData($city->id) : null;
                
                return new CityGeographyDTO(
                    city: $city,
                    districts: $districts,
                    metro: $metro,
                    hasZonesOption: $city->hasZonesOption()
                );
            }
        );
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ –≥–æ—Ä–æ–¥–∞
     */
    public function getMetroData(int $cityId): ?MetroDataDTO
    {
        $lines = $this->repository->getCityMetroLines($cityId);
        if ($lines->isEmpty()) {
            return null;
        }

        $groupedStations = [];
        foreach ($lines as $line) {
            $groupedStations[$line->name] = $line->stations->toArray();
        }

        return new MetroDataDTO(
            lines: $lines,
            groupedStations: $groupedStations
        );
    }

    /**
     * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –∏–∑ –∞–¥—Ä–µ—Å–∞
     */
    public function detectCityFromAddress(string $address): ?City
    {
        return $this->cityDetectionService->detectFromAddress($address);
    }
}
```

```php
// app/Domain/Geography/Services/CityDetectionService.php  
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Services;

use App\Domain\Geography\Models\City;
use App\Domain\Geography\Repositories\GeographyRepository;
use Illuminate\Support\Facades\Http;
use Illuminate\Support\Facades\Cache;

/**
 * –°–µ—Ä–≤–∏—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –∏–∑ –∞–¥—Ä–µ—Å–∞
 */
class CityDetectionService
{
    public function __construct(
        private GeographyRepository $repository
    ) {}

    /**
     * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –∏–∑ –∞–¥—Ä–µ—Å–∞
     */
    public function detectFromAddress(string $address): ?City
    {
        $cacheKey = "detect_city_" . md5($address);
        
        return Cache::remember($cacheKey, 1800, function() use ($address) {
            // 1. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∞–¥—Ä–µ—Å–∞ —Ä–µ–≥—É–ª—è—Ä–∫–∞–º–∏
            $cityName = $this->parseAddressForCity($address);
            if ($cityName) {
                $city = $this->fuzzySearchCity($cityName);
                if ($city) {
                    return $city;
                }
            }

            // 2. Fallback: –≥–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ Yandex API
            return $this->fallbackGeocoding($address);
        });
    }

    /**
     * –ü–∞—Ä—Å–∏–Ω–≥ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞
     */
    private function parseAddressForCity(string $address): ?string
    {
        // –®–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö –∞–¥—Ä–µ—Å–æ–≤
        $patterns = [
            // "–≥. –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1"
            '/–≥\.\s*([–ê-–Ø–∞-—è\s\-]+),/',
            // "–ú–æ—Å–∫–≤–∞, –¢–≤–µ—Ä—Å–∫–∞—è —É–ª–∏—Ü–∞, 1"  
            '/^([–ê-–Ø–∞-—è\s\-]+),/',
            // "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1"
            '/^([–ê-–Ø–∞-—è]{3,}),/',
            // "–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥"
            '/–æ–±–ª–∞—Å—Ç—å,\s*([–ê-–Ø–∞-—è\s\-]+)/',
        ];

        foreach ($patterns as $pattern) {
            if (preg_match($pattern, $address, $matches)) {
                return trim($matches[1]);
            }
        }

        return null;
    }

    /**
     * –ù–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞ –≤ –±–∞–∑–µ
     */
    private function fuzzySearchCity(string $cityName): ?City
    {
        // –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        $city = $this->repository->findCityByName($cityName);
        if ($city) {
            return $city;
        }

        // –ü–æ–∏—Å–∫ —Å LIKE
        $cities = $this->repository->searchCitiesByName($cityName);
        if ($cities->isNotEmpty()) {
            return $cities->first();
        }

        return null;
    }

    /**
     * –ì–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ Yandex API
     */
    private function fallbackGeocoding(string $address): ?City
    {
        try {
            $response = Http::timeout(5)->get(
                'https://geocode-maps.yandex.ru/1.x/',
                [
                    'format' => 'json',
                    'geocode' => $address,
                    'results' => 1,
                    'lang' => 'ru_RU',
                    'apikey' => config('services.yandex.geocoding_key')
                ]
            );

            $data = $response->json();
            $geoObjects = $data['response']['GeoObjectCollection']['featureMember'] ?? [];
            
            if (empty($geoObjects)) {
                return null;
            }

            $geoObject = $geoObjects[0]['GeoObject'];
            $components = $geoObject['metaDataProperty']['GeocoderMetaData']['Address']['Components'] ?? [];
            
            // –ò—â–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "locality" (–≥–æ—Ä–æ–¥)
            foreach ($components as $component) {
                if ($component['kind'] === 'locality') {
                    return $this->fuzzySearchCity($component['name']);
                }
            }

            return null;

        } catch (\Exception $e) {
            \Log::warning('Geocoding fallback failed', [
                'address' => $address,
                'error' => $e->getMessage()
            ]);
            return null;
        }
    }
}
```

#### 2.3 DTOs (Data Transfer Objects)
```php
// app/Domain/Geography/DTOs/CityGeographyDTO.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\DTOs;

use App\Domain\Geography\Models\City;
use Illuminate\Database\Eloquent\Collection;

/**
 * –ü–æ–ª–Ω—ã–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
 */
readonly class CityGeographyDTO
{
    public function __construct(
        public City $city,
        public Collection $districts,
        public ?MetroDataDTO $metro,
        public bool $hasZonesOption
    ) {}

    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è API
     */
    public function toArray(): array
    {
        return [
            'city' => [
                'id' => $this->city->id,
                'name' => $this->city->name,
                'region' => $this->city->region,
                'hasMetro' => $this->city->has_metro,
                'hasDistricts' => $this->city->has_districts,
                'population' => $this->city->population,
                'coordinates' => [
                    'lat' => $this->city->latitude,
                    'lng' => $this->city->longitude
                ]
            ],
            'districts' => $this->districts->map(fn($d) => [
                'id' => $d->id,
                'name' => $d->name,
                'sortOrder' => $d->sort_order,
                'isCentral' => $d->is_central
            ])->toArray(),
            'metro' => $this->metro?->toArray(),
            'hasZonesOption' => $this->hasZonesOption
        ];
    }
}
```

```php
// app/Domain/Geography/DTOs/MetroDataDTO.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\DTOs;

use Illuminate\Database\Eloquent\Collection;

/**
 * –î–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞ –≥–æ—Ä–æ–¥–∞
 */
readonly class MetroDataDTO
{
    public function __construct(
        public Collection $lines,      // MetroLine —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ stations
        public array $groupedStations  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ª–∏–Ω–∏—è–º
    ) {}

    /**
     * –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è API
     */
    public function toArray(): array
    {
        return [
            'lines' => $this->lines->map(fn($line) => [
                'id' => $line->id,
                'name' => $line->name,
                'color' => $line->color,
                'sortOrder' => $line->sort_order,
                'stations' => $line->stations->map(fn($station) => [
                    'id' => $station->id,
                    'name' => $station->name,
                    'sortOrder' => $station->sort_order,
                    'coordinates' => $station->latitude ? [
                        'lat' => $station->latitude,
                        'lng' => $station->longitude
                    ] : null
                ])->toArray()
            ])->toArray(),
            'groupedStations' => $this->groupedStations
        ];
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –ø–ª–æ—Å–∫–∏–º —Å–ø–∏—Å–∫–æ–º
     */
    public function getAllStationsFlat(): array
    {
        $stations = [];
        foreach ($this->lines as $line) {
            foreach ($line->stations as $station) {
                $stations[] = $station->name;
            }
        }
        return $stations;
    }
}
```

#### 2.4 Repository
```php
// app/Domain/Geography/Repositories/GeographyRepository.php
<?php
declare(strict_types=1);

namespace App\Domain\Geography\Repositories;

use App\Domain\Common\Repositories\BaseRepository;
use App\Domain\Geography\Models\City;
use App\Domain\Geography\Models\CityDistrict;
use App\Domain\Geography\Models\MetroLine;
use Illuminate\Database\Eloquent\Collection;

/**
 * Repository –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
 */
class GeographyRepository extends BaseRepository
{
    public function __construct(City $model)
    {
        parent::__construct($model);
    }

    /**
     * –ù–∞–π—Ç–∏ –≥–æ—Ä–æ–¥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
     */
    public function findCityByName(string $name): ?City
    {
        return $this->model
            ->where('name', $name)
            ->first();
    }

    /**
     * –ù–∞–π—Ç–∏ –≥–æ—Ä–æ–¥–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫)
     */
    public function searchCitiesByName(string $query): Collection
    {
        return $this->model
            ->where('name', 'LIKE', "%{$query}%")
            ->orderByRaw("CASE WHEN name = ? THEN 0 ELSE 1 END", [$query])
            ->orderBy('population', 'DESC')
            ->limit(5)
            ->get();
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ–¥ —Å —Ä–∞–π–æ–Ω–∞–º–∏
     */
    public function findCityWithDistricts(int $cityId): ?City
    {
        return $this->model
            ->with(['districts' => function($query) {
                $query->orderBy('sort_order')->orderBy('name');
            }])
            ->find($cityId);
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–∞
     */
    public function getCityDistricts(int $cityId): Collection
    {
        return CityDistrict::where('city_id', $cityId)
            ->orderBy('sort_order')
            ->orderBy('name')
            ->get();
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –ª–∏–Ω–∏–∏ –º–µ—Ç—Ä–æ –≥–æ—Ä–æ–¥–∞ —Å–æ —Å—Ç–∞–Ω—Ü–∏—è–º–∏
     */
    public function getCityMetroLines(int $cityId): Collection
    {
        return MetroLine::where('city_id', $cityId)
            ->with(['stations' => function($query) {
                $query->orderBy('sort_order')->orderBy('name');
            }])
            ->orderBy('sort_order')
            ->orderBy('name')
            ->get();
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –º–µ—Ç—Ä–æ –≤ –≥–æ—Ä–æ–¥–µ
     */
    public function cityHasMetro(int $cityId): bool
    {
        $city = $this->find($cityId);
        return $city?->has_metro ?? false;
    }
}
```

#### 2.5 API Controllers
```php
// app/Application/Http/Controllers/Geography/GeographyController.php
<?php
declare(strict_types=1);

namespace App\Application\Http\Controllers\Geography;

use App\Application\Http\Controllers\Controller;
use App\Domain\Geography\Services\GeographyService;
use Illuminate\Http\Request;
use Illuminate\Http\JsonResponse;

/**
 * API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
 */
class GeographyController extends Controller
{
    public function __construct(
        private GeographyService $geographyService
    ) {}

    /**
     * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –∏–∑ –∞–¥—Ä–µ—Å–∞
     * POST /api/geography/detect-city
     */
    public function detectCity(Request $request): JsonResponse
    {
        $request->validate([
            'address' => 'required|string|min:3|max:500'
        ]);

        $city = $this->geographyService->detectCityFromAddress(
            $request->input('address')
        );

        if (!$city) {
            return response()->json([
                'city' => null,
                'confidence' => 0,
                'source' => 'none'
            ]);
        }

        return response()->json([
            'city' => [
                'id' => $city->id,
                'name' => $city->name,
                'region' => $city->region,
                'hasMetro' => $city->has_metro,
                'hasDistricts' => $city->has_districts,
                'population' => $city->population,
                'coordinates' => [
                    'lat' => $city->latitude,
                    'lng' => $city->longitude
                ]
            ],
            'confidence' => 0.9,
            'source' => 'database'
        ]);
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
     * GET /api/geography/cities/{cityName}
     */
    public function getCityData(string $cityName): JsonResponse
    {
        $cityData = $this->geographyService->getCityData($cityName);

        if (!$cityData) {
            return response()->json([
                'message' => '–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω'
            ], 404);
        }

        return response()->json($cityData->toArray());
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–∞
     * GET /api/geography/cities/{cityId}/districts
     */
    public function getDistricts(int $cityId): JsonResponse
    {
        $districts = $this->geographyService
            ->repository
            ->getCityDistricts($cityId);

        return response()->json([
            'data' => $districts->map(fn($d) => [
                'id' => $d->id,
                'name' => $d->name,
                'sortOrder' => $d->sort_order,
                'isCentral' => $d->is_central
            ])->toArray()
        ]);
    }

    /**
     * –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ –≥–æ—Ä–æ–¥–∞
     * GET /api/geography/cities/{cityId}/metro
     */
    public function getMetro(int $cityId): JsonResponse
    {
        $metroData = $this->geographyService->getMetroData($cityId);

        if (!$metroData) {
            return response()->json([
                'message' => '–í —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ –Ω–µ—Ç –º–µ—Ç—Ä–æ'
            ], 404);
        }

        return response()->json($metroData->toArray());
    }
}
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤** `routes/api.php`:
```php
use App\Application\Http\Controllers\Geography\GeographyController;

// Geography routes
Route::prefix('geography')->group(function () {
    Route::post('detect-city', [GeographyController::class, 'detectCity']);
    Route::get('cities/{cityName}', [GeographyController::class, 'getCityData']);
    Route::get('cities/{cityId}/districts', [GeographyController::class, 'getDistricts']);
    Route::get('cities/{cityId}/metro', [GeographyController::class, 'getMetro']);
});
```

### –≠–¢–ê–ü 3: Frontend Entity (FSD Architecture) üìÖ –ù–µ–¥–µ–ª—è 2

#### 3.1 TypeScript —Ç–∏–ø—ã
**–§–∞–π–ª:** `resources/js/src/entities/geography/model/types.ts`
```typescript
/**
 * –¢–∏–ø—ã –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–º–µ–Ω–∞
 */

export interface City {
  id: number
  name: string
  region: string
  hasMetro: boolean
  hasDistricts: boolean
  population: number
  coordinates: { lat: number; lng: number }
}

export interface District {
  id: number
  cityId?: number
  name: string
  sortOrder: number
  isCentral: boolean
}

export interface MetroLine {
  id: number
  cityId?: number
  name: string
  color: string
  sortOrder: number
  stations: MetroStation[]
}

export interface MetroStation {
  id: number
  lineId?: number
  name: string
  sortOrder: number
  coordinates?: { lat: number; lng: number }
}

export interface CityGeography {
  city: City
  districts: District[]
  metro: {
    lines: MetroLine[]
    groupedStations: Record<string, MetroStation[]>
  } | null
  hasZonesOption: boolean
}

export interface DetectCityRequest {
  address: string
}

export interface DetectCityResponse {
  city: City | null
  confidence: number // 0-1, –≥–¥–µ 1 = 100% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
  source: 'database' | 'geocoding' | 'fallback' | 'none'
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã
export interface CitySearchResult {
  cities: City[]
  query: string
  total: number
}

export interface GeographyError {
  code: string
  message: string
  details?: Record<string, any>
}

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
export const CITY_DETECTION_CONFIDENCE_THRESHOLD = 0.7
export const LARGE_CITY_POPULATION_THRESHOLD = 500000
```

#### 3.2 API –∫–ª–∏–µ–Ω—Ç
**–§–∞–π–ª:** `resources/js/src/entities/geography/api/geographyApi.ts`
```typescript
/**
 * API –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
 */

import { api } from '@/shared/api'
import type { 
  DetectCityRequest,
  DetectCityResponse, 
  CityGeography,
  District, 
  MetroLine,
  City
} from '../model/types'

class GeographyApiError extends Error {
  constructor(
    message: string,
    public readonly statusCode?: number,
    public readonly response?: any
  ) {
    super(message)
    this.name = 'GeographyApiError'
  }
}

export const geographyApi = {
  /**
   * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –∏–∑ –∞–¥—Ä–µ—Å–∞
   */
  async detectCity(address: string): Promise<DetectCityResponse> {
    try {
      const response = await api.post('/api/geography/detect-city', { address })
      return response.data
    } catch (error) {
      console.warn('City detection failed:', error)
      throw new GeographyApiError(
        '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥',
        error.response?.status,
        error.response?.data
      )
    }
  },

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
   */
  async getCityData(cityName: string): Promise<CityGeography> {
    try {
      const response = await api.get(`/api/geography/cities/${encodeURIComponent(cityName)}`)
      return response.data
    } catch (error) {
      if (error.response?.status === 404) {
        throw new GeographyApiError('–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω', 404)
      }
      
      console.error('Failed to load city data:', error)
      throw new GeographyApiError(
        '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞',
        error.response?.status,
        error.response?.data
      )
    }
  },

  /**
   * –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–∞
   */
  async getDistricts(cityId: number): Promise<District[]> {
    try {
      const response = await api.get(`/api/geography/cities/${cityId}/districts`)
      return response.data.data || []
    } catch (error) {
      console.error('Failed to load districts:', error)
      throw new GeographyApiError(
        '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤',
        error.response?.status
      )
    }
  },

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ –≥–æ—Ä–æ–¥–∞
   */
  async getMetro(cityId: number): Promise<MetroLine[]> {
    try {
      const response = await api.get(`/api/geography/cities/${cityId}/metro`)
      return response.data.lines || []
    } catch (error) {
      if (error.response?.status === 404) {
        // –í –≥–æ—Ä–æ–¥–µ –Ω–µ—Ç –º–µ—Ç—Ä–æ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
        return []
      }
      
      console.error('Failed to load metro data:', error)
      throw new GeographyApiError(
        '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ',
        error.response?.status
      )
    }
  },

  /**
   * –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
   */
  async searchCities(query: string): Promise<City[]> {
    try {
      const response = await api.get('/api/geography/cities/search', {
        params: { q: query, limit: 10 }
      })
      return response.data.data || []
    } catch (error) {
      console.error('City search failed:', error)
      return []
    }
  }
}

// –≠–∫—Å–ø–æ—Ä—Ç —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
export { GeographyApiError }
```

#### 3.3 Pinia Store
**–§–∞–π–ª:** `resources/js/src/entities/geography/model/geographyStore.ts`
```typescript
/**
 * Pinia store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
 */

import { defineStore } from 'pinia'
import { ref, computed, readonly } from 'vue'
import { geographyApi, GeographyApiError } from '../api/geographyApi'
import type { 
  City, 
  District, 
  MetroLine, 
  CityGeography, 
  DetectCityResponse,
  CITY_DETECTION_CONFIDENCE_THRESHOLD,
  LARGE_CITY_POPULATION_THRESHOLD
} from './types'

interface CacheEntry<T> {
  data: T
  timestamp: number
  ttl: number
}

class MemoryCache<T> {
  private cache = new Map<string, CacheEntry<T>>()

  set(key: string, data: T, ttlMinutes = 60): void {
    this.cache.set(key, {
      data,
      timestamp: Date.now(),
      ttl: ttlMinutes * 60 * 1000
    })
  }

  get(key: string): T | null {
    const entry = this.cache.get(key)
    if (!entry) return null

    if (Date.now() - entry.timestamp > entry.ttl) {
      this.cache.delete(key)
      return null
    }

    return entry.data
  }

  clear(): void {
    this.cache.clear()
  }

  has(key: string): boolean {
    return this.get(key) !== null
  }
}

export const useGeographyStore = defineStore('geography', () => {
  // State
  const currentCity = ref<City | null>(null)
  const availableDistricts = ref<District[]>([])
  const availableMetro = ref<MetroLine[]>([])
  const isLoading = ref(false)
  const error = ref<string | null>(null)

  // Cache
  const cityCache = new MemoryCache<CityGeography>()
  const detectionCache = new MemoryCache<DetectCityResponse>()

  // Getters
  const hasMetro = computed(() => currentCity.value?.hasMetro ?? false)
  
  const hasZonesOption = computed(() => {
    if (!currentCity.value) return false
    
    return (
      currentCity.value.population > 500000 || // –∫—Ä—É–ø–Ω—ã–π –≥–æ—Ä–æ–¥
      currentCity.value.hasMetro // –∏–ª–∏ –µ—Å—Ç—å –º–µ—Ç—Ä–æ
    )
  })

  const districtsByName = computed(() => 
    availableDistricts.value.reduce((acc, district) => {
      acc[district.name] = district
      return acc
    }, {} as Record<string, District>)
  )

  const metroStationsByLine = computed(() => 
    availableMetro.value.reduce((acc, line) => {
      acc[line.name] = line.stations
      return acc
    }, {} as Record<string, MetroStation[]>)
  )

  const allMetroStations = computed(() => 
    availableMetro.value.flatMap(line => 
      line.stations.map(station => station.name)
    )
  )

  const cityInfo = computed(() => {
    if (!currentCity.value) return null

    return {
      name: currentCity.value.name,
      region: currentCity.value.region,
      population: currentCity.value.population,
      hasMetro: currentCity.value.hasMetro,
      hasZonesOption: hasZonesOption.value,
      coordinates: currentCity.value.coordinates
    }
  })

  // Actions

  /**
   * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –∏–∑ –∞–¥—Ä–µ—Å–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   */
  const detectCityFromAddress = async (address: string): Promise<City | null> => {
    if (!address || address.length < 5) {
      return null
    }

    const cacheKey = `detect_${address.toLowerCase().trim()}`
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    const cached = detectionCache.get(cacheKey)
    if (cached) {
      if (cached.city && cached.confidence > 0.7) {
        await loadCityData(cached.city.name)
        return cached.city
      }
      return null
    }

    try {
      clearError()
      const result = await geographyApi.detectCity(address)
      
      // –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 30 –º–∏–Ω—É—Ç
      detectionCache.set(cacheKey, result, 30)
      
      if (result.city && result.confidence > 0.7) {
        await loadCityData(result.city.name)
        return result.city
      }

      return null
    } catch (error) {
      console.warn('City detection failed:', error)
      if (error instanceof GeographyApiError) {
        setError(`–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞: ${error.message}`)
      } else {
        setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –∏–∑ –∞–¥—Ä–µ—Å–∞')
      }
      return null
    }
  }

  /**
   * –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
   */
  const loadCityData = async (cityName: string): Promise<void> => {
    const cacheKey = `city_${cityName.toLowerCase()}`
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    const cached = cityCache.get(cacheKey)
    if (cached) {
      updateStateFromCityData(cached)
      return
    }

    try {
      setLoading(true)
      clearError()
      
      const cityData = await geographyApi.getCityData(cityName)
      
      // –ö—ç—à–∏—Ä—É–µ–º –Ω–∞ 60 –º–∏–Ω—É—Ç
      cityCache.set(cacheKey, cityData, 60)
      
      updateStateFromCityData(cityData)
      
    } catch (error) {
      console.error('Failed to load city data:', error)
      
      if (error instanceof GeographyApiError) {
        setError(error.message)
      } else {
        setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞')
      }
      
      // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
      resetState()
    } finally {
      setLoading(false)
    }
  }

  /**
   * –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞
   */
  const updateStateFromCityData = (cityData: CityGeography): void => {
    currentCity.value = cityData.city
    availableDistricts.value = cityData.districts
    availableMetro.value = cityData.metro?.lines || []
  }

  /**
   * –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
   */
  const preloadPopularCities = async (): Promise<void> => {
    const popularCities = [
      '–ú–æ—Å–∫–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', 
      '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–ö–∞–∑–∞–Ω—å', '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥'
    ]

    // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    popularCities.forEach(cityName => {
      if (!cityCache.has(`city_${cityName.toLowerCase()}`)) {
        loadCityData(cityName).catch(error => {
          console.warn(`Failed to preload ${cityName}:`, error)
        })
      }
    })
  }

  /**
   * –û—á–∏—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–π –≥–æ—Ä–æ–¥
   */
  const clearCity = (): void => {
    currentCity.value = null
    availableDistricts.value = []
    availableMetro.value = []
    clearError()
  }

  /**
   * –°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   */
  const resetState = (): void => {
    currentCity.value = null
    availableDistricts.value = []
    availableMetro.value = []
    error.value = null
    isLoading.value = false
  }

  /**
   * –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à
   */
  const clearCache = (): void => {
    cityCache.clear()
    detectionCache.clear()
  }

  /**
   * –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—à–∏–±–∫—É
   */
  const setError = (message: string): void => {
    error.value = message
  }

  /**
   * –û—á–∏—Å—Ç–∏—Ç—å –æ—à–∏–±–∫—É
   */
  const clearError = (): void => {
    error.value = null
  }

  /**
   * –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
   */
  const setLoading = (loading: boolean): void => {
    isLoading.value = loading
  }

  // Public API
  return {
    // State (readonly)
    currentCity: readonly(currentCity),
    availableDistricts: readonly(availableDistricts),
    availableMetro: readonly(availableMetro),
    isLoading: readonly(isLoading),
    error: readonly(error),
    
    // Getters
    hasMetro,
    hasZonesOption,
    districtsByName,
    metroStationsByLine,
    allMetroStations,
    cityInfo,
    
    // Actions
    detectCityFromAddress,
    loadCityData,
    preloadPopularCities,
    clearCity,
    resetState,
    clearCache,
    clearError
  }
})

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–∏–ø store
export type GeographyStore = ReturnType<typeof useGeographyStore>
```

### –≠–¢–ê–ü 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ üìÖ –ù–µ–¥–µ–ª—è 3

#### 4.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ useGeoData.ts
**–§–∞–π–ª:** `features/AdSections/GeoSection/ui/composables/useGeoData.ts`

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å geography store:
```typescript
import { useGeographyStore } from '@/entities/geography/model/geographyStore'
import type { City, District, MetroLine } from '@/entities/geography/model/types'

// –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GeoData
export interface GeoData {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  address: string
  coordinates: { lat: number; lng: number } | null
  zoom: number
  outcall: OutcallType
  zones: string[]
  metro_stations: string[]
  outcall_apartment: boolean
  outcall_hotel: boolean
  outcall_house: boolean
  outcall_sauna: boolean
  outcall_office: boolean
  taxi_included: boolean

  // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏
  currentCity: City | null
  availableDistricts: District[]
  availableMetro: MetroLine[]
}

export function useGeoData(options: UseGeoDataOptions = {}) {
  // –ü–æ–¥–∫–ª—é—á–∞–µ–º geography store
  const geographyStore = useGeographyStore()

  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  const createDefaultGeoData = (): GeoData => ({
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    
    // –ù–æ–≤—ã–µ –ø–æ–ª—è
    currentCity: null,
    availableDistricts: [],
    availableMetro: [],
    
    ...initialData
  })

  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ computed
  const hasZonesOption = computed(() => geographyStore.hasZonesOption)
  
  const cityMetroStations = computed(() => 
    geographyStore.allMetroStations.value
  )

  const cityDistricts = computed(() => 
    geographyStore.availableDistricts.value.map(d => d.name)
  )

  // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–æ–¥ updateAddress –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞
  const updateAddress = async (address: string) => {
    geoData.address = address
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥–æ—Ä–æ–¥ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–¥—Ä–µ—Å–∞
    if (address && address.length > 5) {
      try {
        const detectedCity = await geographyStore.detectCityFromAddress(address)
        
        if (detectedCity && detectedCity.id !== geoData.currentCity?.id) {
          // –ì–æ—Ä–æ–¥ –∏–∑–º–µ–Ω–∏–ª—Å—è - –æ–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
          geoData.currentCity = detectedCity
          
          // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–æ–Ω—ã –µ—Å–ª–∏ –Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥ –∏—Ö –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
          if (!geographyStore.hasZonesOption && geoData.outcall === 'zones') {
            geoData.outcall = 'city'
            geoData.zones = []
          }
          
          // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–æ –µ—Å–ª–∏ —É –≥–æ—Ä–æ–¥–∞ –Ω–µ—Ç –º–µ—Ç—Ä–æ
          if (!geographyStore.hasMetro) {
            geoData.metro_stations = []
          }
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ store
          geoData.availableDistricts = geographyStore.availableDistricts.value
          geoData.availableMetro = geographyStore.availableMetro.value
          
          // –≠–º–∏—Ç–∏–º —Å–æ–±—ã—Ç–∏–µ —Å–º–µ–Ω—ã –≥–æ—Ä–æ–¥–∞
          if (autoSave && onDataChange) {
            onDataChange(geoData)
          }
        }
      } catch (error) {
        console.warn('Failed to detect city:', error)
      }
    }
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —Å–º–µ–Ω—ã –≥–æ—Ä–æ–¥–∞
  const changeCity = async (cityName: string) => {
    try {
      await geographyStore.loadCityData(cityName)
      
      geoData.currentCity = geographyStore.currentCity.value
      geoData.availableDistricts = geographyStore.availableDistricts.value
      geoData.availableMetro = geographyStore.availableMetro.value
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å –Ω–æ–≤—ã–º –≥–æ—Ä–æ–¥–æ–º
      if (!geographyStore.hasZonesOption && geoData.outcall === 'zones') {
        geoData.outcall = 'city'
        geoData.zones = []
      }
      
      if (!geographyStore.hasMetro) {
        geoData.metro_stations = []
      }
      
    } catch (error) {
      console.error('Failed to change city:', error)
    }
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º loadFromJson –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
  const loadFromJson = (jsonString: string) => {
    try {
      if (!jsonString) return

      const parsed = JSON.parse(jsonString)
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
      Object.assign(geoData, {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
        
        // –ù–æ–≤—ã–µ –ø–æ–ª—è (—Å —É—á–µ—Ç–æ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        currentCity: parsed.currentCity || null,
        availableDistricts: parsed.availableDistricts || [],
        availableMetro: parsed.availableMetro || [],
        
        // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
      })

      // –ï—Å–ª–∏ –µ—Å—Ç—å currentCity, –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      if (geoData.currentCity?.name) {
        geographyStore.loadCityData(geoData.currentCity.name).catch(error => {
          console.warn('Failed to reload city data:', error)
        })
      }

      error.value = null
    } catch (err) {
      error.value = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + (err as Error).message
      console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ geo –¥–∞–Ω–Ω—ã—Ö:', err)
    }
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é
  const validateData = (): { isValid: boolean; errors: string[] } => {
    const errors: string[] = []

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–¥—Ä–µ—Å
    if (!geoData.address.trim()) {
      errors.push('–ù–µ —É–∫–∞–∑–∞–Ω –∞–¥—Ä–µ—Å')
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    if (!geoData.coordinates) {
      errors.push('–ù–µ —É–∫–∞–∑–∞–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã')
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–æ–Ω—ã –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –≤—ã–µ–∑–¥ –≤ –∑–æ–Ω—ã
    if (geoData.outcall === 'zones') {
      if (!hasZonesOption.value) {
        errors.push('–í—ã–µ–∑–¥ –ø–æ –∑–æ–Ω–∞–º –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞')
      }
      
      if (geoData.zones.length === 0) {
        errors.push('–ù–µ –≤—ã–±—Ä–∞–Ω—ã –∑–æ–Ω—ã –≤—ã–µ–∑–¥–∞')
      }
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç—Ä–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ
    if (geoData.metro_stations.length > 0 && !geographyStore.hasMetro) {
      errors.push('–í –¥–∞–Ω–Ω–æ–º –≥–æ—Ä–æ–¥–µ –Ω–µ—Ç –º–µ—Ç—Ä–æ')
    }

    return {
      isValid: errors.length === 0,
      errors
    }
  }

  return {
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã
    geoData,
    isLoading,
    error,
    outcallTypes,
    updateAddress,
    updateCoordinates,
    updateOutcall,
    updateZones,
    updateMetroStations,
    updateOutcallTypes,
    updateTaxiIncluded,
    loadFromJson,
    toJson,
    getDataCopy,
    resetData,
    validateData,

    // –ù–æ–≤—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã
    hasZonesOption,
    cityMetroStations,
    cityDistricts,
    changeCity
  }
}
```

#### 4.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AddressMapSection.vue
**–§–∞–π–ª:** `features/AdSections/GeoSection/ui/components/AddressMapSection.vue`

–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å geography store:
```typescript
// –í script setup –¥–æ–±–∞–≤–∏—Ç—å
import { useGeographyStore } from '@/entities/geography/model/geographyStore'

const geographyStore = useGeographyStore()

// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π emit
interface Emits {
  'update:address': [address: string]
  'update:coordinates': [coords: { lat: number; lng: number }]
  'data-changed': [data: { address: string; coordinates: { lat: number; lng: number } | null }]
  'city-detected': [city: City] // –ù–æ–≤—ã–π emit
}

// –û–±–Ω–æ–≤–∏—Ç—å emitUpdates
const emitUpdates = async (address: string, coordinates: { lat: number; lng: number } | null) => {
  emit('update:address', address)
  
  if (coordinates) {
    emit('update:coordinates', coordinates)
  }
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥–æ—Ä–æ–¥ –∏ —ç–º–∏—Ç–∏–º —Å–æ–±—ã—Ç–∏–µ
  if (address && address.length > 5) {
    try {
      const city = await geographyStore.detectCityFromAddress(address)
      if (city) {
        console.log('üåç [AddressMapSection] –ì–æ—Ä–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω:', city.name)
        emit('city-detected', city)
      }
    } catch (error) {
      console.warn('City detection failed:', error)
    }
  }
  
  emit('data-changed', { address, coordinates })
}

// –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏
const selectSuggestion = async (suggestion: Suggestion) => {
  searchQuery.value = suggestion.name
  showSuggestions.value = false
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —á—Ç–æ–±—ã –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –æ–±—Ä–∞—Ç–Ω—ã–π –≥–µ–æ–∫–æ–¥–∏–Ω–≥
  isNavigating.value = true
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∑—É–º
  const newCoords: [number, number] = [suggestion.coordinates.lng, suggestion.coordinates.lat]
  currentCoordinates.value = newCoords
  previousCoordinates = newCoords
  currentZoom.value = 15
  
  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É
  setTimeout(() => {
    isNavigating.value = false
  }, 1000)
  
  // –í–ê–ñ–ù–û: –≤—ã–∑—ã–≤–∞–µ–º emitUpdates –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞
  await emitUpdates(suggestion.name, suggestion.coordinates)
}
```

#### 4.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ OutcallSection.vue
**–§–∞–π–ª:** `features/AdSections/GeoSection/ui/components/OutcallSection.vue`

–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–ø—Ü–∏–∏ "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã":
```vue
<template>
  <div class="outcall-section">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ -->
    <div class="mb-4">
      <h3 class="text-base font-medium text-gray-900 mb-2">–ö—É–¥–∞ –≤—ã–µ–∑–∂–∞–µ—Ç–µ</h3>
      <p class="text-sm text-gray-600 leading-relaxed">
        –£–∫–∞–∂–∏—Ç–µ –≤—Å–µ –∑–æ–Ω—ã –≤—ã–µ–∑–¥–∞, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–Ω–∏–º–∞–ª–∏, –¥–æ–±–µ—Ä—ë—Ç–µ—Å—å –ª–∏ –≤—ã –¥–æ –Ω–∏—Ö.
      </p>
    </div>
    
    <!-- –†–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –≤—ã–µ–∑–¥–∞ -->
    <div class="flex flex-col gap-2">
      <BaseRadio
        :model-value="currentOutcall"
        value="none"
        name="outcall"
        label="–ù–µ –≤—ã–µ–∑–∂–∞—é"
        @update:modelValue="handleOutcallChange"
      />
      <BaseRadio
        :model-value="currentOutcall"
        value="city"
        name="outcall"
        label="–ü–æ –≤—Å–µ–º—É –≥–æ—Ä–æ–¥—É"
        @update:modelValue="handleOutcallChange"
      />
      
      <!-- –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã" -->
      <BaseRadio
        v-if="hasZonesOption"
        :model-value="currentOutcall"
        value="zones"
        name="outcall"
        label="–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã"
        @update:modelValue="handleOutcallChange"
      />
      
      <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ -->
      <div v-else-if="showZonesHint" class="text-sm text-gray-500 italic pl-6">
        üí° –í—ã–µ–∑–¥ –ø–æ —Ä–∞–π–æ–Ω–∞–º –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –∫—Ä—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö (–ú–æ—Å–∫–≤–∞, –°–ü–±, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ –∏ –¥—Ä.)
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, watch, computed } from 'vue'
import BaseRadio from '@/src/shared/ui/atoms/BaseRadio/BaseRadio.vue'
import type { City } from '@/entities/geography/model/types'

// –¢–∏–ø—ã
type OutcallType = 'none' | 'city' | 'zones'

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
interface Props {
  initialOutcall?: OutcallType
  hasZonesOption?: boolean
  currentCity?: City | null
}

interface Emits {
  'update:outcall': [outcall: OutcallType]
  'outcall-changed': [data: { outcall: OutcallType; shouldClearZones: boolean }]
}

// Props —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
const props = withDefaults(defineProps<Props>(), {
  initialOutcall: 'none',
  hasZonesOption: false,
  currentCity: null
})

// Emits
const emit = defineEmits<Emits>()

// –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const currentOutcall = ref<OutcallType>(props.initialOutcall)

// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É –æ –∑–æ–Ω–∞—Ö —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤ –±–µ–∑ —ç—Ç–æ–π –æ–ø—Ü–∏–∏
const showZonesHint = computed(() => 
  props.currentCity && !props.hasZonesOption
)

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –≤—ã–µ–∑–¥–∞
const handleOutcallChange = (value: OutcallType) => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–∏ "zones"
  if (value === 'zones' && !props.hasZonesOption) {
    console.warn('Zones option not available for current city')
    return
  }

  const previousOutcall = currentOutcall.value
  currentOutcall.value = value
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ—á–∏—â–∞—Ç—å –∑–æ–Ω—ã
  const shouldClearZones = previousOutcall === 'zones' && value !== 'zones'
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏—è —Ä–æ–¥–∏—Ç–µ–ª—é
  emit('update:outcall', value)
  emit('outcall-changed', { 
    outcall: value, 
    shouldClearZones 
  })
}

// –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ props
watch(() => props.initialOutcall, (newOutcall) => {
  if (newOutcall) {
    currentOutcall.value = newOutcall
  }
})

// –ê–≤—Ç–æ—Å–±—Ä–æ—Å "zones" –µ—Å–ª–∏ –≥–æ—Ä–æ–¥ —Å–º–µ–Ω–∏–ª—Å—è –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–æ–Ω—ã
watch(() => props.hasZonesOption, (hasZones) => {
  if (!hasZones && currentOutcall.value === 'zones') {
    console.log('üîÑ Auto-switching from zones to city (zones not supported)')
    handleOutcallChange('city')
  }
})
</script>
```

#### 4.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ZonesSection.vue
**–§–∞–π–ª:** `features/AdSections/GeoSection/ui/components/ZonesSection.vue`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–π–æ–Ω—ã –∏–∑ geography store:
```vue
<template>
  <div class="zones-section">
    <div class="mb-4">
      <h3 class="text-base font-medium text-gray-900 mb-2">–†–∞–π–æ–Ω—ã –≤—ã–µ–∑–¥–∞</h3>
      <p class="text-sm text-gray-600 leading-relaxed">
        –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω—ã, –≤ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≥–æ—Ç–æ–≤—ã –≤—ã–µ–∑–∂–∞—Ç—å –∫ –∫–ª–∏–µ–Ω—Ç–∞–º.
      </p>
    </div>

    <!-- Loading state -->
    <div v-if="isLoadingDistricts" class="grid grid-cols-2 md:grid-cols-3 gap-3">
      <div v-for="i in 6" :key="i" class="animate-pulse">
        <div class="h-10 bg-gray-200 rounded"></div>
      </div>
    </div>

    <!-- Districts list -->
    <div v-else-if="availableZones.length > 0" class="space-y-4">
      <!-- –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä -->
      <div class="flex flex-wrap gap-2 pb-4 border-b border-gray-200">
        <button
          type="button"
          @click="selectAllZones"
          class="px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors"
        >
          –í—ã–±—Ä–∞—Ç—å –≤—Å–µ
        </button>
        <button
          type="button"
          @click="selectCentralZones"
          class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition-colors"
        >
          –¢–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä
        </button>
        <button
          type="button"
          @click="clearAllZones"
          class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors"
        >
          –û—á–∏—Å—Ç–∏—Ç—å
        </button>
      </div>

      <!-- Checkbox grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
        <BaseCheckbox
          v-for="zone in availableZones"
          :key="zone"
          :model-value="selectedZones.includes(zone)"
          :label="zone"
          @update:modelValue="toggleZone(zone)"
        />
      </div>

      <!-- Selected count -->
      <div v-if="selectedZones.length > 0" class="text-sm text-gray-600">
        –í—ã–±—Ä–∞–Ω–æ —Ä–∞–π–æ–Ω–æ–≤: {{ selectedZones.length }} –∏–∑ {{ availableZones.length }}
      </div>
    </div>

    <!-- No districts available -->
    <div v-else class="text-center py-8 text-gray-500">
      <p class="mb-2">–†–∞–π–æ–Ω—ã –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
      <p class="text-sm">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å "–ü–æ –≤—Å–µ–º—É –≥–æ—Ä–æ–¥—É"</p>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, watch, onMounted } from 'vue'
import { useGeographyStore } from '@/entities/geography/model/geographyStore'
import BaseCheckbox from '@/src/shared/ui/atoms/BaseCheckbox/BaseCheckbox.vue'

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
interface Props {
  outcallType: 'zones'
  initialZones?: string[]
}

interface Emits {
  'update:zones': [zones: string[]]
  'zones-changed': [data: { zones: string[] }]
}

const props = withDefaults(defineProps<Props>(), {
  initialZones: () => []
})

const emit = defineEmits<Emits>()

// –°–æ—Å—Ç–æ—è–Ω–∏–µ
const selectedZones = ref<string[]>([...props.initialZones])
const geographyStore = useGeographyStore()

// –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–æ–Ω—ã –∏–∑ geography store
const availableZones = computed(() => 
  geographyStore.availableDistricts.value.map(district => district.name)
)

const centralZones = computed(() =>
  geographyStore.availableDistricts.value
    .filter(district => district.isCentral)
    .map(district => district.name)
)

const isLoadingDistricts = computed(() => 
  geographyStore.isLoading.value && availableZones.value.length === 0
)

// –ú–µ—Ç–æ–¥—ã
const toggleZone = (zone: string) => {
  if (selectedZones.value.includes(zone)) {
    selectedZones.value = selectedZones.value.filter(z => z !== zone)
  } else {
    selectedZones.value = [...selectedZones.value, zone]
  }
  emitChanges()
}

const selectAllZones = () => {
  selectedZones.value = [...availableZones.value]
  emitChanges()
}

const selectCentralZones = () => {
  selectedZones.value = [...centralZones.value]
  emitChanges()
}

const clearAllZones = () => {
  selectedZones.value = []
  emitChanges()
}

const emitChanges = () => {
  emit('update:zones', selectedZones.value)
  emit('zones-changed', { zones: selectedZones.value })
}

// Watchers
watch(() => props.initialZones, (newZones) => {
  if (newZones && Array.isArray(newZones)) {
    selectedZones.value = [...newZones]
  }
}, { deep: true })

// –û—á–∏—â–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã –µ—Å–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
watch(availableZones, (newZones) => {
  const validZones = selectedZones.value.filter(zone => newZones.includes(zone))
  if (validZones.length !== selectedZones.value.length) {
    selectedZones.value = validZones
    emitChanges()
  }
}, { deep: true })
</script>

<style scoped>
.zones-section {
  @apply w-full;
}
</style>
```

#### 4.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ MetroSection.vue  
**–§–∞–π–ª:** `features/AdSections/GeoSection/ui/components/MetroSection.vue`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ –∏–∑ geography store —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –ª–∏–Ω–∏—è–º:
```vue
<template>
  <!-- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –≥–æ—Ä–æ–¥–∞ –µ—Å—Ç—å –º–µ—Ç—Ä–æ -->
  <div v-if="hasMetro" class="metro-section">
    <div class="mb-4">
      <h3 class="text-base font-medium text-gray-900 mb-2">–°—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ</h3>
      <p class="text-sm text-gray-600 leading-relaxed">
        –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–µ –∫ –≤–∞–º —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤.
      </p>
    </div>

    <!-- Loading state -->
    <div v-if="isLoadingMetro" class="space-y-4">
      <div v-for="i in 3" :key="i" class="animate-pulse">
        <div class="h-6 bg-gray-200 rounded w-48 mb-2"></div>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
          <div v-for="j in 6" :key="j" class="h-8 bg-gray-200 rounded"></div>
        </div>
      </div>
    </div>

    <!-- Metro lines -->
    <div v-else-if="availableMetro.length > 0" class="space-y-6">
      <!-- –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä -->
      <div class="flex flex-wrap gap-2 pb-4 border-b border-gray-200">
        <button
          type="button"
          @click="selectAllStations"
          class="px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors"
        >
          –í—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏
        </button>
        <button
          type="button"
          @click="selectCentralStations"
          class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition-colors"
        >
          –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ
        </button>
        <button
          type="button"
          @click="clearAllStations"
          class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors"
        >
          –û—á–∏—Å—Ç–∏—Ç—å
        </button>
      </div>

      <!-- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ª–∏–Ω–∏—è–º -->
      <div 
        v-for="line in availableMetro" 
        :key="line.id"
        class="metro-line"
      >
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ª–∏–Ω–∏–∏ —Å —Ü–≤–µ—Ç–æ–º -->
        <div class="flex items-center mb-3 pb-2 border-b border-gray-100">
          <div 
            class="w-4 h-4 rounded-full mr-3 flex-shrink-0"
            :style="{ backgroundColor: line.color }"
          ></div>
          <h4 class="font-medium text-gray-900 flex-grow">{{ line.name }}</h4>
          <div class="text-sm text-gray-500">
            {{ getSelectedStationsCount(line) }} / {{ line.stations.length }}
          </div>
          
          <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–Ω–∏–µ–π -->
          <div class="flex gap-1 ml-3">
            <button
              type="button"
              @click="selectLineStations(line)"
              class="text-xs px-2 py-1 text-blue-600 hover:bg-blue-50 rounded"
              title="–í—ã–±—Ä–∞—Ç—å –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –ª–∏–Ω–∏–∏"
            >
              –í—Å–µ
            </button>
            <button
              type="button"
              @click="clearLineStations(line)"
              class="text-xs px-2 py-1 text-gray-600 hover:bg-gray-50 rounded"
              title="–û—á–∏—Å—Ç–∏—Ç—å –≤—ã–±–æ—Ä –Ω–∞ –ª–∏–Ω–∏–∏"
            >
              –ù–µ—Ç
            </button>
          </div>
        </div>
        
        <!-- –°—Ç–∞–Ω—Ü–∏–∏ –ª–∏–Ω–∏–∏ -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 ml-7">
          <BaseCheckbox
            v-for="station in line.stations"
            :key="station.id"
            :model-value="selectedStations.includes(station.name)"
            :label="station.name"
            @update:modelValue="toggleStation(station.name)"
            class="text-sm"
          />
        </div>
      </div>

      <!-- –°—á–µ—Ç—á–∏–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π -->
      <div v-if="selectedStations.length > 0" class="text-sm text-gray-600 pt-4 border-t border-gray-200">
        –í—ã–±—Ä–∞–Ω–æ —Å—Ç–∞–Ω—Ü–∏–π: {{ selectedStations.length }} –∏–∑ {{ totalStationsCount }}
      </div>
    </div>

    <!-- No metro data -->
    <div v-else class="text-center py-8 text-gray-500">
      <p class="mb-2">–î–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–æ –¥–ª—è –≥–æ—Ä–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
      <p class="text-sm">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</p>
    </div>
  </div>

  <!-- No metro in city (hidden by parent) -->
  <div v-else class="hidden"></div>
</template>

<script setup lang="ts">
import { ref, computed, watch } from 'vue'
import { useGeographyStore } from '@/entities/geography/model/geographyStore'
import BaseCheckbox from '@/src/shared/ui/atoms/BaseCheckbox/BaseCheckbox.vue'
import type { MetroLine, MetroStation } from '@/entities/geography/model/types'

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
interface Props {
  outcallType: 'city' | 'zones'
  initialStations?: string[]
}

interface Emits {
  'update:stations': [stations: string[]]
  'stations-changed': [data: { stations: string[] }]
}

const props = withDefaults(defineProps<Props>(), {
  initialStations: () => []
})

const emit = defineEmits<Emits>()

// –°–æ—Å—Ç–æ—è–Ω–∏–µ
const selectedStations = ref<string[]>([...props.initialStations])
const geographyStore = useGeographyStore()

// Computed
const hasMetro = computed(() => geographyStore.hasMetro.value)
const availableMetro = computed(() => geographyStore.availableMetro.value)
const isLoadingMetro = computed(() => 
  geographyStore.isLoading.value && availableMetro.value.length === 0
)

const totalStationsCount = computed(() =>
  availableMetro.value.reduce((total, line) => total + line.stations.length, 0)
)

const allStationsFlat = computed(() =>
  availableMetro.value.flatMap(line => line.stations.map(station => station.name))
)

const centralStations = computed(() => {
  // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π
  const centralKeywords = ['—Ü–µ–Ω—Ç—Ä', '—Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è', '–ø–ª–æ—â–∞–¥—å', '–∫—Ä–µ–º–ª—å', '—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç']
  return allStationsFlat.value.filter(station =>
    centralKeywords.some(keyword => 
      station.toLowerCase().includes(keyword)
    )
  )
})

// –ú–µ—Ç–æ–¥—ã
const toggleStation = (stationName: string) => {
  if (selectedStations.value.includes(stationName)) {
    selectedStations.value = selectedStations.value.filter(s => s !== stationName)
  } else {
    selectedStations.value = [...selectedStations.value, stationName]
  }
  emitChanges()
}

const getSelectedStationsCount = (line: MetroLine): number => {
  return line.stations.filter(station => 
    selectedStations.value.includes(station.name)
  ).length
}

const selectLineStations = (line: MetroLine) => {
  const lineStations = line.stations.map(station => station.name)
  const newSelected = new Set([...selectedStations.value, ...lineStations])
  selectedStations.value = Array.from(newSelected)
  emitChanges()
}

const clearLineStations = (line: MetroLine) => {
  const lineStations = line.stations.map(station => station.name)
  selectedStations.value = selectedStations.value.filter(station => 
    !lineStations.includes(station)
  )
  emitChanges()
}

const selectAllStations = () => {
  selectedStations.value = [...allStationsFlat.value]
  emitChanges()
}

const selectCentralStations = () => {
  selectedStations.value = [...centralStations.value]
  emitChanges()
}

const clearAllStations = () => {
  selectedStations.value = []
  emitChanges()
}

const emitChanges = () => {
  emit('update:stations', selectedStations.value)
  emit('stations-changed', { stations: selectedStations.value })
}

// Watchers
watch(() => props.initialStations, (newStations) => {
  if (newStations && Array.isArray(newStations)) {
    selectedStations.value = [...newStations]
  }
}, { deep: true })

// –û—á–∏—â–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏ –µ—Å–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
watch(allStationsFlat, (newStations) => {
  const validStations = selectedStations.value.filter(station => 
    newStations.includes(station)
  )
  if (validStations.length !== selectedStations.value.length) {
    selectedStations.value = validStations
    emitChanges()
  }
}, { deep: true })
</script>

<style scoped>
.metro-section {
  @apply w-full;
}

.metro-line {
  @apply relative;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤ */
.metro-line .checkbox-item {
  @apply transition-all duration-200;
}

.metro-line:hover .checkbox-item {
  @apply bg-gray-50;
}
</style>
```

#### 4.6 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GeoSection.vue
**–§–∞–π–ª:** `features/AdSections/GeoSection/ui/GeoSection.vue`

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≥–ª–∞–≤–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
```vue
<template>
  <div class="geo-section">
    <!-- –°–µ–∫—Ü–∏—è –∫–∞—Ä—Ç—ã –∏ –∞–¥—Ä–µ—Å–∞ -->
    <AddressMapSection 
      :initial-address="geoData.address"
      :initial-coordinates="geoData.coordinates"
      :initial-zoom="geoData.zoom"
      @update:address="handleAddressUpdate"
      @update:coordinates="handleCoordinatesUpdate"
      @city-detected="handleCityDetected"
      @data-changed="handleMapDataChange"
    />

    <!-- –°–µ–∫—Ü–∏—è –≤—ã–µ–∑–¥–∞ -->
    <div class="pt-6 border-t border-gray-200">
      <OutcallSection 
        :initial-outcall="geoData.outcall"
        :has-zones-option="hasZonesOption"
        :current-city="currentCity"
        @update:outcall="handleOutcallUpdate"
        @outcall-changed="handleOutcallChange"
      />
      
      <!-- –°–µ–∫—Ü–∏—è –∑–æ–Ω (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏ –≤—ã–±—Ä–∞–Ω–æ) -->
      <div v-if="hasZonesOption && geoData.outcall === 'zones'" class="mt-4">
        <ZonesSection 
          :outcall-type="geoData.outcall"
          :initial-zones="geoData.zones"
          @update:zones="handleZonesUpdate"
          @zones-changed="handleZonesChange"
        />
      </div>

      <!-- –°–µ–∫—Ü–∏—è –º–µ—Ç—Ä–æ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç—Ä–æ –∏ –≤—ã–µ–∑–¥ –Ω–µ 'none') -->
      <div v-if="hasMetro && geoData.outcall !== 'none'" class="mt-4">
        <MetroSection 
          :outcall-type="geoData.outcall"
          :initial-stations="geoData.metro_stations"
          @update:stations="handleStationsUpdate"
          @stations-changed="handleStationsChange"
        />
      </div>
      
      <!-- –°–µ–∫—Ü–∏—è —Ç–∏–ø–æ–≤ –º–µ—Å—Ç -->
      <div v-if="geoData.outcall !== 'none'" class="mt-6 pt-6 border-t border-gray-200">
        <OutcallTypesSection 
          :outcall-type="geoData.outcall"
          :initial-types="outcallTypes"
          :initial-taxi-included="geoData.taxi_included"
          @update:types="handleTypesUpdate"
          @update:taxiIncluded="handleTaxiUpdate"
          @types-changed="handleTypesChange"
        />
      </div>
    </div>

    <!-- Debug info (—Ç–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ) -->
    <div v-if="isDevelopment" class="mt-6 p-4 bg-gray-100 rounded text-xs">
      <details>
        <summary class="cursor-pointer font-medium">Debug: Geography Info</summary>
        <div class="mt-2 space-y-1">
          <div><strong>Current City:</strong> {{ currentCity?.name || 'None' }}</div>
          <div><strong>Has Metro:</strong> {{ hasMetro ? 'Yes' : 'No' }}</div>
          <div><strong>Has Zones Option:</strong> {{ hasZonesOption ? 'Yes' : 'No' }}</div>
          <div><strong>Available Districts:</strong> {{ availableDistricts.length }}</div>
          <div><strong>Available Metro Lines:</strong> {{ availableMetro.length }}</div>
        </div>
      </details>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, watch, onMounted, onBeforeUnmount } from 'vue'
import { useGeographyStore } from '@/entities/geography/model/geographyStore'
import { useGeoData } from './composables/useGeoData'
import AddressMapSection from './components/AddressMapSection.vue'
import OutcallSection from './components/OutcallSection.vue'
import ZonesSection from './components/ZonesSection.vue'
import MetroSection from './components/MetroSection.vue'
import OutcallTypesSection from './components/OutcallTypesSection.vue'
import type { City } from '@/entities/geography/model/types'

// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

const props = withDefaults(defineProps<Props>(), {
  geo: () => '',
  errors: () => ({}),
  forceValidation: false
})

const emit = defineEmits<Emits>()

// Geography Store
const geographyStore = useGeographyStore()

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è useGeoData composable —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
const {
  geoData,
  updateAddress,
  updateCoordinates,
  updateOutcall,
  updateZones,
  updateMetroStations,
  updateOutcallTypes,
  updateTaxiIncluded,
  loadFromJson,
  toJson,
  validateData,
  outcallTypes,
  hasZonesOption,
  cityMetroStations,
  cityDistricts,
  changeCity
} = useGeoData({
  autoSave: true,
  onDataChange: (data) => {
    emitGeoData()
  }
})

// Computed properties
const currentCity = computed(() => geographyStore.currentCity.value)
const hasMetro = computed(() => geographyStore.hasMetro.value)
const availableDistricts = computed(() => geographyStore.availableDistricts.value)
const availableMetro = computed(() => geographyStore.availableMetro.value)
const isDevelopment = computed(() => import.meta.env.DEV)

// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

// –ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞
const handleCityDetected = async (city: City) => {
  console.log('üåç [GeoSection] –ì–æ—Ä–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω:', city.name, {
    hasMetro: city.hasMetro,
    population: city.population,
    hasZonesOption: geographyStore.hasZonesOption.value
  })
  
  // –ê–≤—Ç–æ—Å–±—Ä–æ—Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ –≥–æ—Ä–æ–¥–∞
  if (!geographyStore.hasZonesOption.value && geoData.outcall === 'zones') {
    console.log('üîÑ Auto-switching from zones to city (zones not supported)')
    updateOutcall('city', true) // true = clear zones
  }
  
  if (!geographyStore.hasMetro.value && geoData.metro_stations.length > 0) {
    console.log('üîÑ Clearing metro stations (no metro in new city)')
    updateMetroStations([])
  }

  // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≥–æ—Ä–æ–¥–∞
  if (props.forceValidation && city.name) {
    emit('clear-force-validation')
  }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
onMounted(async () => {
  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
  await geographyStore.preloadPopularCities()

  if (props.geo) {
    if (typeof props.geo === 'string') {
      loadFromJson(props.geo)
    } else {
      loadFromJson(JSON.stringify(props.geo))
    }
  }
})

// –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ props.geo –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑–≤–Ω–µ
watch(() => props.geo, (newGeo) => {
  if (newGeo) {
    if (typeof newGeo === 'string') {
      loadFromJson(newGeo)
    } else {
      loadFromJson(JSON.stringify(newGeo))
    }
  }
}, { deep: true })

// –°–ª–µ–¥–∏–º –∑–∞ –æ—à–∏–±–∫–∞–º–∏ geography store
watch(() => geographyStore.error.value, (error) => {
  if (error) {
    console.warn('Geography error:', error)
    // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  }
})

// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ watchers –∏ lifecycle hooks
</script>

<style scoped>
.geo-section {
  @apply w-full space-y-0;
}

/* Debug —Å—Ç–∏–ª–∏ */
details summary::-webkit-details-marker {
  display: none;
}

details summary::before {
  content: '‚ñ∂';
  margin-right: 4px;
  transition: transform 0.2s;
}

details[open] summary::before {
  transform: rotate(90deg);
}
</style>
```

### –≠–¢–ê–ü 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ üìÖ –ù–µ–¥–µ–ª—è 4

#### 5.1 Backend —Ç–µ—Å—Ç—ã
**–§–∞–π–ª:** `tests/Feature/Geography/GeographyTest.php`
```php
<?php

namespace Tests\Feature\Geography;

use Tests\TestCase;
use App\Domain\Geography\Models\City;
use App\Domain\Geography\Models\CityDistrict;
use App\Domain\Geography\Models\MetroLine;
use App\Domain\Geography\Models\MetroStation;
use App\Domain\Geography\Services\GeographyService;
use Illuminate\Foundation\Testing\RefreshDatabase;

class GeographyTest extends TestCase
{
    use RefreshDatabase;

    protected function setUp(): void
    {
        parent::setUp();
        $this->seed(\Database\Seeders\GeographySeeder::class);
    }

    /** @test */
    public function can_detect_moscow_from_address(): void
    {
        $response = $this->postJson('/api/geography/detect-city', [
            'address' => '–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1'
        ]);

        $response->assertStatus(200)
            ->assertJsonStructure([
                'city' => ['id', 'name', 'hasMetro', 'population'],
                'confidence',
                'source'
            ])
            ->assertJsonPath('city.name', '–ú–æ—Å–∫–≤–∞')
            ->assertJsonPath('city.hasMetro', true);
    }

    /** @test */
    public function moscow_has_metro_and_zones_option(): void
    {
        $response = $this->getJson('/api/geography/cities/–ú–æ—Å–∫–≤–∞');

        $response->assertStatus(200)
            ->assertJsonPath('city.hasMetro', true)
            ->assertJsonPath('hasZonesOption', true)
            ->assertJsonStructure([
                'city',
                'districts' => [['id', 'name']],
                'metro' => ['lines' => [['id', 'name', 'color', 'stations']]]
            ]);
    }

    /** @test */
    public function small_city_has_no_metro_or_zones_option(): void
    {
        // –°–æ–∑–¥–∞–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –≥–æ—Ä–æ–¥
        $smallCity = City::factory()->create([
            'name' => '–¢—É–ª–∞',
            'population' => 400000,
            'has_metro' => false
        ]);

        CityDistrict::factory()->count(3)->create(['city_id' => $smallCity->id]);

        $response = $this->getJson("/api/geography/cities/{$smallCity->name}");

        $response->assertStatus(200)
            ->assertJsonPath('city.hasMetro', false)
            ->assertJsonPath('hasZonesOption', false)
            ->assertJsonPath('metro', null);
    }

    /** @test */
    public function can_get_moscow_districts(): void
    {
        $moscow = City::where('name', '–ú–æ—Å–∫–≤–∞')->first();
        
        $response = $this->getJson("/api/geography/cities/{$moscow->id}/districts");

        $response->assertStatus(200)
            ->assertJsonStructure([
                'data' => [['id', 'name', 'sortOrder', 'isCentral']]
            ]);

        $this->assertGreaterThan(100, count($response->json('data')));
    }

    /** @test */
    public function can_get_moscow_metro_stations(): void
    {
        $moscow = City::where('name', '–ú–æ—Å–∫–≤–∞')->first();
        
        $response = $this->getJson("/api/geography/cities/{$moscow->id}/metro");

        $response->assertStatus(200)
            ->assertJsonStructure([
                'lines' => [['id', 'name', 'color', 'stations' => [['id', 'name']]]]
            ]);

        $lines = $response->json('lines');
        $this->assertGreaterThan(10, count($lines)); // –£ –ú–æ—Å–∫–≤—ã >10 –ª–∏–Ω–∏–π
    }

    /** @test */
    public function returns_404_for_nonexistent_city(): void
    {
        $response = $this->getJson('/api/geography/cities/–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π–ì–æ—Ä–æ–¥');
        $response->assertStatus(404);
    }

    /** @test */
    public function returns_404_for_metro_in_city_without_metro(): void
    {
        $smallCity = City::factory()->create([
            'name' => '–ú–∞–ª—ã–π –≥–æ—Ä–æ–¥',
            'has_metro' => false
        ]);

        $response = $this->getJson("/api/geography/cities/{$smallCity->id}/metro");
        $response->assertStatus(404);
    }

    /** @test */
    public function city_detection_handles_various_formats(): void
    {
        $testCases = [
            '–≥. –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1' => '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',
            '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1' => '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
            '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ —É–ª –õ–µ–Ω–∏–Ω–∞ 1' => '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫',
            '–ö–∞–∑–∞–Ω—å, –ö—Ä–µ–º–ª–µ–≤—Å–∫–∞—è —É–ª–∏—Ü–∞' => '–ö–∞–∑–∞–Ω—å'
        ];

        foreach ($testCases as $address => $expectedCity) {
            $response = $this->postJson('/api/geography/detect-city', [
                'address' => $address
            ]);

            $response->assertStatus(200);
            
            $cityName = $response->json('city.name');
            $this->assertEquals($expectedCity, $cityName, 
                "Failed to detect {$expectedCity} from '{$address}'"
            );
        }
    }
}
```

#### 5.2 Frontend —Ç–µ—Å—Ç—ã
**–§–∞–π–ª:** `resources/js/src/entities/geography/model/geographyStore.test.ts`
```typescript
/**
 * –¢–µ—Å—Ç—ã –¥–ª—è GeographyStore
 */

import { describe, it, expect, beforeEach, vi } from 'vitest'
import { createPinia, setActivePinia } from 'pinia'
import { useGeographyStore } from './geographyStore'
import { geographyApi } from '../api/geographyApi'
import type { City, CityGeography, DetectCityResponse } from './types'

// –ú–æ–∫–∏
vi.mock('../api/geographyApi')

const mockCity: City = {
  id: 1,
  name: '–ú–æ—Å–∫–≤–∞',
  region: '–ú–æ—Å–∫–≤–∞',
  hasMetro: true,
  hasDistricts: true,
  population: 12678079,
  coordinates: { lat: 55.7558, lng: 37.6176 }
}

const mockCityGeography: CityGeography = {
  city: mockCity,
  districts: [
    { id: 1, name: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π', sortOrder: 1, isCentral: true },
    { id: 2, name: '–°–µ–≤–µ—Ä–Ω—ã–π', sortOrder: 2, isCentral: false }
  ],
  metro: {
    lines: [
      {
        id: 1,
        name: '–°–æ–∫–æ–ª—å–Ω–∏—á–µ—Å–∫–∞—è',
        color: '#E42313',
        sortOrder: 1,
        stations: [
          { id: 1, name: '–°–æ–∫–æ–ª—å–Ω–∏–∫–∏', sortOrder: 1 },
          { id: 2, name: '–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∞—è', sortOrder: 2 }
        ]
      }
    ],
    groupedStations: {
      '–°–æ–∫–æ–ª—å–Ω–∏—á–µ—Å–∫–∞—è': [
        { id: 1, name: '–°–æ–∫–æ–ª—å–Ω–∏–∫–∏', sortOrder: 1 },
        { id: 2, name: '–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∞—è', sortOrder: 2 }
      ]
    }
  },
  hasZonesOption: true
}

describe('GeographyStore', () => {
  beforeEach(() => {
    setActivePinia(createPinia())
    vi.clearAllMocks()
  })

  describe('detectCityFromAddress', () => {
    it('successfully detects city from address', async () => {
      const mockResponse: DetectCityResponse = {
        city: mockCity,
        confidence: 0.9,
        source: 'database'
      }

      vi.mocked(geographyApi.detectCity).mockResolvedValue(mockResponse)
      vi.mocked(geographyApi.getCityData).mockResolvedValue(mockCityGeography)

      const store = useGeographyStore()
      const result = await store.detectCityFromAddress('–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1')

      expect(result).toEqual(mockCity)
      expect(store.currentCity).toEqual(mockCity)
      expect(store.hasMetro).toBe(true)
      expect(store.hasZonesOption).toBe(true)
    })

    it('returns null for low confidence detection', async () => {
      const mockResponse: DetectCityResponse = {
        city: mockCity,
        confidence: 0.5,
        source: 'database'
      }

      vi.mocked(geographyApi.detectCity).mockResolvedValue(mockResponse)

      const store = useGeographyStore()
      const result = await store.detectCityFromAddress('–Ω–µ—è—Å–Ω—ã–π –∞–¥—Ä–µ—Å')

      expect(result).toBeNull()
      expect(store.currentCity).toBeNull()
    })

    it('handles detection errors gracefully', async () => {
      vi.mocked(geographyApi.detectCity).mockRejectedValue(new Error('API error'))

      const store = useGeographyStore()
      const result = await store.detectCityFromAddress('–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1')

      expect(result).toBeNull()
      expect(store.error).toContain('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥')
    })
  })

  describe('loadCityData', () => {
    it('loads and caches city data', async () => {
      vi.mocked(geographyApi.getCityData).mockResolvedValue(mockCityGeography)

      const store = useGeographyStore()
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')

      expect(store.currentCity).toEqual(mockCity)
      expect(store.availableDistricts).toHaveLength(2)
      expect(store.availableMetro).toHaveLength(1)

      // –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')
      expect(geographyApi.getCityData).toHaveBeenCalledTimes(1)
    })

    it('handles city not found', async () => {
      vi.mocked(geographyApi.getCityData).mockRejectedValue(
        new Error('–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω')
      )

      const store = useGeographyStore()
      await store.loadCityData('–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π–ì–æ—Ä–æ–¥')

      expect(store.currentCity).toBeNull()
      expect(store.error).toContain('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞')
    })
  })

  describe('computed properties', () => {
    beforeEach(async () => {
      vi.mocked(geographyApi.getCityData).mockResolvedValue(mockCityGeography)
      const store = useGeographyStore()
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')
    })

    it('calculates hasZonesOption correctly', () => {
      const store = useGeographyStore()
      expect(store.hasZonesOption).toBe(true)
    })

    it('calculates allMetroStations correctly', () => {
      const store = useGeographyStore()
      expect(store.allMetroStations).toEqual(['–°–æ–∫–æ–ª—å–Ω–∏–∫–∏', '–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∞—è'])
    })

    it('creates districtsByName mapping', () => {
      const store = useGeographyStore()
      expect(store.districtsByName).toEqual({
        '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π': { id: 1, name: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π', sortOrder: 1, isCentral: true },
        '–°–µ–≤–µ—Ä–Ω—ã–π': { id: 2, name: '–°–µ–≤–µ—Ä–Ω—ã–π', sortOrder: 2, isCentral: false }
      })
    })
  })

  describe('cache management', () => {
    it('caches city data', async () => {
      vi.mocked(geographyApi.getCityData).mockResolvedValue(mockCityGeography)

      const store = useGeographyStore()
      
      // –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')
      expect(geographyApi.getCityData).toHaveBeenCalledTimes(1)

      // –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å - –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')
      expect(geographyApi.getCityData).toHaveBeenCalledTimes(1)
    })

    it('clears cache correctly', async () => {
      vi.mocked(geographyApi.getCityData).mockResolvedValue(mockCityGeography)

      const store = useGeographyStore()
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')

      store.clearCache()

      // –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
      await store.loadCityData('–ú–æ—Å–∫–≤–∞')
      expect(geographyApi.getCityData).toHaveBeenCalledTimes(2)
    })
  })
})
```

#### 5.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

1. **–ú–æ—Å–∫–≤–∞ (–ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)**
   - –í–≤–æ–¥: "–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –≥–æ—Ä–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, >100 —Ä–∞–π–æ–Ω–æ–≤, 14+ –ª–∏–Ω–∏–π –º–µ—Ç—Ä–æ, –ø–æ–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã"

2. **–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ (–º–µ—Ç—Ä–æ + –∑–æ–Ω—ã)**
   - –í–≤–æ–¥: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1"  
   - –û–∂–∏–¥–∞–Ω–∏–µ: –≥–æ—Ä–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, ~10 —Ä–∞–π–æ–Ω–æ–≤, 1 –ª–∏–Ω–∏—è –º–µ—Ç—Ä–æ, –ø–æ–∫–∞–∑–∞–Ω–∞ –æ–ø—Ü–∏—è "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã"

3. **–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä (—Ç–æ–ª—å–∫–æ —Ä–∞–π–æ–Ω—ã)**
   - –í–≤–æ–¥: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, —É–ª. –ö—Ä–∞—Å–Ω–∞—è, 1"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –≥–æ—Ä–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, ~5 —Ä–∞–π–æ–Ω–æ–≤, –º–µ—Ç—Ä–æ —Å–∫—Ä—ã—Ç–æ, –æ–ø—Ü–∏—è "–í –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã" —Å–∫—Ä—ã—Ç–∞

4. **–°–º–µ–Ω–∞ –ú–æ—Å–∫–≤–∞ ‚Üí –¢—É–ª–∞**
   - –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –≤—ã–±—Ä–∞–Ω—ã –∑–æ–Ω—ã –∏ –º–µ—Ç—Ä–æ –≤ –ú–æ—Å–∫–≤–µ
   - –°–º–µ–Ω–∞ –∞–¥—Ä–µ—Å–∞ –Ω–∞ –¢—É–ª—É
   - –û–∂–∏–¥–∞–Ω–∏–µ: –∞–≤—Ç–æ—Å–±—Ä–æ—Å –∑–æ–Ω –Ω–∞ "–ü–æ –≤—Å–µ–º—É –≥–æ—Ä–æ–¥—É", –æ—á–∏—Å—Ç–∫–∞ –º–µ—Ç—Ä–æ

5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–≥–æ –∂–µ –≥–æ—Ä–æ–¥–∞ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
   - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API < 500ms
   - –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –º–µ—Ç—Ä–æ –ú–æ—Å–∫–≤—ã < 100kb

### –≠–¢–ê–ü 6: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ üìÖ –ù–µ–¥–µ–ª—è 4

#### 6.1 Backend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```php
// –í GeographyService –¥–æ–±–∞–≤–∏—Ç—å –º–Ω–æ–≥—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
public function getCityData(string $cityName): ?CityGeographyDTO
{
    // L1 –∫—ç—à - Redis (–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø)
    $l1CacheKey = "city_data_l1_{$cityName}";
    $cached = Cache::store('redis')->get($l1CacheKey);
    
    if ($cached) {
        return $cached;
    }

    // L2 –∫—ç—à - Database –∫—ç—à (–¥–æ–ª—å—à–µ –∂–∏–≤–µ—Ç)
    $l2CacheKey = "city_data_l2_{$cityName}";
    $cityData = Cache::store('database')->remember(
        $l2CacheKey, 
        86400, // 24 —á–∞—Å–∞
        function() use ($cityName) {
            return $this->buildCityDataFromDatabase($cityName);
        }
    );

    if ($cityData) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ L1 –∫—ç—à –Ω–∞ —á–∞—Å
        Cache::store('redis')->put($l1CacheKey, $cityData, 3600);
    }

    return $cityData;
}
```

#### 6.2 Database –∏–Ω–¥–µ–∫—Å—ã
```sql
-- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_cities_name_population ON cities(name, population);
CREATE INDEX idx_districts_city_name ON city_districts(city_id, name);
CREATE INDEX idx_metro_stations_line_sort ON metro_stations(line_id, sort_order);

-- –ß–∞—Å—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
CREATE INDEX idx_cities_large ON cities(id) WHERE population > 500000;
CREATE INDEX idx_cities_with_metro ON cities(id) WHERE has_metro = true;
```

#### 6.3 Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```typescript
// Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const ZonesSection = defineAsyncComponent(() => 
  import('./components/ZonesSection.vue')
)

const MetroSection = defineAsyncComponent(() => 
  import('./components/MetroSection.vue')
)

// –î–µ–±–æ—É–Ω—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞
const debouncedDetectCity = useDebounceFn(
  geographyStore.detectCityFromAddress, 
  300
)

// –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ —Å—Ç–∞–Ω—Ü–∏–π
const { containerRef, list } = useVirtualList(
  allMetroStations,
  { itemHeight: 32, overscan: 5 }
)
```

---

## üìÅ –ò–¢–û–ì–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (28 —Ñ–∞–π–ª–æ–≤):
```
Backend (18 —Ñ–∞–π–ª–æ–≤):
‚îú‚îÄ‚îÄ database/migrations/2025_01_01_000001_create_geography_tables.php
‚îú‚îÄ‚îÄ database/seeders/GeographySeeder.php
‚îú‚îÄ‚îÄ database/factories/Geography/CityFactory.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Models/City.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Models/CityDistrict.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Models/MetroLine.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Models/MetroStation.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Services/GeographyService.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Services/CityDetectionService.php
‚îú‚îÄ‚îÄ app/Domain/Geography/DTOs/CityGeographyDTO.php
‚îú‚îÄ‚îÄ app/Domain/Geography/DTOs/MetroDataDTO.php
‚îú‚îÄ‚îÄ app/Domain/Geography/Repositories/GeographyRepository.php
‚îú‚îÄ‚îÄ app/Application/Http/Controllers/Geography/GeographyController.php
‚îú‚îÄ‚îÄ tests/Feature/Geography/GeographyTest.php
‚îú‚îÄ‚îÄ tests/Feature/Geography/CityDetectionTest.php
‚îú‚îÄ‚îÄ tests/Unit/Geography/CityModelTest.php
‚îú‚îÄ‚îÄ tests/Unit/Geography/GeographyServiceTest.php
‚îî‚îÄ‚îÄ config/geography.php

Frontend (10 —Ñ–∞–π–ª–æ–≤):
‚îú‚îÄ‚îÄ resources/js/src/entities/geography/model/types.ts
‚îú‚îÄ‚îÄ resources/js/src/entities/geography/api/geographyApi.ts
‚îú‚îÄ‚îÄ resources/js/src/entities/geography/model/geographyStore.ts
‚îú‚îÄ‚îÄ resources/js/src/entities/geography/model/geographyStore.test.ts
‚îú‚îÄ‚îÄ resources/js/src/entities/geography/README.md
‚îî‚îÄ‚îÄ docs/api/geography.md
```

### –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã (8 —Ñ–∞–π–ª–æ–≤):
```
‚îú‚îÄ‚îÄ routes/api.php (–¥–æ–±–∞–≤–∏—Ç—å geography –º–∞—Ä—à—Ä—É—Ç—ã)
‚îú‚îÄ‚îÄ features/AdSections/GeoSection/ui/composables/useGeoData.ts
‚îú‚îÄ‚îÄ features/AdSections/GeoSection/ui/components/AddressMapSection.vue
‚îú‚îÄ‚îÄ features/AdSections/GeoSection/ui/components/OutcallSection.vue
‚îú‚îÄ‚îÄ features/AdSections/GeoSection/ui/components/ZonesSection.vue
‚îú‚îÄ‚îÄ features/AdSections/GeoSection/ui/components/MetroSection.vue
‚îú‚îÄ‚îÄ features/AdSections/GeoSection/ui/GeoSection.vue
‚îî‚îÄ‚îÄ docs/CHANGELOG.md (–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è)
```

---

## üß™ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- [ ] ‚úÖ **Backend:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (>20 —Ç–µ—Å—Ç–æ–≤)
- [ ] ‚úÖ **Frontend:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] ‚úÖ **API:** –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] ‚úÖ **UX:** –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–æ—á–Ω–æ –∫–∞–∫ –Ω–∞ Avito
- [ ] ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ < 500ms
- [ ] ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—ç—à
- [ ] ‚úÖ **–ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **–ú–æ—Å–∫–≤–∞** ‚Üí –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
2. **–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥** ‚Üí –º–µ—Ç—Ä–æ + –∑–æ–Ω—ã
3. **–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä** ‚Üí —Ç–æ–ª—å–∫–æ —Ä–∞–π–æ–Ω—ã  
4. **–°–º–µ–Ω–∞ –≥–æ—Ä–æ–¥–∞** ‚Üí –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Üí –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—É—á–∏–º:
- üéØ **UX —Ç–æ—á–Ω–æ –∫–∞–∫ –Ω–∞ Avito** - –∑–Ω–∞–∫–æ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ 100%** - –Ω–∏–∫–∞–∫–∏—Ö —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- üìä **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã –∏ —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ 270+ –≥–æ—Ä–æ–¥–æ–≤
- ‚ö° **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö  
- üîß **–õ–µ–≥–∫–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
- üß™ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- üì± **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–í—Ä–µ–º—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: 3-4 –Ω–µ–¥–µ–ª–∏**  
**–ö–æ–º–∞–Ω–¥–∞: 1 fullstack —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ + AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç**

---

**–≠—Ç–æ—Ç –ø–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏! üöÄ**