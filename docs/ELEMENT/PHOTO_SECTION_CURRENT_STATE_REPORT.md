# üì∏ –î–ï–¢–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: –°–ï–ö–¶–ò–Ø –§–û–¢–û - –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

*–°–æ–∑–¥–∞–Ω: 26.08.2025*  
*–í–µ—Ä—Å–∏—è: –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ KISS –ø—Ä–∏–Ω—Ü–∏–ø—É*

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–æ–≤)
2. [–õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ](#–ª–æ–≥–∏–∫–∞-–¥–æ–±–∞–≤–ª–µ–Ω–∏—è-—Ñ–æ—Ç–æ)
3. [–õ–æ–≥–∏–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ](#–ª–æ–≥–∏–∫–∞-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è-—Ñ–æ—Ç–æ)
4. [–õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ](#–ª–æ–≥–∏–∫–∞-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è-—Ñ–æ—Ç–æ)
5. [–õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ](#–ª–æ–≥–∏–∫–∞-—É–¥–∞–ª–µ–Ω–∏—è-—Ñ–æ—Ç–æ)
6. [Drag & Drop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#drag--drop-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
7. [–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤](#–≤–∞–ª–∏–¥–∞—Ü–∏—è-—Ñ–∞–π–ª–æ–≤)
8. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
9. [–°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#—Å–æ—Å—Ç–æ—è–Ω–∏—è-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
10. [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Frontend-Backend](#–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ-frontend-backend)
11. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í

### Frontend (FSD —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
```
resources/js/src/features/media/photo-upload/
‚îú‚îÄ‚îÄ composables/
‚îÇ   ‚îî‚îÄ‚îÄ usePhotoUpload.ts          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ç–æ
‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îî‚îÄ‚îÄ types.ts                   # TypeScript —Ç–∏–ø—ã –¥–ª—è —Ñ–æ—Ç–æ
‚îî‚îÄ‚îÄ ui/
    ‚îú‚îÄ‚îÄ PhotoUpload.vue            # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–µ–∫—Ü–∏–∏ —Ñ–æ—Ç–æ
    ‚îî‚îÄ‚îÄ components/
        ‚îî‚îÄ‚îÄ PhotoUploadZone.vue    # –ó–æ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
```

### Backend (DDD —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
```
app/Application/Http/Controllers/Ad/
‚îî‚îÄ‚îÄ DraftController.php            # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –ª–æ–≥–∏–∫–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
```

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
```
app/Domain/Ad/Models/
‚îî‚îÄ‚îÄ Ad.php                         # –ú–æ–¥–µ–ª—å —Å –ø–æ–ª–µ–º photos (JSON)
```

---

## üì§ –õ–û–ì–ò–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –§–û–¢–û

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–°–ø–æ—Å–æ–±—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
- –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ"
- Drag & Drop —Ñ–∞–π–ª–æ–≤ –≤ –∑–æ–Ω—É –∑–∞–≥—Ä—É–∑–∫–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ input[type="file"]

### 2. –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (usePhotoUpload.ts:63-70)

```typescript
const addPhotos = async (files: File[]) => {
  try {
    const newPhotos = await processPhotos(files)
    localPhotos.value = [...localPhotos.value, ...newPhotos]
  } catch (err) {
    // –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ error.value
  }
}
```

### 3. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (usePhotoUpload.ts:16-61)

```typescript
const processPhotos = (files: File[]): Promise<Photo[]> => {
  return new Promise((resolve) => {
    // 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    const imageFiles = files.filter(file => file.type.startsWith('image/'))
    
    // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ (–º–∞–∫—Å–∏–º—É–º 10 —Ñ–æ—Ç–æ)
    if (localPhotos.value.length + imageFiles.length > 10) {
      error.value = '–ú–∞–∫—Å–∏–º—É–º 10 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π'
      return
    }
    
    // 3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64 —á–µ—Ä–µ–∑ FileReader
    imageFiles.forEach(file => {
      const reader = new FileReader()
      reader.onload = (e) => {
        const photo: Photo = {
          id: Date.now() + Math.random(),
          file: file,
          preview: e.target?.result as string,  // base64 –¥–∞–Ω–Ω—ã–µ
          name: file.name,
          rotation: 0
        }
        newPhotos.push(photo)
      }
      reader.readAsDataURL(file)  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64
    })
  })
}
```

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ Photo

```typescript
interface Photo {
  id: string | number
  file?: File              // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (—Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ)
  preview?: string         // base64 –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  url?: string            // URL —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
  name?: string           // –ò–º—è —Ñ–∞–π–ª–∞
  rotation: number        // –£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ (0, 90, 180, 270)
}
```

---

## ‚úèÔ∏è –õ–û–ì–ò–ö–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –§–û–¢–û

### 1. –ü–æ–≤–æ—Ä–æ—Ç —Ñ–æ—Ç–æ (usePhotoUpload.ts:80-96)

```typescript
const rotatePhoto = (index: number) => {
  if (index < 0 || index >= localPhotos.value.length) return
  
  const newPhotos = [...localPhotos.value]
  const photo = newPhotos[index]
  
  const currentRotation = photo.rotation || 0
  newPhotos[index] = {
    ...photo,
    rotation: (currentRotation + 90) % 360  // –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ 90 –≥—Ä–∞–¥—É—Å–æ–≤
  }
  localPhotos.value = newPhotos
}
```

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —Ñ–æ—Ç–æ (usePhotoUpload.ts:98-109)

```typescript
const reorderPhotos = (fromIndex: number, toIndex: number) => {
  if (fromIndex === toIndex || /* –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞–Ω–∏—Ü */) return
  
  const newPhotos = [...localPhotos.value]
  const [movedPhoto] = newPhotos.splice(fromIndex, 1)  // –£–¥–∞–ª—è–µ–º
  newPhotos.splice(toIndex, 0, movedPhoto)            // –í—Å—Ç–∞–≤–ª—è–µ–º
  
  localPhotos.value = newPhotos
}
```

### 3. Drag & Drop –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:**
```typescript
const handleDragStart = (index: number) => {
  draggedIndex.value = index  // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –∏–Ω–¥–µ–∫—Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —Ñ–æ—Ç–æ
}

const handleDragDrop = (targetIndex: number) => {
  const sourceIndex = draggedIndex.value
  if (sourceIndex !== null && sourceIndex !== targetIndex) {
    reorderPhotos(sourceIndex, targetIndex)  // –ú–µ–Ω—è–µ–º –ø–æ—Ä—è–¥–æ–∫
  }
  // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è drag & drop
}
```

---

## üíæ –õ–û–ì–ò–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø –§–û–¢–û

### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞ (adFormModel.ts)

```typescript
// –£–ü–†–û–©–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
const hasPhotoFiles = form.photos?.some((photo: any) => {
  return photo instanceof File || 
         (typeof photo === 'string' && photo.startsWith('data:')) ||
         (photo?.preview && photo.preview.startsWith('data:'))
}) || false

// –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª—ã –∏–ª–∏ base64 - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º FormData, –∏–Ω–∞—á–µ JSON
const requestData = hasPhotoFiles ? createFormData() : form
```

### 2. FormData –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ base64 (adFormModel.ts)

```typescript
const createFormData = () => {
  const formData = new FormData()
  
  // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—è
  Object.keys(form).forEach(key => {
    if (key !== 'photos') {
      formData.append(key, form[key])
    }
  })
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
  if (form.photos) {
    form.photos.forEach((photo, index) => {
      if (photo instanceof File) {
        formData.append(`photos[${index}]`, photo)
      } else if (typeof photo === 'string') {
        formData.append(`photos[${index}]`, photo)  // base64 –∏–ª–∏ URL
      } else if (photo?.preview?.startsWith('data:')) {
        formData.append(`photos[${index}]`, photo.preview)  // base64
      }
    })
  }
  
  return formData
}
```

### 3. Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞ (DraftController.php)

**–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ update():**
```php
public function update(UpdateAdRequest $request, Ad $ad): RedirectResponse
{
    try {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ helper –º–µ—Ç–æ–¥
        $processedPhotos = $this->processPhotosFromRequest($request);
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è
        $validatedData = $request->validated();
        $validatedData['photos'] = json_encode($processedPhotos);
        
        $ad->update($validatedData);
        
        return redirect()->back()->with('success', '–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
    } catch (\Exception $e) {
        \Log::error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è: ' . $e->getMessage());
        return redirect()->back()->with('error', '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏');
    }
}
```

**Helper –º–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ:**
```php
private function processPhotosFromRequest(Request $request): array
{
    $photos = [];
    $photosInRequest = $request->has('photos');  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—è
    
    if ($photosInRequest) {
        foreach ($request->input('photos', []) as $photoValue) {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            if (empty($photoValue) || $photoValue === '[]') {
                continue;
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            if (is_string($photoValue) && str_starts_with($photoValue, 'data:image/')) {
                $savedPath = $this->saveBase64Photo($photoValue);
                if ($savedPath) {
                    $photos[] = $savedPath;
                }
            }
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö URL
            elseif (is_string($photoValue) && str_starts_with($photoValue, '/storage/')) {
                $photos[] = $photoValue;
            }
        }
    }
    
    return $photos;
}
```

**Helper –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è base64:**
```php
private function saveBase64Photo(string $base64Data): ?string
{
    try {
        if (!str_starts_with($base64Data, 'data:image/')) {
            return null;
        }
        
        // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ base64
        [$header, $data] = explode(',', $base64Data, 2);
        $imageData = base64_decode($data);
        
        if ($imageData === false) {
            return null;
        }
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞
        preg_match('/data:image\/(\w+);/', $header, $matches);
        $extension = $matches[1] ?? 'jpg';
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
        $fileName = 'draft_photo_' . time() . '_' . uniqid() . '.' . $extension;
        $path = 'ads/photos/' . $fileName;
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
        Storage::disk('public')->put($path, $imageData);
        
        return '/storage/' . $path;
        
    } catch (\Exception $e) {
        \Log::error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è base64 —Ñ–æ—Ç–æ: ' . $e->getMessage());
        return null;
    }
}
```

---

## üóëÔ∏è –õ–û–ì–ò–ö–ê –£–î–ê–õ–ï–ù–ò–Ø –§–û–¢–û

### 1. Frontend —É–¥–∞–ª–µ–Ω–∏–µ (usePhotoUpload.ts:72-78)

```typescript
const removePhoto = (index: number) => {
  if (index >= 0 && index < localPhotos.value.length) {
    const newPhotos = [...localPhotos.value]
    newPhotos.splice(index, 1)  // –£–¥–∞–ª—è–µ–º —Ñ–æ—Ç–æ –∏–∑ –º–∞—Å—Å–∏–≤–∞
    localPhotos.value = newPhotos
  }
}
```

### 2. Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è

**–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ª–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
```php
private function processPhotosFromRequest(Request $request): array
{
    $photos = [];
    $photosInRequest = $request->has('photos');  // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—è
    
    // –ï—Å–ª–∏ –ø–æ–ª–µ photos –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ - –∑–Ω–∞—á–∏—Ç –≤—Å–µ —Ñ–æ—Ç–æ —É–¥–∞–ª–µ–Ω—ã
    if (!$photosInRequest) {
        return [];  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ = —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ç–æ
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ–æ—Ç–æ
    foreach ($request->input('photos', []) as $photoValue) {
        if (empty($photoValue) || $photoValue === '[]') {
            continue;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        }
        // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    }
    
    return $photos;
}
```

### 3. –°—Ü–µ–Ω–∞—Ä–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è

**–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ç–æ:**
- Frontend: `localPhotos.value = []`
- Backend: –ø–æ–ª–µ `photos` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `photos` –≤ –ë–î = `"[]"`

**–ß–∞—Å—Ç–∏—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**
- Frontend: —É–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –º–∞—Å—Å–∏–≤–∞
- Backend: –ø–æ–ª—É—á–∞–µ—Ç –º–∞—Å—Å–∏–≤ –±–µ–∑ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç: `photos` –≤ –ë–î —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–æ—Ç–æ

---

## üéØ DRAG & DROP –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Drag & Drop

**–°–æ–±—ã—Ç–∏—è drag & drop (PhotoUploadZone.vue):**
```vue
<div 
  @drop.prevent="handleDrop"
  @dragover.prevent="isDragOver = true"
  @dragleave.prevent="isDragOver = false"
>
```

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫ drop —Å–æ–±—ã—Ç–∏—è:**
```typescript
const handleDrop = (event: DragEvent) => {
  isDragOver.value = false
  const files = Array.from(event.dataTransfer?.files || [])
  if (files.length > 0) {
    emit('files-selected', validateFiles(files))
  }
}
```

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Drag & Drop

**–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (usePhotoUpload.ts):**
```typescript
const isDragOver = ref(false)         // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–æ–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏
const draggedIndex = ref<number | null>(null)    // –ò–Ω–¥–µ–∫—Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ —Ñ–æ—Ç–æ
const dragOverIndex = ref<number | null>(null)   // –ò–Ω–¥–µ–∫—Å —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:**
```typescript
// –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
const handleDragStart = (index: number) => {
  draggedIndex.value = index
}

// –ù–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ
const handleDragOver = (index: number) => {
  if (draggedIndex.value !== null && draggedIndex.value !== index) {
    dragOverIndex.value = index
  }
}

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
const handleDragDrop = (targetIndex: number) => {
  const sourceIndex = draggedIndex.value
  if (sourceIndex !== null && sourceIndex !== targetIndex) {
    reorderPhotos(sourceIndex, targetIndex)
  }
  // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
  draggedIndex.value = null
  dragOverIndex.value = null
}
```

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ Drag & Drop

**–õ–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è (usePhotoUpload.ts:188-200):**
```typescript
const handleFileDrop = (event: DragEvent) => {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ù–ï –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ñ–æ—Ç–æ
  if (draggedIndex.value === null) {
    isDragOver.value = false
    const files = Array.from(event.dataTransfer?.files || [])
    if (files.length > 0) {
      addPhotos(files)
    }
  }
}
```

---

## ‚úÖ –í–ê–õ–ò–î–ê–¶–ò–Ø –§–ê–ô–õ–û–í

### 1. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (PhotoUploadZone.vue)

```typescript
const validateFiles = (files: File[]): File[] => {
  return files.filter(file => {
    // ‚úÖ –£–ü–†–û–©–ï–ù–ù–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
    const isValidFormat = props.acceptedFormats.some(format => 
      file.type.startsWith(format.split('/*')[0])
    )
    const isValidSize = file.size <= props.maxSize
    
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ—à–∏–±–æ–∫
    if (!isValidFormat || !isValidSize) {
      const reason = !isValidFormat ? '–Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç' : '—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä'
      console.warn(`‚ùå –§–∞–π–ª –æ—Ç–∫–ª–æ–Ω–µ–Ω (${reason}): ${file.name}`)
    }
    
    return isValidFormat && isValidSize
  })
}
```

### 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
```typescript
acceptedFormats: ['image/jpeg', 'image/png', 'image/webp']
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞:**
```typescript
maxSize: 10 * 1024 * 1024  // 10MB
```

**–õ–∏–º–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:**
```typescript
if (localPhotos.value.length + imageFiles.length > 10) {
  error.value = '–ú–∞–∫—Å–∏–º—É–º 10 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π'
}
```

### 3. –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (UpdateAdRequest.php)

```php
public function rules(): array
{
    return [
        'photos' => 'sometimes|array|max:10',
        'photos.*' => 'sometimes|string',  // URL –∏–ª–∏ base64
        // ... –¥—Ä—É–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞
    ];
}
```

---

## ‚ùå –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### 1. Frontend –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–æ–∫:**
```typescript
const error = ref('')  // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
const isUploading = ref(false)  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
```

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫:**
- –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (10MB)
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–æ—Ç–æ (10 —à—Ç—É–∫)
- –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ FileReader

### 2. Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**Try-catch –±–ª–æ–∫–∏:**
```php
public function update(UpdateAdRequest $request, Ad $ad): RedirectResponse
{
    try {
        // –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        $ad->update($validatedData);
        return redirect()->back()->with('success', '–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
        
    } catch (\Exception $e) {
        \Log::error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è: ' . $e->getMessage());
        return redirect()->back()->with('error', '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏');
    }
}
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:**
```php
private function saveBase64Photo(string $base64Data): ?string
{
    try {
        // –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    } catch (\Exception $e) {
        \Log::error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è base64 —Ñ–æ—Ç–æ: ' . $e->getMessage());
        return null;  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º null –ø—Ä–∏ –æ—à–∏–±–∫–µ
    }
}
```

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**Flash —Å–æ–æ–±—â–µ–Ω–∏—è:**
- –£—Å–ø–µ—Ö: `'success' => '–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã'`
- –û—à–∏–±–∫–∞: `'error' => '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏'`

---

## üîÑ –°–û–°–¢–û–Ø–ù–ò–Ø –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### 1. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ (usePhotoUpload.ts)

```typescript
const isUploading = ref(false)  // –ü–æ–∫–∞–∑ —Å–ø–∏–Ω–Ω–µ—Ä–∞ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

const processPhotos = (files: File[]): Promise<Photo[]> => {
  return new Promise((resolve) => {
    isUploading.value = true  // –ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤...
    
    if (processedCount === imageFiles.length) {
      isUploading.value = false  // –ö–æ–Ω–µ—Ü –∑–∞–≥—Ä—É–∑–∫–∏
      resolve(newPhotos)
    }
  })
}
```

### 2. –°–æ—Å—Ç–æ—è–Ω–∏–µ Drag & Drop

```typescript
const isDragOver = ref(false)      // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∑–æ–Ω—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
const draggedIndex = ref<number | null>(null)  // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–µ —Ñ–æ—Ç–æ
const dragOverIndex = ref<number | null>(null) // –¶–µ–ª–µ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
```

**–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
```vue
<div 
  :class="{ 
    'border-blue-400 bg-blue-50': isDragOver,
    'border-gray-300 bg-white': !isDragOver
  }"
>
  <span>
    {{ isDragOver ? '–û—Ç–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –∑–¥–µ—Å—å' : '–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –≤ —ç—Ç—É –æ–±–ª–∞—Å—Ç—å' }}
  </span>
</div>
```

### 3. –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–æ–∫

```typescript
const error = ref('')  // –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

// –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–æ–≤–æ–π –ø–æ–ø—ã—Ç–∫–µ
const processPhotos = (files: File[]): Promise<Photo[]> => {
  return new Promise((resolve) => {
    error.value = ''  // –°–±—Ä–æ—Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—à–∏–±–æ–∫
    // ...
  })
}
```

---

## üîó –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï FRONTEND-BACKEND

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**Frontend ‚Üí Backend:**
```javascript
// –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª—ã - FormData
const formData = new FormData()
formData.append('photos[0]', file)           // File –æ–±—ä–µ–∫—Ç
formData.append('photos[1]', base64String)   // base64 –¥–∞–Ω–Ω—ã–µ
formData.append('photos[2]', '/storage/...')  // URL —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–æ—Ç–æ

// –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ URL - JSON
const jsonData = {
  photos: ['/storage/photo1.jpg', '/storage/photo2.jpg']
}
```

**Backend ‚Üí Database:**
```php
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∫–∞–∫ JSON
$ad->photos = json_encode([
  '/storage/ads/photos/photo1.jpg',
  '/storage/ads/photos/photo2.jpg'
])
```

**Database ‚Üí Frontend:**
```php
// –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î
$photos = json_decode($ad->photos, true) ?? []
// –ü–µ—Ä–µ–¥–∞—á–∞ –≤ Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–µ—Ä–µ–∑ Inertia
return Inertia::render('Ad/Edit', [
    'ad' => $ad,
    'photos' => $photos
])
```

### 2. –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ç–æ:**
```
1. User –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª
2. FileReader ‚Üí base64
3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ preview
4. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ ‚Üí FormData ‚Üí Backend
5. Backend: base64 ‚Üí —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ
6. Database: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ URL —Ñ–∞–π–ª–∞
7. Frontend: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

**–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ:**
```
1. User –∫–ª–∏–∫–∞–µ—Ç "—É–¥–∞–ª–∏—Ç—å"
2. Frontend: —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞
3. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ç–æ
4. Backend: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ –ë–î
5. Frontend: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ props:**
```typescript
const initializeFromProps = (photos: Array<string | Photo>) => {
  if (localPhotos.value.length === 0 && photos.length > 0) {
    localPhotos.value = photos.map((photo, index) => {
      if (typeof photo === 'string') {
        return {
          id: `existing-${index}`,
          url: photo,
          preview: photo,
          rotation: 0
        }
      }
      return photo as Photo
    })
  }
}
```

---

## üìö –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### 1. –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

| –§—É–Ω–∫—Ü–∏—è | –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------|------------|
| `processPhotos()` | usePhotoUpload.ts | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è File ‚Üí base64, —Å–æ–∑–¥–∞–Ω–∏–µ Photo –æ–±—ä–µ–∫—Ç–æ–≤ |
| `addPhotos()` | usePhotoUpload.ts | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é |
| `removePhoto()` | usePhotoUpload.ts | –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –ø–æ –∏–Ω–¥–µ–∫—Å—É |
| `rotatePhoto()` | usePhotoUpload.ts | –ü–æ–≤–æ—Ä–æ—Ç —Ñ–æ—Ç–æ –Ω–∞ 90 –≥—Ä–∞–¥—É—Å–æ–≤ |
| `reorderPhotos()` | usePhotoUpload.ts | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —Ñ–æ—Ç–æ |
| `validateFiles()` | PhotoUploadZone.vue | –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ñ–æ—Ä–º–∞—Ç, —Ä–∞–∑–º–µ—Ä) |
| `processPhotosFromRequest()` | DraftController.php | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ –∏–∑ HTTP –∑–∞–ø—Ä–æ—Å–∞ |
| `saveBase64Photo()` | DraftController.php | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ base64 –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª |

### 2. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

**TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
```typescript
interface Photo {
  id: string | number    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  file?: File           // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ)
  preview?: string      // base64 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  url?: string         // URL —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
  name?: string        // –ò–º—è —Ñ–∞–π–ª–∞
  rotation: number     // –£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ (0, 90, 180, 270)
}
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
```typescript
const LIMITS = {
  maxPhotos: 10,                    // –ú–∞–∫—Å–∏–º—É–º —Ñ–æ—Ç–æ
  maxFileSize: 10 * 1024 * 1024,    // 10MB –Ω–∞ —Ñ–∞–π–ª
  allowedFormats: ['image/jpeg', 'image/png', 'image/webp']
}
```

### 4. –°–æ–±—ã—Ç–∏—è –∏ —ç–º–∏—Ç—ã

**Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```typescript
// PhotoUploadZone.vue
const emit = defineEmits<{
  'files-selected': [files: File[]]
}>()

// PhotoUpload.vue
const emit = defineEmits<{
  'photos-updated': [photos: Photo[]]
}>()
```

### 5. –•—É–∫–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

```typescript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
onMounted(() => {
  if (props.initialPhotos) {
    initializeFromProps(props.initialPhotos)
  }
})

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
watch(localPhotos, (newPhotos) => {
  emit('photos-updated', newPhotos)
}, { deep: true })
```

---

## üéØ –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

1. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –∫–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏** - –≤—Å–µ —Ç–∏–ø—ã —Ñ–æ—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—â–∏–µ helper –º–µ—Ç–æ–¥—ã
3. **–ù–∞–¥–µ–∂–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
4. **–•–æ—Ä–æ—à–µ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - Frontend –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è UI, Backend - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–≤—É—Ö —É—Ä–æ–≤–Ω—è—Ö** - –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä
6. **Drag & Drop** - —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - —Å–∂–∞—Ç–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. **–ü—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä –∑–∞–≥—Ä—É–∑–∫–∏** - –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
3. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–≤—å—é** - –º–∏–Ω–∏–∞—Ç—é—Ä—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
4. **Undo —Ñ—É–Ω–∫—Ü–∏—è** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
5. **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

- **–ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–æ**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - —á–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5) - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è base64 –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–∞
- **UX/UI**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å drag & drop
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ–∫—Ü–∏–∏ —Ñ–æ—Ç–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É KISS (Keep It Simple, Stupid). –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.*