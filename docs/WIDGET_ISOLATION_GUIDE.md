# üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ò–∑–æ–ª—è—Ü–∏–∏ –í–∏–¥–∂–µ—Ç–æ–≤ (–ü—Ä–∏–Ω—Ü–∏–ø Ozon)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –í–∏–¥–∂–µ—Ç–∞

–ö–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç –≤ SPA Platform —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É –ø–æ–ª–Ω–æ–π —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ –æ–±—Ä–∞–∑—Ü—É Ozon.

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –í–∏–¥–∂–µ—Ç–∞

```
resources/js/widgets/WidgetName/
‚îú‚îÄ‚îÄ index.ts                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ + lazy loading
‚îú‚îÄ‚îÄ WidgetName.vue          # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ api/                    # API –º–µ—Ç–æ–¥—ã –≤–∏–¥–∂–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ widgetApi.ts
‚îú‚îÄ‚îÄ store/                  # –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ (Pinia)
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ widgetStore.ts
‚îú‚îÄ‚îÄ composables/            # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ useWidget.ts
‚îú‚îÄ‚îÄ types/                  # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ widget.types.ts
‚îú‚îÄ‚îÄ styles/                 # –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ widget.module.css
‚îî‚îÄ‚îÄ components/             # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    ‚îú‚îÄ‚îÄ index.ts
    ‚îú‚îÄ‚îÄ WidgetHeader.vue
    ‚îî‚îÄ‚îÄ WidgetContent.vue
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –ò–∑–æ–ª—è—Ü–∏–∏

### 1. **–°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å**
```typescript
// ‚ùå –ü–ª–æ—Ö–æ - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
const globalUser = useGlobalUserStore()

// ‚úÖ –•–æ—Ä–æ—à–æ - –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ props –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API
const props = defineProps<{
  userId?: string
}>()
```

### 2. **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è API**
```typescript
// widgets/catalog/api/catalogApi.ts
export class CatalogWidgetApi {
  async getProducts(filters: ProductFilters): Promise<Product[]> {
    // –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API –≤—ã–∑–æ–≤—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞
  }
}
```

### 3. **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ**
```typescript
// widgets/catalog/store/catalogStore.ts
export const useCatalogWidgetStore = defineStore('catalog-widget', () => {
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞
  // –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö store
})
```

### 4. **–õ–µ–Ω–∏–≤–∞—è –ó–∞–≥—Ä—É–∑–∫–∞**
```typescript
// widgets/catalog/index.ts
export default defineAsyncComponent({
  loader: () => import('./CatalogWidget.vue'),
  loadingComponent: () => import('@/shared/ui/atoms/Skeleton'),
  errorComponent: () => import('@/shared/ui/molecules/ErrorState'),
  delay: 200,
  timeout: 3000
})
```

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –°—Ç—Ä–∞–Ω–∏—Ü—ã

### –ü—Ä–æ—Å—Ç–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```vue
<template>
  <div class="page">
    <!-- –í–∏–¥–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω -->
    <CatalogWidget 
      :category="'massage'"
      :filters="{ location: 'moscow' }"
      @product-selected="handleProductSelected"
    />
  </div>
</template>

<script setup>
// –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–∂–µ—Ç–∞
const CatalogWidget = defineAsyncComponent(() => 
  import('@/widgets/catalog')
)
</script>
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –í–∏–¥–∂–µ—Ç–æ–≤

### Performance –º–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### Error Boundary
–ö–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç –æ–±–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è –≤ ErrorBoundary –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫.

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

### CSS Modules
```css
/* widgets/catalog/styles/catalog.module.css */
.catalogWidget {
  /* –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ */
  --widget-primary: var(--color-blue-500);
  --widget-spacing: var(--spacing-4);
}

.catalogHeader {
  /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∏–∑–∞–π–Ω-—Ç–æ–∫–µ–Ω—ã –Ω–æ –Ω–µ –∑–∞–≤–∏—Å–∏–º –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∞—Å—Å–æ–≤ */
}
```

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª

1. **Mount** - –≤–∏–¥–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º–∏ props
2. **Load** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API
3. **Update** - —Ä–µ–∞–≥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è props
4. **Unmount** - –æ—á–∏—â–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ò–∑–æ–ª—è—Ü–∏–∏

### ‚úÖ –í–∏–¥–∂–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –µ—Å–ª–∏:
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ store (–∫—Ä–æ–º–µ user/auth)
- –ò–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API —Å–ª–æ–π
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –û—à–∏–±–∫–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –≤–∏–¥–∂–µ—Ç—ã
- –°—Ç–∏–ª–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å –≤–Ω–µ—à–Ω–∏–º–∏

### ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏—è –∏–∑–æ–ª—è—Ü–∏–∏:
- –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ DOM –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–≥–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ emit