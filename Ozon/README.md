# üõçÔ∏è Ozon Widget System - –°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∂–µ—Ç–æ–≤ –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ Ozon

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è Vue 3 –≤–∏–¥–∂–µ—Ç—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Ozon. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—á–Ω—É—é –ª–æ–≥–∏–∫—É –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ JSON API Ozon.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö –º–∏–∫—Ä–æ—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–≤ Ozon:
- –ö–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–æ–∫–µ–Ω–æ–≤
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–∫–∏–Ω–≥–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **ProductGrid** - –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: 5 –∫–æ–ª–æ–Ω–æ–∫, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ 3:4
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ Ozon: `itemsOnPage: 30`, `offset: 40`

### 2. **ProductCard** - –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑ Ozon state array
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π (priceV2, textAtom, labelList)
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏–π

### 3. **PriceBlock** - –ë–ª–æ–∫ —Ü–µ–Ω—ã
- –°—Ç–∏–ª–∏: SALE_PRICE, CARD_PRICE, ACTUAL_PRICE
- –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è —Å–∫–∏–¥–æ–∫ (#F1117E)
- –ê–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã

### 4. **BadgeSystem** - –°–∏—Å—Ç–µ–º–∞ –±–µ–π–¥–∂–µ–π
- "–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞" (backgroundColor: #f1117eff)
- "–¶–µ–Ω–∞ —á—Ç–æ –Ω–∞–¥–æ" (bgPositivePrimary)
- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: leftBottomBadge
- –¢–µ–º—ã: STYLE_TYPE_MEDIUM

### 5. **RatingBlock** - –ë–ª–æ–∫ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –ò–∫–æ–Ω–∫–∏: ic_s_star_filled_compact
- –¶–≤–µ—Ç–∞: graphicRating, textPremium
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∑—ã–≤–æ–≤

### 6. **FavoriteButton** - –ö–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- API: favoriteBatchAddItems/favoriteBatchDeleteItems
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤: favorite-simple-button
- –¢—Ä–µ–∫–∏–Ω–≥ –∫–ª–∏–∫–∞ –ø–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É

### 7. **InfiniteScroll** - –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
- –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞: shelf.infiniteScroll
- –í–µ—Ä—Ç–∏–∫–∞–ª—å: products
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Å extra empty page

### 8. **TrackingSystem** - –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–∫–∏–Ω–≥–∞
–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –∏–∑ Ozon:
- `view` - –ø—Ä–æ—Å–º–æ—Ç—Ä —ç–ª–µ–º–µ–Ω—Ç–∞
- `click` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–∫
- `aux_click` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∏–∫ (—Å—Ä–µ–¥–Ω—è—è –∫–Ω–æ–ø–∫–∞)
- `right_click` - –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫
- `favorite` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

### 9. **ImageOptimization** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
CDN –∏–∑ Ozon:
- `ir.ozone.ru` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `io.ozone.ru` - –æ—Ä–∏–≥–∏–Ω–∞–ª—ã
- `v-1.ozone.ru` - –≤–∏–¥–µ–æ
- `st.ozone.ru` - —Å—Ç–∞—Ç–∏–∫–∞

–†–µ–∂–∏–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- SCALE_ASPECT_FIT
- SCALE_ASPECT_FILL

### 10. **WidgetSystem** - –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∂–µ—Ç–æ–≤
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–¥–∂–µ—Ç–∞ –∏–∑ Ozon:
```json
{
  "component": "skuGridSimple",
  "stateId": "skuGridSimple-4170201-default-8",
  "version": 1,
  "vertical": "products",
  "widgetToken": "0BNM1-W7Gi9jMiZTLNfYCTJ4boQP0zoa",
  "widgetTrackingInfo": {...},
  "timeSpent": 64
}
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ SPA Platform:

```vue
<template>
  <div class="catalog-page">
    <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π -->
    <ProductGrid 
      :columns="5"
      :ratio="'3:4'"
      :items-per-page="30"
      :offset="40"
      @load-more="loadMoreProducts"
    >
      <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ -->
      <ProductCard 
        v-for="product in products"
        :key="product.skuId"
        :product="product"
        :tracking-enabled="true"
      />
    </ProductGrid>
  </div>
</template>

<script setup>
import { ProductGrid, ProductCard } from '@/Ozon'
import { useTracking } from '@/Ozon/TrackingSystem'

const { trackView, trackClick } = useTracking()
</script>
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç —Ç–æ–≤–∞—Ä–∞ (–∏–∑ Ozon JSON):
```typescript
interface OzonProduct {
  skuId: string
  action: {
    behavior: "BEHAVIOR_TYPE_REDIRECT"
    link: string
  }
  favButton: {
    id: string
    isFav: boolean
    favLink: string
    unfavLink: string
  }
  images: Array<{
    link: string
    contentMode: "SCALE_ASPECT_FIT" | "SCALE_ASPECT_FILL"
  }>
  leftBottomBadge?: {
    text: string
    backgroundColor: string
    theme: string
  }
  state: Array<ProductState>
  trackingInfo: TrackingInfo
}
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Ozon

1. **–ú–∏–∫—Ä–æ—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã** - –∫–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
2. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –≤–∏–¥–∂–µ—Ç–æ–≤
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - lazy loading –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
5. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ Ozon `serverTiming`:
- Widgets: 66ms
- Resolve: 4ms
- Total: 73ms
- ComposerTotal: 73ms
- ComposerInternal: 2ms

## üîó –°–≤—è–∑—å —Å SPA Platform

–≠—Ç–∏ –≤–∏–¥–∂–µ—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:
- –ö–∞—Ç–∞–ª–æ–≥–∞ –º–∞—Å—Ç–µ—Ä–æ–≤ (–≤–º–µ—Å—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤)
- –°–ø–∏—Å–∫–∞ —É—Å–ª—É–≥
- –ì–∞–ª–µ—Ä–µ–∏ —Ä–∞–±–æ—Ç
- –°–∏—Å—Ç–µ–º—ã –æ—Ç–∑—ã–≤–æ–≤
- –ò–∑–±—Ä–∞–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤

## üìù –ò—Å—Ç–æ—á–Ω–∏–∫

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞:
- `C:\Mirror\elements\api\entrypoint-api.bx\page\json\*.json`
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–∏–¥–∂–µ—Ç–æ–≤ Ozon
- –°–∏—Å—Ç–µ–º—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Ozon