function setCookie(name,value,options={path:'/'}){if(!name){return;}options=options||{};if(options.expires instanceof Date){options.expires=options.expires.toUTCString();}if(value instanceof Object){value=JSON.stringify(value);}let updatedCookie=encodeURIComponent(name)+"="+encodeURIComponent(value);for(let optionKey in options){updatedCookie+="; "+optionKey;let optionValue=options[optionKey];if(optionValue!==true){updatedCookie+="="+optionValue;}}document.cookie=updatedCookie;}function getCookie(name,json=false){if(!name){return undefined;}let matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([.$?*|{}()\[\]\\\/+^])/g,'\\$1')+"=([^;]*)"));if(matches){let res=decodeURIComponent(matches[1]);if(json){try{return JSON.parse(res);}catch(e){}}return res;}return undefined;}$(window).on('load',function(){if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){$('body').addClass('ios');}else{$('body').addClass('web');}$('body').removeClass('loaded');});var process_load,numpage=1;var loading_filter_time;var filter_active=0,filter_trigger=0;var popstate_active=0;function next_page(){var url=$(".next_page a").prop('href')
$.post(url,{result:'content'},function(data){window.history.pushState({},"",url);data=data.split("|||");$(".pagination, .pagination-mobile, .errorblock, .next_page").remove()
if(data[0])$(".flex-container.ajaxresult").append(data[0]);if(!$(".next_page a").length)$(".pagination, .pagination-mobile, .errorblock, .next_page").remove()
process_load=0;$(".pagination-mobile").remove()})}function start_sort(sort){numpage=1;$('input[name=page]').val(0);$('input[name=sort_]').val(sort);$('.js-filter, .m-filter-form').trigger('submit',1);$(document).off('scroll');$(document).on('scroll.main_ankety',function(){if(!$(".next_page").length||process_load==1){console.log($(".next_page").length,process_load);return;}console.log('proccess')
if($(document).scrollTop()+$(window).height()+2000>=$(document).height()){process_load=1;numpage=numpage+1;$("input[name=page]").val(numpage)
$('.js-filter, .m-filter-form').trigger('submit','del_btn')}})}$(function(){if(!$(".next_page a").length)$(".next_page, .pagination-mobile").remove()})
$(document).on("click",".load-more-btn",function(){numpage=numpage+1;if(filter_active){$(".m-filter-form input[name=page]").val(numpage)
$('.m-filter-form').trigger('submit',2)
$(document).on('scroll.main_ankety',function(){if(!$(".next_page").length||process_load==1){console.log($(".next_page").length,process_load);return;}console.log('proccess')
if($(document).scrollTop()+$(window).height()+2000>=$(document).height()){process_load=1;numpage=numpage+1;$(".m-filter-form input[name=page]").val(numpage)
$('.m-filter-form').trigger('submit','del_btn')}})}else{next_page();$(document).on('scroll.main_ankety',function(){if(!$(".next_page").length||process_load==1){console.log($(".next_page").length,process_load);return;}console.log('proccess')
if($(document).scrollTop()+$(window).height()+2000>=$(document).height()){process_load=1;next_page()
console.log('start')}})}return false;})
function load_posts_sort_start(){var url=location.href.split("page/");url=url[0].split("#");url=url[0].split("?");if(!filter_trigger){history.pushState({sort_:$("select[name=sort_]").val()},'Сортировка',url[0]+'?sort_='+$("select[name=sort_]").val());}filter_trigger=0;numpage=1;$.post((url[0]),{result:'content',sort_:$("select[name=sort_]").val()},function(data){HideLoading()
data=data.split("|||")
$(".pagination, .pagination-mobile, .errorblock").remove()
if(data[0]){$(".flex-container.ajaxresult").html(data[0])
$(".statistics-text").text(data[1])
if($(".pagination a").length)$(".pagination a").on("click",function(){var page=0
if(this.href.indexOf("page/")!==-1){page=this.href.split("/page/")
page=page[1].substring(0,page[1].length-1)}load_posts_sort(page)
return false})}process_load=0;});return false;}function load_posts_sort(numpage){var url=location.href.split("page/");url=url[0].split("#");url=url[0].split("?");if(!filter_trigger){history.pushState({sort_:$("select[name=sort_]").val(),page:numpage},'Сортировка',url[0]+'?page='+numpage+'&sort_='+$("select[name=sort_]").val());}filter_trigger=0;$.post((url[0]),{result:'content',page:numpage,sort_:$("select[name=sort_]").val()},function(data){HideLoading()
data=data.split("|||")
$(".pagination, .pagination-mobile, .errorblock").remove()
if(data[0]){$(".flex-container.ajaxresult").html(data[0])
$(".statistics-text").text(data[1])}else{}process_load=0;var minus_top=$(window).width()<1000?60:40;if($(".filter-button-mob-big").length){if($(".breadcrumbs").length)$(document).scrollTop($(".breadcrumbs").offset().top);else if($("#sectionCatalog").length)$(document).scrollTop($("#sectionCatalog").offset().top-40);else
$(document).scrollTop($(".page-catalog").offset().top-40);}else
$(document).scrollTop(0);if($(".pagination a").length)$(".pagination a").on("click",function(){var page=0
if(this.href.indexOf("page/")!==-1){page=this.href.split("/page/")
page=page[1].substring(0,page[1].length-1)}load_posts_sort(page)
return false})});return false;}function load_posts(page,h){popstate_active=1;var url=location.href.split("page/");url=url[0].split("#");url=url[0].split("?");if(page>0)url=url[0]+"page/"+page+"/";else url=url[0];if(!h)history.pushState(url,'Навигация',url);$.post(url,{result:'content'},function(data){$(".pagination, .pagination-mobile, .errorblock").remove()
if(data){$(".flex-container.ajaxresult").html(data)}else{}process_load=0;var minus_top=$(window).width()<900?5:15;if($(".filter-button-mob-big").length){if($(".breadcrumbs").length)$(document).scrollTop($(".breadcrumbs").offset().top);else if($("#sectionCatalog").length)$(document).scrollTop($("#sectionCatalog").offset().top-40);else
$(document).scrollTop($(".page-catalog").offset().top-40);}else
$(document).scrollTop(0);if($(".pagination a").length)$(".pagination a").on("click",function(){var page=0
if(this.href.indexOf("page/")!==-1){page=this.href.split("/page/")
page=page[1].substring(0,page[1].length-1)}load_posts(page)
return false})});return false;}function load_posts_filter(){numpage=numpage+1;$("input[name=cstart]").val(numpage)
var id=[];$(".js-catalog-item").each(function(){id.push($(this).data("id"))});$("input[name=not_id]").val(id.join(","));$.post("/engine/ajax/controller.php",$('form.js-filter').serializeArray(),function(data){var data=data.split("|||")
$(".pagination, .pagination-mobile, .errorblock").remove()
if(!data[0]){$(document).off('scroll.filter_ankety');if(!$(".flex-container.ajaxresult").html())$(".flex-container.ajaxresult").html('')}$(".flex-container.ajaxresult").append(data[0])
process_load=0;if($(".mfp-ready .js-filter").length)$('.js-filter').removeClass('opened');else
$('.js-filter').slideUp('slow').removeClass('opened');if($(".mfp-close").length)$(".mfp-close").click()})
return false;}function selected_count(){setTimeout(function(){$('.filter .filter__head-item').each(function(){var count=$('.checked',this).length;var count2=$('.js-counties .checked',this).length;if(count2)count=count-count2;if(count>0){$(this).find(".filter__trigger span").html("("+count+")")}else{$(this).find(".filter__trigger span").html("")}var countall=$('.filter input:checked').length;var countall_vetka=$('.js-counties input:checked').length;countall=countall-countall_vetka;if(countall)$('.filter__submit > button[type=submit] span.text').text("Применить ("+countall+")");else
$('.filter__submit  > button[type=submit] span.text').text("Применить");})},100);}var filter_active=0;$(document).ready(function(){$(window).on('popstate',function(event){if(typeof popstate_active=='undefined'||!popstate_active)return;if(location.href.indexOf('?mod=filter')===-1){if(history.state){var page=0
if(history.state.indexOf("page/")!==-1){page=history.state.split("/page/")
page=page[1].substring(0,page[1].length-1)}load_posts(page,1)}}});if(location.href.indexOf('sitemap/')===-1&&location.href.indexOf('?mod=filter')===-1&&location.href.indexOf('profile/')===-1&&location.href.indexOf('sort_=')===-1&&location.href.indexOf('blacklist')===-1&&location.href.indexOf('discussion')===-1&&location.href.indexOf('archive-kurtizanok-spb')===-1){if($(".pagination a").length)$(".pagination a").on("click",function(){var page=0
if(this.href.indexOf("page/")!==-1){page=this.href.split("/page/")
page=page[1].substring(0,page[1].length-1)}if(location.href.indexOf("/archive-kurtizanok-spb/")!==-1){if(page)$("title").text('Архив » Страница '+page);else $("title").text('Архив');}load_posts(page)
return false})}$(".header-nav__list a, .nav-mobile__list a").each(function(){if(location.href.indexOf(this.pathname)!==-1)$(this).parent().addClass("active")})
$('input, textarea').each(function(){var placeholder=$(this).attr('placeholder');$(this).focus(function(){$(this).attr('placeholder','');});$(this).focusout(function(){$(this).attr('placeholder',placeholder);});});initMagnific();if(location.href.indexOf("/page/")!==-1){numpage=location.href.split("/page/")
numpage=parseInt(numpage[1].substring(0,numpage[1].length-1))}initRangeSlider();if($('.js-styled').length){$('.js-styled').styler();}if($('.page-catalog__filter .page-catalog__pages').length){$('.page-catalog__filter .page-catalog__pages select').on("change",function(){$.post(location.href,{change_news_number:this.value},function(){location.reload();})});}if($('.js-datepicker').length)$('.js-datepicker').Zebra_DatePicker({show_icon:true,format:'Y-m-d',months:['Январь','Февраль','Март','Апрель','Май','Июнь','Июль','Август','Сентябрь','Октябрь','Ноябрь','Декабрь'],days:['Вс','Пн','Вт','Ср','Чт','Пт','Сб'],show_select_today:'Сегодня',lang_clear_date:'Очистить',default_position:'below'});if($('.reviews .swiper-container').length){var reviewsSwiper=new Swiper('.reviews .swiper-container',{pagination:{el:'.swiper-pagination',type:'fraction'},navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev'},speed:500});}if($('.js-filter__trigger').length&&$('.js-filter__body').length){var filterTrigger=$('.js-filter__trigger'),filterBody=$('.js-filter__body');var filterClose=filterBody.find('.js-filter-close');filterTrigger.click(function(){if($(this).hasClass('active')){filterTrigger.removeClass('active');filterBody.fadeOut();}else{filterTrigger.removeClass('active');filterBody.hide();$(this).toggleClass('active');$(this).next(filterBody).fadeIn();}});filterClose.click(function(){$(".filter__head-item").each(function(){if($(".js-filter__body .jq-checkbox.checked",this).length)$('.js-filter__trigger',this).addClass('active2');else $('.js-filter__trigger',this).removeClass('active2');})
filterTrigger.removeClass('active');filterBody.fadeOut();});}if($('.js-filter__list--substr').length){var listText=$('.js-filter__list--substr .text');for(var _i=0;_i<listText.length;_i++){var text=listText.eq(_i).text();if(text.length>21){text=text.substr(0,20);listText.eq(_i).text(text+'...');}}}if($('.main-info__to-characteristics').length){$('.main-info__to-characteristics').on('click',function(e){e.preventDefault();$("html, body").animate({scrollTop:$("#catalog-card__characteristics").offset().top-40});});}if($('.js-dropdown__trigger').length){$('.js-dropdown__trigger').click(function(){dropDown($(this));});}if($('.js-nav-mobile-trigger').length&&$('.js-nav-mobile').length){var navToggle=$('.js-nav-mobile-trigger'),navMobile=$('.js-nav-mobile');navToggle.click(function(){$(this).toggleClass('active');navMobile.toggleClass('opened');});}if($('.filter-services .filter__title').length){$('.filter-services .filter__title').click(function(){$(this).toggleClass('active');removeToggle($(this).siblings());});}if($('.popup-filter-close').length){$('.popup-filter-close').click(function(){$('body').removeClass('overflow-hidden');$('.js-filter').removeClass('opened');});}if($('.filter-submit').length){$('.filter-submit').click(function(){$('body').removeClass('overflow-hidden');});}if($('.js-show-txt').length){$('.js-show-txt').click(function(){if($(this).hasClass('active')){$(this).siblings('.js-hidden-text').removeClass('active');$(this).removeClass('active').text('Показать весь текст');}else{$(this).siblings('.js-hidden-text').addClass('active');$(this).addClass('active').text('Скрыть текст');}});}if($('.js-authorization').length){$('.js-authorization').click(function(e){e.preventDefault();$(this).next('.js-header-functionals__auth').slideToggle().toggleClass('opened');});}if($('.jstriptiz-profile-button').length){$('.jstriptiz-profile-button').click(function(e){e.preventDefault();$(this).toggleClass('active');$('.account-list').toggleClass('opened');});$('.account-list__item .text').click(function(e){e.preventDefault();$(this).toggleClass('active').next('.account-sublist').slideToggle();});}if($('.jstriptiz-profile-button').length&&$('.jstriptiz-profile-button__dropdown').length){$('.jstriptiz-profile-button').click(function(e){e.preventDefault();$(this).next('.jstriptiz-profile-button__dropdown').toggleClass('opened').slideToggle();});}if($('.js-scroll-top').length){$('.js-scroll-top').click(function(){$("html, body").animate({scrollTop:0},"slow");});}$('.box-field__input--phone .form-control').keyup(function(){if($(this).val().length==$(this).attr("maxlength")){$(this).next().focus();}});$('.product-services .optional').each(function(){if(!this.textContent){this.remove();}});if($.fn.magnificPopup)$('.write-review, .open-entry-popup, .private-message-btn, .reviews-add-button, .client-functions-message, .open-popup').magnificPopup({type:'inline'});$('.close-popup').on('click',function(){$.magnificPopup.close();});$('.review-popup-rating-element').each(function(){const ratingStart=$(this).find('.review-rating-star');ratingStart.on('click',function(){ratingStart.removeClass('active');$(this).addClass('active');$(this).nextAll().addClass('active');});});$(document).on('change','.jq-checkbox-own input',function(){$(this).parent().toggleClass('checked');});});$(document).mouseup(function(e){if($('.js-filter').hasClass('opened')){var div=$('.js-filter');if(!div.is(e.target)&&div.has(e.target).length===0){div.slideUp('slow');div.removeClass('opened');}}if($('.js-header-functionals__auth').hasClass('opened')){var div=$('.js-header-functionals__auth');if(!$('.js-authorization').is(e.target)&&!div.is(e.target)&&div.has(e.target).length===0){div.slideUp('slow');div.removeClass('opened');}}});function initMagnific(){if($('.js-popup').length&&$(document).width()>=768){$('.js-popup').magnificPopup({fixedBgPos:true,fixedContentPos:true,showCloseBtn:true,removalDelay:0,preloader:true,type:"inline",mainClass:'mfp-fade mfp-s-loading',galery:{enabled:true},});}}function initSLick(slickItem,slickVars){slickItem.slick(slickVars).resize();}function mobileNavToggle(dropDownBtn,navItem){dropDownBtn.toggleClass('active');removeToggle(navItem);}function dropDown(dropDownBtn){dropDownBtn.toggleClass('active');var toggleBlock=dropDownBtn.parent().find('.js-dropdown__content');removeToggle(toggleBlock);}function removeToggle(toggleBlock){toggleBlock.toggle(300,function(){if($(this).css('display')==='none'){$(this).removeAttr('style');}});}function initRangeSlider(reset){if($('.js-range-slider').length){var rangeSlider=$('.js-range-slider');for(var i=0;i<rangeSlider.length;i++){var min=rangeSlider.eq(i).attr('data-min'),max=rangeSlider.eq(i).attr('data-max'),from=rangeSlider.eq(i).attr('data-from'),to=rangeSlider.eq(i).attr('data-to');if(reset)rangeSlider.eq(i).data("ionRangeSlider").reset()
else
rangeSlider.eq(i).ionRangeSlider({type:"double",min:min,max:max,from:from,to:to,from_percent:0,to_percent:100});}$('.irs-slider').on('mousedown touchstart',function(){if($(this).hasClass('to')){$(this).siblings('.irs').find('.irs-from').removeClass('visible');$(this).siblings('.irs').find('.irs-to').addClass('visible');}else if($(this).hasClass('from')){$(this).siblings('.irs').find('.irs-to').removeClass('visible');$(this).siblings('.irs').find('.irs-from').addClass('visible');}});}}$(window).scroll(function(){if($(window).scrollTop()>500){$('.js-scroll-top').addClass('active');$('.call-button').addClass('active');}else{$('.js-scroll-top').removeClass('active');$('.call-button').removeClass('active');}});$(window).scroll(function(){if($(window).scrollTop()>1000){$('.js-scroll-top').addClass('active');}else{$('.js-scroll-top').removeClass('active');}});function showCatalogItemInfo(){if($(window).width()>767){$(document).on('mouseover','.catalog-item',function(){$(this).find('.catalog-item__statuses').addClass('hide');$(this).find('.catalog-item-info').addClass('active');});$(document).on('mouseout','.catalog-item',function(){$(this).find('.catalog-item__statuses').removeClass('hide');$(this).find('.catalog-item-info').removeClass('active');});}$(document).on('click','.catalog-item-info-toggle',function(){$(this).parents('.catalog-item').find('.catalog-item__statuses').toggleClass('hide');$(this).parents('.catalog-item').find('.catalog-item-info').toggleClass('active');$(this).toggleClass('active');});}showCatalogItemInfo();$('.entry-tab-reg').on('click',function(){$('.entry-log').removeClass('active');$('.entry-tab-log').removeClass('active');$(this).addClass('active');$('.entry-reg').addClass('active');});$('.entry-tab-log').on('click',function(){$('.entry-reg').removeClass('active');$('.entry-tab-reg').removeClass('active');$(this).addClass('active');$('.entry-log').addClass('active');});$('.profile-menu-open').on('click',function(e){e.preventDefault();$('.profile-menu').slideToggle();});if(typeof $.fn.tooltipster!="undefined")$('.tooltip-no-mobile').tooltipster({touchDevices:false});$('.pmlist table tr:last-child td:first-child').attr('colspan',1);$('.review-switch-button').on('click',function(){$(this).toggleClass('active');$(this).parent().next().slideToggle();if(!$(this).hasClass('active')){$('input[name="review-rating-s1"]').prop('checked',false);$('input[name="review-rating-m"]').prop('checked',false);$('input[name="review-rating-s"]').prop('checked',false);$('.review-rating-star').removeClass('active');}});$('.search-button').on('click',function(){$(this).toggleClass('active');$(this).next().toggleClass('open');$('.js-nav-mobile-trigger.active').click();});