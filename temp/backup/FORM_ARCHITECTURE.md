# Модульная архитектура формы подачи объявлений

## Обзор

Реализована модульная архитектура формы подачи объявлений по паттерну Avito с разделением на переиспользуемые компоненты и секции.

## Структура файлов

```
resources/js/
├── Components/
│   ├── Form/
│   │   ├── Controls/           # Атомарные элементы управления
│   │   │   ├── PriceInput.vue  # Ввод цены с постфиксом ₽
│   │   │   └── ...
│   │   ├── Upload/             # Компоненты загрузки
│   │   │   ├── PhotoUploader.vue  # Загрузка фотографий
│   │   │   └── VideoUploader.vue  # Загрузка видео
│   │   ├── Geo/                # Гео-компоненты
│   │   │   └── GeoSuggest.vue  # Поиск адресов
│   │   └── Sections/           # Секции формы
│   │       ├── DetailsSection.vue      # Подробности
│   │       ├── DescriptionSection.vue  # Описание
│   │       ├── PriceSection.vue        # Стоимость
│   │       ├── PromoSection.vue        # Акции
│   │       ├── MediaSection.vue        # Фото/видео
│   │       ├── GeographySection.vue    # География
│   │       ├── PriceListSection.vue    # Прайс-лист
│   │       ├── EducationSection.vue    # Образование
│   │       ├── ContactsSection.vue     # Контакты
│   │       └── FormActions.vue         # Кнопки действий
│   └── Layout/
│       ├── PageSection.vue     # Обертка секций
│       ├── PageHeader.vue      # Заголовок страницы
│       ├── Breadcrumbs.vue     # Хлебные крошки
│       └── BackButton.vue      # Кнопка назад
├── Composables/
│   ├── useAdForm.js            # Управление формой
│   ├── useAutosave.js          # Автосохранение
│   └── useMedia.js             # Работа с медиа
├── utils/
│   ├── formOptions.js          # Справочники опций
│   ├── formValidators.js       # Валидация
│   └── adApi.js               # API для объявлений
└── Pages/
    └── AddService.vue          # Главная страница формы
```

## Компоненты

### Атомарные элементы (Controls)

#### PriceInput.vue
- Ввод цены с постфиксом ₽
- Выбор единицы измерения (за услугу, за час, за сеанс)
- Валидация числовых значений
- Поддержка десятичных дробей

#### GeoSuggest.vue
- Поиск адресов с автодополнением
- Интеграция с Yandex Geocoder API
- Выбор координат
- Отображение выбранного адреса

### Компоненты загрузки (Upload)

#### PhotoUploader.vue
- Drag-and-drop загрузка
- Превью фотографий в сетке 4:3
- Ограничение до 10 файлов
- Валидация размера и формата
- Удаление отдельных фото

#### VideoUploader.vue
- Загрузка одного видео файла
- Превью с контролами
- Ограничение размера (50MB)
- Поддержка форматов MP4, AVI

### Секции формы (Sections)

#### DetailsSection.vue
- Название объявления
- Специальность
- Клиенты (женщины/мужчины)
- Место оказания услуг
- Формат работы
- Кто оказывает услуги
- Опыт работы

#### PromoSection.vue
- Скидка новым клиентам
- Подарки
- Промокоды
- Специальные предложения

#### MediaSection.vue
- Загрузка фотографий
- Загрузка видео
- Настройки отображения
- Советы по качеству

#### GeographySection.vue
- Основной адрес
- Районы выезда
- Радиус выезда
- Доплата за выезд
- Время в пути
- Интеграция с картой

#### PriceListSection.vue
- Основная услуга
- Дополнительные услуги (динамическое добавление)
- Настройки отображения цен
- Выбор валюты

#### EducationSection.vue
- Основное образование
- Дополнительные курсы
- Сертификаты
- Опыт работы

## Composables

### useAdForm.js
Центральный composable для управления формой:
- Реактивное состояние формы
- Валидация полей
- Отправка данных
- Интеграция с автосохранением
- Обработка ошибок

### useAutosave.js
Автоматическое сохранение черновиков:
- Дебаунс изменений
- Сохранение в localStorage
- Восстановление данных
- Индикация состояния

## Утилиты

### formOptions.js
Справочники опций для всех селектов:
- Специальности
- Клиенты
- Места оказания услуг
- Форматы работы
- Опыт работы
- Валюты

### formValidators.js
Валидация всех полей формы:
- Проверка обязательных полей
- Валидация email/телефона
- Проверка размеров файлов
- Кастомные правила

## Главная страница

### AddService.vue
Тонкий компонент-контейнер:
- Импорт всех секций
- Использование composables
- Обработка событий
- Навигация

## Преимущества архитектуры

1. **Модульность** - каждая секция независима
2. **Переиспользование** - компоненты можно использовать в других формах
3. **Масштабируемость** - легко добавлять новые секции
4. **Тестируемость** - каждый компонент можно тестировать отдельно
5. **Поддержка** - логика разделена по назначению

## Использование

```vue
<template>
  <AddService />
</template>

<script>
import AddService from '@/Pages/AddService.vue'

export default {
  components: { AddService }
}
</script>
```

## Расширение

Для добавления новой секции:

1. Создать компонент в `Components/Form/Sections/`
2. Добавить поля в `useAdForm.js`
3. Добавить валидацию в `formValidators.js`
4. Импортировать в `AddService.vue`

## Соответствие паттерну Avito

✅ Модульная структура  
✅ Атомарные компоненты  
✅ Переиспользуемые секции  
✅ Логика в composables  
✅ Тонкий главный компонент  
✅ Автосохранение  
✅ Валидация  
✅ Адаптивность 