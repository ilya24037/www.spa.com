# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ CORS –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏:

1. **CORS –æ—à–∏–±–∫–∏** - –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
2. **CSRF —Ç–æ–∫–µ–Ω** - —Ç—Ä–µ–±–æ–≤–∞–ª—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL** - –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å —Ñ–∞–π–ª–æ–º

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS
**–§–∞–π–ª:** `config/cors.php`
- –†–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞

### 2. –ò—Å–∫–ª—é—á–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –∏–∑ CSRF –ø—Ä–æ–≤–µ—Ä–∫–∏
**–§–∞–π–ª:** `app/Http/Middleware/VerifyCsrfToken.php`
- –î–æ–±–∞–≤–ª–µ–Ω `masters/*/upload/photos/test` –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω `api/*` –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤

### 3. –°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç
**–§–∞–π–ª:** `routes/web.php`
- –ú–∞—Ä—à—Ä—É—Ç `/masters/{master}/upload/photos/test` –±–µ–∑ CSRF
- –ü—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –∞–Ω–æ–Ω–∏–º–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `MediaProcessingService` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 4. –û–±–Ω–æ–≤–ª–µ–Ω HTML —Ñ–∞–π–ª
**–§–∞–π–ª:** `upload_master_photos.html`
- –í—Å–µ URL –∏–∑–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø–æ–ª–Ω—ã–µ: `http://127.0.0.1:8000/...`
- –£–±—Ä–∞–Ω CSRF —Ç–æ–∫–µ–Ω –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

## üöÄ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** `http://127.0.0.1:8000/upload_master_photos.html`
2. **–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞** –∏–∑ —Å–ø–∏—Å–∫–∞
3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** - drag & drop –∏–ª–∏ –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤
4. **–ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏"**
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–∞—Å—Ç–µ—Ä–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

**–¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç:**
```php
POST /masters/{master}/upload/photos/test
```

**–ë–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:**
- ‚ùå –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞
- ‚ùå CSRF —Ç–æ–∫–µ–Ω –Ω–µ –Ω—É–∂–µ–Ω
- ‚ùå –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

## üìä –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```json
{
  "success": true,
  "message": "–ó–∞–≥—Ä—É–∂–µ–Ω–æ 2 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π",
  "photos": [
    {
      "id": 25,
      "filename": "photo_1752575623.jpg",
      "original_url": "http://127.0.0.1:8000/masters/anna-1/photo/photo_1752575623.jpg",
      "medium_url": "http://127.0.0.1:8000/masters/anna-1/photo/medium_photo_1752575623.jpg",
      "thumb_url": "http://127.0.0.1:8000/masters/anna-1/photo/thumb_photo_1752575623.jpg",
      "is_main": false,
      "sort_order": 1
    }
  ]
}
```

## ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ CORS –∏ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –ª—é–±–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞. 